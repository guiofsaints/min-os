{
  "statistics": {
    "detectionDate": "2025-11-15T20:17:18.928Z",
    "formats": {
      "c": {
        "sources": {
          "workspace/_unmaintained/my282/tests/volume/volume.c": {
            "lines": 20,
            "tokens": 246,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/my282/tests/calibrate/calibrate.c": {
            "lines": 33,
            "tokens": 362,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 13,
            "duplicatedTokens": 114,
            "percentage": 39.39,
            "percentageTokens": 31.49,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/my282/tests/brightness/brightness.c": {
            "lines": 20,
            "tokens": 188,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/miyoomini/other/screenshot/main.c": {
            "lines": 195,
            "tokens": 1901,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 6,
            "duplicatedTokens": 141,
            "percentage": 3.08,
            "percentageTokens": 7.42,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/miyoomini/other/logotweak/logowrite.c": {
            "lines": 103,
            "tokens": 1579,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 16,
            "duplicatedTokens": 302,
            "percentage": 15.53,
            "percentageTokens": 19.13,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/miyoomini/other/logotweak/logoread.c": {
            "lines": 62,
            "tokens": 926,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 51,
            "duplicatedTokens": 846,
            "percentage": 82.26,
            "percentageTokens": 91.36,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/miyoomini/other/logotweak/logomake.c": {
            "lines": 86,
            "tokens": 1157,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 35,
            "duplicatedTokens": 544,
            "percentage": 40.7,
            "percentageTokens": 47.02,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/miyoomini/other/latency_reduction/main.c": {
            "lines": 25,
            "tokens": 288,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/tg5040/wifimanager/src/core/wpa_supplicant_conf.c": {
            "lines": 553,
            "tokens": 4612,
            "sources": 1,
            "clones": 38,
            "duplicatedLines": 508,
            "duplicatedTokens": 4204,
            "percentage": 91.86,
            "percentageTokens": 91.15,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/tg5040/wifimanager/src/core/wmg_debug.c": {
            "lines": 129,
            "tokens": 735,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/tg5040/wifimanager/src/core/wifi_udhcpc.c": {
            "lines": 202,
            "tokens": 1480,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/tg5040/wifimanager/src/core/wifi_event.c": {
            "lines": 364,
            "tokens": 3014,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/tg5040/wifimanager/src/core/wifi.c": {
            "lines": 616,
            "tokens": 4998,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/tg5040/wifimanager/src/core/tool.c": {
            "lines": 55,
            "tokens": 473,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/tg5040/wifimanager/src/core/status_info.c": {
            "lines": 248,
            "tokens": 2255,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/tg5040/wifimanager/src/core/scan.c": {
            "lines": 264,
            "tokens": 2113,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 36,
            "duplicatedTokens": 246,
            "percentage": 13.64,
            "percentageTokens": 11.64,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/zero28/show/show.c": {
            "lines": 62,
            "tokens": 566,
            "sources": 1,
            "clones": 8,
            "duplicatedLines": 131,
            "duplicatedTokens": 1325,
            "percentage": 211.29,
            "percentageTokens": 234.1,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/zero28/platform/platform.c": {
            "lines": 577,
            "tokens": 5092,
            "sources": 1,
            "clones": 56,
            "duplicatedLines": 1521,
            "duplicatedTokens": 13265,
            "percentage": 263.6,
            "percentageTokens": 260.51,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/zero28/libmsettings/msettings.c": {
            "lines": 225,
            "tokens": 1660,
            "sources": 1,
            "clones": 24,
            "duplicatedLines": 489,
            "duplicatedTokens": 4075,
            "percentage": 217.33,
            "percentageTokens": 245.48,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/zero28/keymon/keymon.c": {
            "lines": 146,
            "tokens": 1187,
            "sources": 1,
            "clones": 19,
            "duplicatedLines": 382,
            "duplicatedTokens": 3397,
            "percentage": 261.64,
            "percentageTokens": 286.18,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/zero28/bl/bl_enable.c": {
            "lines": 8,
            "tokens": 81,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/zero28/bl/bl_disable.c": {
            "lines": 8,
            "tokens": 81,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/trimuismart/show/show.c": {
            "lines": 38,
            "tokens": 272,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 12,
            "duplicatedTokens": 134,
            "percentage": 31.58,
            "percentageTokens": 49.26,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/trimuismart/platform/platform.c": {
            "lines": 537,
            "tokens": 4741,
            "sources": 1,
            "clones": 12,
            "duplicatedLines": 165,
            "duplicatedTokens": 1051,
            "percentage": 30.73,
            "percentageTokens": 22.17,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/trimuismart/libmsettings/msettings.c": {
            "lines": 149,
            "tokens": 1244,
            "sources": 1,
            "clones": 10,
            "duplicatedLines": 147,
            "duplicatedTokens": 1136,
            "percentage": 98.66,
            "percentageTokens": 91.32,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/trimuismart/keymon/keymon.c": {
            "lines": 82,
            "tokens": 705,
            "sources": 1,
            "clones": 9,
            "duplicatedLines": 129,
            "duplicatedTokens": 1085,
            "percentage": 157.32,
            "percentageTokens": 153.9,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/rgb30/show/show.c": {
            "lines": 42,
            "tokens": 344,
            "sources": 1,
            "clones": 4,
            "duplicatedLines": 55,
            "duplicatedTokens": 527,
            "percentage": 130.95,
            "percentageTokens": 153.2,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/rgb30/platform/platform.c": {
            "lines": 740,
            "tokens": 6336,
            "sources": 1,
            "clones": 55,
            "duplicatedLines": 2066,
            "duplicatedTokens": 18252,
            "percentage": 279.19,
            "percentageTokens": 288.07,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/rgb30/libmsettings/msettings.c": {
            "lines": 189,
            "tokens": 1507,
            "sources": 1,
            "clones": 29,
            "duplicatedLines": 666,
            "duplicatedTokens": 5298,
            "percentage": 352.38,
            "percentageTokens": 351.56,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/rgb30/keymon/keymon.c": {
            "lines": 169,
            "tokens": 1307,
            "sources": 1,
            "clones": 19,
            "duplicatedLines": 406,
            "duplicatedTokens": 3182,
            "percentage": 240.24,
            "percentageTokens": 243.46,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/rg35xxplus/show/show.c": {
            "lines": 62,
            "tokens": 597,
            "sources": 1,
            "clones": 5,
            "duplicatedLines": 108,
            "duplicatedTokens": 1123,
            "percentage": 174.19,
            "percentageTokens": 188.11,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/rg35xxplus/platform/platform.c": {
            "lines": 979,
            "tokens": 9041,
            "sources": 1,
            "clones": 27,
            "duplicatedLines": 776,
            "duplicatedTokens": 7140,
            "percentage": 79.26,
            "percentageTokens": 78.97,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/rg35xxplus/libmsettings/msettings.c": {
            "lines": 186,
            "tokens": 1531,
            "sources": 1,
            "clones": 9,
            "duplicatedLines": 232,
            "duplicatedTokens": 1848,
            "percentage": 124.73,
            "percentageTokens": 120.71,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/rg35xxplus/keymon/keymon.c": {
            "lines": 154,
            "tokens": 1121,
            "sources": 1,
            "clones": 12,
            "duplicatedLines": 250,
            "duplicatedTokens": 2027,
            "percentage": 162.34,
            "percentageTokens": 180.82,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/rg35xxplus/init/init.c": {
            "lines": 4,
            "tokens": 35,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/rg35xx/platform/platform.c": {
            "lines": 602,
            "tokens": 5616,
            "sources": 1,
            "clones": 11,
            "duplicatedLines": 167,
            "duplicatedTokens": 1877,
            "percentage": 27.74,
            "percentageTokens": 33.42,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/rg35xx/overclock/overclock.c": {
            "lines": 108,
            "tokens": 862,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 8,
            "duplicatedTokens": 106,
            "percentage": 7.41,
            "percentageTokens": 12.3,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/rg35xx/libmsettings/msettings.c": {
            "lines": 149,
            "tokens": 1231,
            "sources": 1,
            "clones": 9,
            "duplicatedLines": 159,
            "duplicatedTokens": 1224,
            "percentage": 106.71,
            "percentageTokens": 99.43,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/rg35xx/keymon/keymon.c": {
            "lines": 149,
            "tokens": 1207,
            "sources": 1,
            "clones": 9,
            "duplicatedLines": 151,
            "duplicatedTokens": 1274,
            "percentage": 101.34,
            "percentageTokens": 105.55,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/my355/show/show.c": {
            "lines": 62,
            "tokens": 597,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 62,
            "duplicatedTokens": 597,
            "percentage": 100,
            "percentageTokens": 100,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/my355/platform/platform.c": {
            "lines": 656,
            "tokens": 5442,
            "sources": 1,
            "clones": 16,
            "duplicatedLines": 623,
            "duplicatedTokens": 5358,
            "percentage": 94.97,
            "percentageTokens": 98.46,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/my355/libmsettings/msettings.c": {
            "lines": 243,
            "tokens": 2063,
            "sources": 1,
            "clones": 13,
            "duplicatedLines": 236,
            "duplicatedTokens": 1872,
            "percentage": 97.12,
            "percentageTokens": 90.74,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/my355/keymon/keymon.c": {
            "lines": 190,
            "tokens": 1471,
            "sources": 1,
            "clones": 6,
            "duplicatedLines": 158,
            "duplicatedTokens": 1331,
            "percentage": 83.16,
            "percentageTokens": 90.48,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/my282/show/show.c": {
            "lines": 62,
            "tokens": 566,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 64,
            "duplicatedTokens": 571,
            "percentage": 103.23,
            "percentageTokens": 100.88,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/my282/platform/platform.c": {
            "lines": 737,
            "tokens": 6286,
            "sources": 1,
            "clones": 16,
            "duplicatedLines": 707,
            "duplicatedTokens": 5862,
            "percentage": 95.93,
            "percentageTokens": 93.25,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/my282/libmstick/mstick.c": {
            "lines": 391,
            "tokens": 3546,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 24,
            "duplicatedTokens": 166,
            "percentage": 6.14,
            "percentageTokens": 4.68,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/my282/libmsettings/msettings.c": {
            "lines": 151,
            "tokens": 1347,
            "sources": 1,
            "clones": 5,
            "duplicatedLines": 145,
            "duplicatedTokens": 1186,
            "percentage": 96.03,
            "percentageTokens": 88.05,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/my282/keymon/keymon.c": {
            "lines": 127,
            "tokens": 960,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 113,
            "duplicatedTokens": 906,
            "percentage": 88.98,
            "percentageTokens": 94.38,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/miyoomini/show/show.c": {
            "lines": 50,
            "tokens": 532,
            "sources": 1,
            "clones": 4,
            "duplicatedLines": 43,
            "duplicatedTokens": 618,
            "percentage": 86,
            "percentageTokens": 116.17,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/miyoomini/platform/platform.c": {
            "lines": 553,
            "tokens": 4731,
            "sources": 1,
            "clones": 17,
            "duplicatedLines": 395,
            "duplicatedTokens": 3308,
            "percentage": 71.43,
            "percentageTokens": 69.92,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/miyoomini/overclock/overclock.c": {
            "lines": 143,
            "tokens": 1305,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 8,
            "duplicatedTokens": 106,
            "percentage": 5.59,
            "percentageTokens": 8.12,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/miyoomini/lumon/lumon.c": {
            "lines": 28,
            "tokens": 217,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/miyoomini/libmsettings/msettings.c": {
            "lines": 209,
            "tokens": 1685,
            "sources": 1,
            "clones": 6,
            "duplicatedLines": 130,
            "duplicatedTokens": 1079,
            "percentage": 62.2,
            "percentageTokens": 64.04,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/miyoomini/keymon/keymon.c": {
            "lines": 339,
            "tokens": 2434,
            "sources": 1,
            "clones": 5,
            "duplicatedLines": 112,
            "duplicatedTokens": 921,
            "percentage": 33.04,
            "percentageTokens": 37.84,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/miyoomini/blank/blank.c": {
            "lines": 11,
            "tokens": 166,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 6,
            "duplicatedTokens": 120,
            "percentage": 54.55,
            "percentageTokens": 72.29,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/miyoomini/batmon/batmon.c": {
            "lines": 171,
            "tokens": 1561,
            "sources": 1,
            "clones": 4,
            "duplicatedLines": 108,
            "duplicatedTokens": 1030,
            "percentage": 63.16,
            "percentageTokens": 65.98,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/magicmini/platform/platform.c": {
            "lines": 808,
            "tokens": 6917,
            "sources": 1,
            "clones": 19,
            "duplicatedLines": 713,
            "duplicatedTokens": 5931,
            "percentage": 88.24,
            "percentageTokens": 85.75,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/magicmini/libmsettings/msettings.c": {
            "lines": 152,
            "tokens": 1294,
            "sources": 1,
            "clones": 4,
            "duplicatedLines": 137,
            "duplicatedTokens": 1088,
            "percentage": 90.13,
            "percentageTokens": 84.08,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/magicmini/keymon/keymon.c": {
            "lines": 127,
            "tokens": 963,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 112,
            "duplicatedTokens": 902,
            "percentage": 88.19,
            "percentageTokens": 93.67,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/m17/platform/platform.c": {
            "lines": 522,
            "tokens": 4187,
            "sources": 1,
            "clones": 16,
            "duplicatedLines": 272,
            "duplicatedTokens": 2539,
            "percentage": 52.11,
            "percentageTokens": 60.64,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/m17/libmsettings/msettings.c": {
            "lines": 176,
            "tokens": 1341,
            "sources": 1,
            "clones": 8,
            "duplicatedLines": 160,
            "duplicatedTokens": 1157,
            "percentage": 90.91,
            "percentageTokens": 86.28,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/m17/keymon/keymon.c": {
            "lines": 150,
            "tokens": 1105,
            "sources": 1,
            "clones": 7,
            "duplicatedLines": 127,
            "duplicatedTokens": 1083,
            "percentage": 84.67,
            "percentageTokens": 98.01,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/gkdpixel/test/main.c": {
            "lines": 41,
            "tokens": 228,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/gkdpixel/platform/platform.c": {
            "lines": 688,
            "tokens": 7931,
            "sources": 1,
            "clones": 25,
            "duplicatedLines": 284,
            "duplicatedTokens": 3771,
            "percentage": 41.28,
            "percentageTokens": 47.55,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/gkdpixel/libmsettings/msettings.c": {
            "lines": 173,
            "tokens": 1309,
            "sources": 1,
            "clones": 4,
            "duplicatedLines": 150,
            "duplicatedTokens": 1115,
            "percentage": 86.71,
            "percentageTokens": 85.18,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/gkdpixel/keymon/keymon.c": {
            "lines": 125,
            "tokens": 918,
            "sources": 1,
            "clones": 6,
            "duplicatedLines": 105,
            "duplicatedTokens": 885,
            "percentage": 84,
            "percentageTokens": 96.41,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/_unmaintained/gkdpixel/input/input.c": {
            "lines": 65,
            "tokens": 549,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/tg5040/wifimanager/daemon/wifi_daemon.c": {
            "lines": 156,
            "tokens": 942,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/tg5040/wifimanager/daemon/wifid_ctrl.c": {
            "lines": 451,
            "tokens": 3696,
            "sources": 1,
            "clones": 10,
            "duplicatedLines": 76,
            "duplicatedTokens": 598,
            "percentage": 16.85,
            "percentageTokens": 16.18,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/tg5040/wifimanager/daemon/wifid_cmd_iface.c": {
            "lines": 180,
            "tokens": 1380,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 10,
            "duplicatedTokens": 90,
            "percentage": 5.56,
            "percentageTokens": 6.52,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/tg5040/wifimanager/daemon/wifid_cmd_handle.c": {
            "lines": 205,
            "tokens": 1372,
            "sources": 1,
            "clones": 8,
            "duplicatedLines": 90,
            "duplicatedTokens": 758,
            "percentage": 43.9,
            "percentageTokens": 55.25,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/tg5040/show/show.c": {
            "lines": 40,
            "tokens": 324,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 34,
            "duplicatedTokens": 299,
            "percentage": 85,
            "percentageTokens": 92.28,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/tg5040/rfkill/rfkill.c": {
            "lines": 104,
            "tokens": 1153,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/tg5040/keymon/keymon.c": {
            "lines": 211,
            "tokens": 1585,
            "sources": 1,
            "clones": 8,
            "duplicatedLines": 112,
            "duplicatedTokens": 967,
            "percentage": 53.08,
            "percentageTokens": 61.01,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/desktop/libmsettings/msettings.c": {
            "lines": 405,
            "tokens": 3222,
            "sources": 1,
            "clones": 16,
            "duplicatedLines": 180,
            "duplicatedTokens": 1388,
            "percentage": 44.44,
            "percentageTokens": 43.08,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/all/syncsettings/syncsettings.c": {
            "lines": 7,
            "tokens": 59,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/all/nextval/nextval.c": {
            "lines": 40,
            "tokens": 269,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/all/minput/minput.c": {
            "lines": 259,
            "tokens": 3334,
            "sources": 1,
            "clones": 4,
            "duplicatedLines": 28,
            "duplicatedTokens": 251,
            "percentage": 10.81,
            "percentageTokens": 7.53,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/all/libgametimedb/gametimedb.c": {
            "lines": 469,
            "tokens": 3737,
            "sources": 1,
            "clones": 4,
            "duplicatedLines": 44,
            "duplicatedTokens": 224,
            "percentage": 9.38,
            "percentageTokens": 5.99,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/all/libbatmondb/batmondb.c": {
            "lines": 76,
            "tokens": 474,
            "sources": 1,
            "clones": 4,
            "duplicatedLines": 39,
            "duplicatedTokens": 356,
            "percentage": 51.32,
            "percentageTokens": 75.11,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/all/ledcontrol/ledcontrol.c": {
            "lines": 382,
            "tokens": 4247,
            "sources": 1,
            "clones": 8,
            "duplicatedLines": 82,
            "duplicatedTokens": 892,
            "percentage": 21.47,
            "percentageTokens": 21,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/all/gametimectl/gametimectl.c": {
            "lines": 68,
            "tokens": 469,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 16,
            "duplicatedTokens": 112,
            "percentage": 23.53,
            "percentageTokens": 23.88,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/all/gametime/gametime.c": {
            "lines": 459,
            "tokens": 4377,
            "sources": 1,
            "clones": 9,
            "duplicatedLines": 119,
            "duplicatedTokens": 918,
            "percentage": 25.93,
            "percentageTokens": 20.97,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/all/common/utils.c": {
            "lines": 506,
            "tokens": 4722,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 30,
            "duplicatedTokens": 277,
            "percentage": 5.93,
            "percentageTokens": 5.87,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/all/common/config.c": {
            "lines": 918,
            "tokens": 6764,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/all/clock/clock.c": {
            "lines": 328,
            "tokens": 2978,
            "sources": 1,
            "clones": 4,
            "duplicatedLines": 50,
            "duplicatedTokens": 352,
            "percentage": 15.24,
            "percentageTokens": 11.82,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/all/bootlogo/bootlogo.c": {
            "lines": 188,
            "tokens": 1380,
            "sources": 1,
            "clones": 7,
            "duplicatedLines": 107,
            "duplicatedTokens": 607,
            "percentage": 56.91,
            "percentageTokens": 43.99,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/all/battery/battery.c": {
            "lines": 782,
            "tokens": 7137,
            "sources": 1,
            "clones": 11,
            "duplicatedLines": 137,
            "duplicatedTokens": 1096,
            "percentage": 17.52,
            "percentageTokens": 15.36,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "workspace/all/batmon/batmon.c": {
            "lines": 349,
            "tokens": 2352,
            "sources": 1,
            "clones": 5,
            "duplicatedLines": 47,
            "duplicatedTokens": 414,
            "percentage": 13.47,
            "percentageTokens": 17.6,
            "newDuplicatedLines": 0,
            "newClones": 0
          }
        },
        "total": {
          "lines": 22073,
          "tokens": 190315,
          "sources": 89,
          "clones": 339,
          "duplicatedLines": 7440,
          "duplicatedTokens": 64422,
          "percentage": 33.71,
          "percentageTokens": 33.85,
          "newDuplicatedLines": 0,
          "newClones": 0
        }
      }
    },
    "total": {
      "lines": 22073,
      "tokens": 190315,
      "sources": 89,
      "clones": 339,
      "duplicatedLines": 7440,
      "duplicatedTokens": 64422,
      "percentage": 33.71,
      "percentageTokens": 33.85,
      "newDuplicatedLines": 0,
      "newClones": 0
    }
  },
  "duplicates": [
    {
      "format": "c",
      "lines": 9,
      "fragment": " imgfd;\n\n\tread_buf = malloc(IMGSIZE);\n\tif (!read_buf) { puts(\"malloc failed\"); return -1; }\n\n\tprintf(\"Reading /dev/mtd3 ... \");\n\tmtdfd = open(\"/dev/mtd3\", O_RDONLY);\n\tif (mtdfd < 0) { puts(\"failed to open\"); return -1; }\n\n\tioctl(mtdfd, MEMGETINFO, &mtdinfo);\n\tif (mtdinfo.type != 3) { puts(\"MTD type incorrect\"); return -1; }\n",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\other\\logotweak\\logoread.c",
        "start": 23,
        "end": 31,
        "startLoc": {
          "line": 23,
          "column": 9,
          "position": 146
        },
        "endLoc": {
          "line": 31,
          "column": 6,
          "position": 280
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\other\\logotweak\\logowrite.c",
        "start": 67,
        "end": 74,
        "startLoc": {
          "line": 67,
          "column": 7,
          "position": 942
        },
        "endLoc": {
          "line": 74,
          "column": 5,
          "position": 1075
        }
      }
    },
    {
      "format": "c",
      "lines": 9,
      "fragment": "EEK_SET);\n\tif (read(mtdfd, read_buf, IMGSIZE) != IMGSIZE) { puts(\"failed to read\"); return -1; }\n\tclose(mtdfd);\n\tputs(\"OK\");\n\n\tprintf(\"Checking partition ... \");\n\tread_ofs = read_buf;\t\t// \"SSTAR\" offset\n\tread_ofs32 = (uint32_t*)read_ofs;\n\tif ((read_ofs32[0] != 0x41545353)||(read_ofs32[1] != 0x52)||(read_ofs32[2] != 4)) { puts(\"missing SSTAR\"); return -1; }\n\n\tread_ofs = read_ofs + 12;\t// \"DISP\" offset",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\other\\logotweak\\logoread.c",
        "start": 37,
        "end": 45,
        "startLoc": {
          "line": 37,
          "column": 2,
          "position": 351
        },
        "endLoc": {
          "line": 45,
          "column": 2,
          "position": 519
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\other\\logotweak\\logowrite.c",
        "start": 36,
        "end": 44,
        "startLoc": {
          "line": 36,
          "column": 2,
          "position": 285
        },
        "endLoc": {
          "line": 44,
          "column": 2,
          "position": 453
        }
      }
    },
    {
      "format": "c",
      "lines": 36,
      "fragment": "2_t\ti, a, size, size32, imgcount, *read_ofs32;\n\tuint8_t\t\t*read_buf, *read_ofs;\n\tconst char\timg_name[4][12] = { \"image1.jpg\", \"image2.jpg\", \"image3.jpg\", \"logo.img\" };\n\tint\t\tmtdfd, imgfd;\n\tstruct stat\tfst;\n\n\tread_buf = malloc(IMGSIZE);\n\tif (!read_buf) { puts(\"malloc failed\"); return -1; }\n\n\tprintf(\"Reading /dev/mtd3 ... \");\n\tmtdfd = open(\"/dev/mtd3\", O_RDONLY);\n\tif (mtdfd < 0) { puts(\"failed to open\"); return -1; }\n\n\tioctl(mtdfd, MEMGETINFO, &mtdinfo);\n\tif (mtdinfo.type != 3) { puts(\"MTD type incorrect\"); return -1; }\n\tif (mtdinfo.size != IMGSIZE) { puts(\"MTD size incorrect\"); return -1; }\n\tif (mtdinfo.erasesize != 0x10000) { puts(\"MTD erasesize incorrect\"); return -1; }\n\n\tlseek(mtdfd, 0, SEEK_SET);\n\tif (read(mtdfd, read_buf, IMGSIZE) != IMGSIZE) { puts(\"failed to read\"); return -1; }\n\tclose(mtdfd);\n\tputs(\"OK\");\n\n\tprintf(\"Checking partition ... \");\n\tread_ofs = read_buf;\t\t// \"SSTAR\" offset\n\tread_ofs32 = (uint32_t*)read_ofs;\n\tif ((read_ofs32[0] != 0x41545353)||(read_ofs32[1] != 0x52)||(read_ofs32[2] != 4)) { puts(\"missing SSTAR\"); return -1; }\n\n\tread_ofs = read_ofs + 12;\t// \"DISP\" offset\n\tread_ofs32 = (uint32_t*)read_ofs;\n\tif (read_ofs32[0] != 0x50534944) { puts(\"missing DISP\"); return -1; }\n\tfor (i=1,a=0; i<8; i++) a += read_ofs32[i];\n\tread_ofs = read_ofs + read_ofs32[8] + read_ofs32[9];\t// 1st \"LOGO\" offset\n\tif ((a)||(read_ofs - read_buf) >",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\other\\logotweak\\logomake.c",
        "start": 20,
        "end": 55,
        "startLoc": {
          "line": 20,
          "column": 4,
          "position": 105
        },
        "endLoc": {
          "line": 55,
          "column": 21,
          "position": 649
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\other\\logotweak\\logoread.c",
        "start": 17,
        "end": 52,
        "startLoc": {
          "line": 17,
          "column": 6,
          "position": 89
        },
        "endLoc": {
          "line": 52,
          "column": 4,
          "position": 633
        }
      }
    },
    {
      "format": "c",
      "lines": 6,
      "fragment": " }\n\n    return flag;\n}\n\n/*\n * ssid to netid\n*/\nint wpa_conf_ssid2netid(char *ssid, tKEY_MGMT key_mgmt, char *net_id, int *len)\n{\n    int ret = -1;\n    char cmd[CMD_LEN + 1] = {0",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\tg5040\\wifimanager\\src\\core\\wpa_supplicant_conf.c",
        "start": 134,
        "end": 139,
        "startLoc": {
          "line": 134,
          "column": 2,
          "position": 979
        },
        "endLoc": {
          "line": 139,
          "column": 21,
          "position": 1048
        }
      },
      "secondFile": {
        "name": "workspace\\tg5040\\wifimanager\\src\\core\\wpa_supplicant_conf.c",
        "start": 37,
        "end": 42,
        "startLoc": {
          "line": 37,
          "column": 4,
          "position": 188
        },
        "endLoc": {
          "line": 42,
          "column": 3,
          "position": 259
        }
      }
    },
    {
      "format": "c",
      "lines": 8,
      "fragment": "md[CMD_LEN + 1] = {0};\n    char reply[REPLY_BUF_SIZE] = {0}, key_type[128], key_reply[128];\n    char *pssid_start=NULL, *pssid_end=NULL, *ptr=NULL;\n    int flag = 0;\n\n    /* parse key_type */\n    if(key_mgmt == WIFIMG_WPA_PSK || ke",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\tg5040\\wifimanager\\src\\core\\wpa_supplicant_conf.c",
        "start": 139,
        "end": 146,
        "startLoc": {
          "line": 139,
          "column": 5,
          "position": 1048
        },
        "endLoc": {
          "line": 146,
          "column": 37,
          "position": 1107
        }
      },
      "secondFile": {
        "name": "workspace\\tg5040\\wifimanager\\src\\core\\wpa_supplicant_conf.c",
        "start": 47,
        "end": 54,
        "startLoc": {
          "line": 47,
          "column": 5,
          "position": 295
        },
        "endLoc": {
          "line": 54,
          "column": 8,
          "position": 354
        }
      }
    },
    {
      "format": "c",
      "lines": 10,
      "fragment": "pe, \"WPA-PSK\", 128);\n    } else {\n        strncpy(key_type, \"NONE\", 128);\n    }\n\n    /* list ap in wpa_supplicant.conf */\n    strncpy(cmd, \"LIST_NETWORKS\", 15);\n    cmd[15] = '\\0';\n    ret = wifi_command(cmd, reply, sizeof(reply));\n    if(ret){\n        wmg_printf(MSG",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\tg5040\\wifimanager\\src\\core\\wpa_supplicant_conf.c",
        "start": 148,
        "end": 157,
        "startLoc": {
          "line": 148,
          "column": 3,
          "position": 1126
        },
        "endLoc": {
          "line": 157,
          "column": 4,
          "position": 1225
        }
      },
      "secondFile": {
        "name": "workspace\\tg5040\\wifimanager\\src\\core\\wpa_supplicant_conf.c",
        "start": 55,
        "end": 64,
        "startLoc": {
          "line": 55,
          "column": 4,
          "position": 370
        },
        "endLoc": {
          "line": 64,
          "column": 2,
          "position": 469
        }
      }
    },
    {
      "format": "c",
      "lines": 15,
      "fragment": "_ERROR,\"do list networks error!\\n\");\n        return -1;\n    }\n\n    ptr = reply;\n    while((pssid_start=strstr(ptr, ssid)) != NULL){\n        char *p_s=NULL, *p_e=NULL, *p_t=NULL;\n\n        pssid_end = pssid_start + strlen(ssid);\n        /* ssid is presuffix of searched network */\n        if(*pssid_end != '\\t'){\n            p_e = strchr(pssid_start",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\tg5040\\wifimanager\\src\\core\\wpa_supplicant_conf.c",
        "start": 157,
        "end": 171,
        "startLoc": {
          "line": 157,
          "column": 4,
          "position": 1226
        },
        "endLoc": {
          "line": 171,
          "column": 2,
          "position": 1317
        }
      },
      "secondFile": {
        "name": "workspace\\tg5040\\wifimanager\\src\\core\\wpa_supplicant_conf.c",
        "start": 64,
        "end": 78,
        "startLoc": {
          "line": 64,
          "column": 2,
          "position": 470
        },
        "endLoc": {
          "line": 78,
          "column": 2,
          "position": 561
        }
      }
    },
    {
      "format": "c",
      "lines": 12,
      "fragment": "        if(p_e != NULL){\n                ptr = p_e;\n                continue;\n            }else{\n                break;\n            }\n        }\n\n       flag |=",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\tg5040\\wifimanager\\src\\core\\wpa_supplicant_conf.c",
        "start": 171,
        "end": 182,
        "startLoc": {
          "line": 171,
          "column": 2,
          "position": 1327
        },
        "endLoc": {
          "line": 182,
          "column": 4,
          "position": 1386
        }
      },
      "secondFile": {
        "name": "workspace\\tg5040\\wifimanager\\src\\core\\wpa_supplicant_conf.c",
        "start": 78,
        "end": 87,
        "startLoc": {
          "line": 78,
          "column": 2,
          "position": 564
        },
        "endLoc": {
          "line": 87,
          "column": 3,
          "position": 621
        }
      }
    },
    {
      "format": "c",
      "lines": 8,
      "fragment": "p_s, tmp);\n            net_id[tmp] = '\\0';\n            }\n        }\n\n        /* get key_mgmt */\n        sprintf(cmd, \"GET_NETWORK %s key_mgmt\", net_id);\n        cmd[CMD_LEN] = '\\0';\n        ret = wifi_command(cmd, ke",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\tg5040\\wifimanager\\src\\core\\wpa_supplicant_conf.c",
        "start": 194,
        "end": 201,
        "startLoc": {
          "line": 194,
          "column": 8,
          "position": 1490
        },
        "endLoc": {
          "line": 201,
          "column": 3,
          "position": 1548
        }
      },
      "secondFile": {
        "name": "workspace\\tg5040\\wifimanager\\src\\core\\wpa_supplicant_conf.c",
        "start": 101,
        "end": 108,
        "startLoc": {
          "line": 101,
          "column": 4,
          "position": 743
        },
        "endLoc": {
          "line": 108,
          "column": 11,
          "position": 801
        }
      }
    },
    {
      "format": "c",
      "lines": 23,
      "fragment": "tf(MSG_ERROR,\"do get network %s key_mgmt error!\\n\", net_id);\n            return -1;\n        }\n\n        if(strcmp(key_reply, key_type) == 0){\n           flag |= (0x01 << 1);\n\t  *len =  strlen(net_id);\n            break;\n        }\n\n        if(p_e == NULL){\n            break;\n        }else{\n            *p_e = '\\",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\tg5040\\wifimanager\\src\\core\\wpa_supplicant_conf.c",
        "start": 202,
        "end": 224,
        "startLoc": {
          "line": 202,
          "column": 2,
          "position": 1577
        },
        "endLoc": {
          "line": 224,
          "column": 4,
          "position": 1652
        }
      },
      "secondFile": {
        "name": "workspace\\tg5040\\wifimanager\\src\\core\\wpa_supplicant_conf.c",
        "start": 112,
        "end": 130,
        "startLoc": {
          "line": 112,
          "column": 2,
          "position": 852
        },
        "endLoc": {
          "line": 130,
          "column": 3,
          "position": 927
        }
      }
    },
    {
      "format": "c",
      "lines": 8,
      "fragment": "0};\n    char net_id[NET_ID_LEN+1];\n    char *p_n = NULL, *p_t = NULL;\n\n    /* list ap in wpa_supplicant.conf */\n    strncpy(cmd, \"LIST_NETWORKS\", CMD_LEN);\n    cmd[CM",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\tg5040\\wifimanager\\src\\core\\wpa_supplicant_conf.c",
        "start": 235,
        "end": 242,
        "startLoc": {
          "line": 235,
          "column": 8,
          "position": 1792
        },
        "endLoc": {
          "line": 242,
          "column": 4,
          "position": 1847
        }
      },
      "secondFile": {
        "name": "workspace\\tg5040\\wifimanager\\src\\core\\wpa_supplicant_conf.c",
        "start": 55,
        "end": 62,
        "startLoc": {
          "line": 55,
          "column": 4,
          "position": 370
        },
        "endLoc": {
          "line": 62,
          "column": 4,
          "position": 425
        }
      }
    },
    {
      "format": "c",
      "lines": 10,
      "fragment": "reply[REPLY_BUF_SIZE] = {0};\n    char *p_c=NULL, *p_str = NULL;\n    char *p_s=NULL, *p_e=NULL, *p=NULL;\n    int is_ap_connected = 0;\n    int ssid_len = strlen(ssid);\n\n    strncpy(cmd, \"LIST_NETWORKS\", CMD_LEN);\n    cmd[CMD_L",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\tg5040\\wifimanager\\src\\core\\wpa_supplicant_conf.c",
        "start": 281,
        "end": 290,
        "startLoc": {
          "line": 281,
          "column": 5,
          "position": 2198
        },
        "endLoc": {
          "line": 290,
          "column": 6,
          "position": 2270
        }
      },
      "secondFile": {
        "name": "workspace\\tg5040\\wifimanager\\src\\core\\wpa_supplicant_conf.c",
        "start": 234,
        "end": 62,
        "startLoc": {
          "line": 234,
          "column": 5,
          "position": 1776
        },
        "endLoc": {
          "line": 62,
          "column": 4,
          "position": 425
        }
      }
    },
    {
      "format": "c",
      "lines": 6,
      "fragment": "ret = is_ip_exist();\n    if(ret > 0 && is_ap_connected == 1){\n            return ret;\n    }else{\n        return is_ap_connected;\n   ",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\tg5040\\wifimanager\\src\\core\\wpa_supplicant_conf.c",
        "start": 329,
        "end": 334,
        "startLoc": {
          "line": 329,
          "column": 2,
          "position": 2592
        },
        "endLoc": {
          "line": 334,
          "column": 2,
          "position": 2656
        }
      },
      "secondFile": {
        "name": "workspace\\tg5040\\wifimanager\\src\\core\\wpa_supplicant_conf.c",
        "start": 131,
        "end": 276,
        "startLoc": {
          "line": 131,
          "column": 2,
          "position": 944
        },
        "endLoc": {
          "line": 276,
          "column": 2,
          "position": 2142
        }
      }
    },
    {
      "format": "c",
      "lines": 11,
      "fragment": "  }\n}\n\nint wpa_conf_get_netid_connected(char *net_id, int *len)\n{\n    int ret = -1;\n    char cmd[CMD_LEN+1] = {0};\n    char reply[REPLY_BUF_SIZE] = {0};\n    char *p_c=NULL;\n\n    strncpy(cmd, \"LIST_NETWORKS\", CMD_LEN);\n    cmd[C",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\tg5040\\wifimanager\\src\\core\\wpa_supplicant_conf.c",
        "start": 334,
        "end": 344,
        "startLoc": {
          "line": 334,
          "column": 5,
          "position": 2656
        },
        "endLoc": {
          "line": 344,
          "column": 3,
          "position": 2731
        }
      },
      "secondFile": {
        "name": "workspace\\tg5040\\wifimanager\\src\\core\\wpa_supplicant_conf.c",
        "start": 279,
        "end": 62,
        "startLoc": {
          "line": 279,
          "column": 2,
          "position": 2194
        },
        "endLoc": {
          "line": 62,
          "column": 4,
          "position": 425
        }
      }
    },
    {
      "format": "c",
      "lines": 6,
      "fragment": "NULL, *p_e=NULL, *p=NULL;\n        p_e = strchr(p_c, '\\n');\n        if(p_e){\n            *p_e = '\\0';\n        }\n\n        p_s = strrchr(reply, '\\n');\n        p_s++;\n        p = strtok(",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\tg5040\\wifimanager\\src\\core\\wpa_supplicant_conf.c",
        "start": 353,
        "end": 358,
        "startLoc": {
          "line": 353,
          "column": 9,
          "position": 2827
        },
        "endLoc": {
          "line": 358,
          "column": 2,
          "position": 2898
        }
      },
      "secondFile": {
        "name": "workspace\\tg5040\\wifimanager\\src\\core\\wpa_supplicant_conf.c",
        "start": 91,
        "end": 96,
        "startLoc": {
          "line": 91,
          "column": 9,
          "position": 646
        },
        "endLoc": {
          "line": 96,
          "column": 2,
          "position": 717
        }
      }
    },
    {
      "format": "c",
      "lines": 28,
      "fragment": ";\n            }\n        }\n\n        return 1;\n    } else {\n        return 0;\n    }\n\n}\n\n/*\n * 1. link to ap\n * 2. get ip addr\n *\n*/\nint wpa_conf_get_ap_connected(char *netid, int *len)\n{\n    int ret = -1;\n    char cmd[CMD_LEN+1] = {0};\n    char reply[REPLY_BUF_SIZE] = {0};\n    char *p_c=NULL;\n\n    strncpy(cmd, \"LIST_NETWORKS\", CMD_LEN);\n    cmd[CMD_LEN] = '\\0';\n\n    ret = wifi_command(cmd, reply, sizeof(reply));\n    if(ret){\n        wmg_printf(MSG_ERROR,\"do list networks error!\\n\");\n        return -1;\n    }\n\n    if ((p_c=strstr(reply, \"CURRENT\")) != NULL){\n        char *p_s=NULL, *p_e=NULL, *p=NULL;\n        p_e = strchr(p_c, '\\n');",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\tg5040\\wifimanager\\src\\core\\wpa_supplicant_conf.c",
        "start": 374,
        "end": 401,
        "startLoc": {
          "line": 374,
          "column": 6,
          "position": 2952
        },
        "endLoc": {
          "line": 401,
          "column": 6,
          "position": 3207
        }
      },
      "secondFile": {
        "name": "workspace\\tg5040\\wifimanager\\src\\core\\wpa_supplicant_conf.c",
        "start": 131,
        "end": 355,
        "startLoc": {
          "line": 131,
          "column": 7,
          "position": 948
        },
        "endLoc": {
          "line": 355,
          "column": 7,
          "position": 2850
        }
      }
    },
    {
      "format": "c",
      "lines": 24,
      "fragment": "}\n\nint wpa_conf_enable_all_networks()\n{\n    int ret = -1, len = 0;\n    char cmd[CMD_LEN+1] = {0};\n    char reply[REPLY_BUF_SIZE] = {0};\n    char net_id[NET_ID_LEN+1] = {0};\n    char *p_n = NULL, *p_t = NULL;\n\n    /* list ap in wpa_supplicant.conf */\n    strncpy(cmd, \"LIST_NETWORKS\", CMD_LEN);\n    cmd[CMD_LEN] = '\\0';\n    ret = wifi_command(cmd, reply, sizeof(reply));\n    if(ret){\n        wmg_printf(MSG_ERROR,\"do list networks error!\\n\");\n        return -1;\n    }\n\n    p_n = strchr(reply, '\\n');\n    while(p_n != NULL){\n\t  p_n++;\n        if((p_t = strchr(p_n, '\\t')) != NULL){\n            len = p_t - p_n;\n            if(",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\tg5040\\wifimanager\\src\\core\\wpa_supplicant_conf.c",
        "start": 421,
        "end": 444,
        "startLoc": {
          "line": 421,
          "column": 2,
          "position": 3391
        },
        "endLoc": {
          "line": 444,
          "column": 42,
          "position": 3595
        }
      },
      "secondFile": {
        "name": "workspace\\tg5040\\wifimanager\\src\\core\\wpa_supplicant_conf.c",
        "start": 230,
        "end": 253,
        "startLoc": {
          "line": 230,
          "column": 2,
          "position": 1750
        },
        "endLoc": {
          "line": 253,
          "column": 8,
          "position": 1954
        }
      }
    },
    {
      "format": "c",
      "lines": 30,
      "fragment": "d, reply, sizeof(reply));\n    if(ret){\n        wmg_printf(MSG_ERROR,\"do save config error!\\n\");\n        return -1;\n    }\n\n    return 0;\n}\n\nint wpa_conf_remove_all_networks()\n{\n    int ret = -1, len = 0;\n    char cmd[CMD_LEN+1] = {0};\n    char reply[REPLY_BUF_SIZE] = {0};\n    char net_id[NET_ID_LEN+1] = {0};\n    char *p_n = NULL, *p_t = NULL;\n\n    /* list ap in wpa_supplicant.conf */\n    strncpy(cmd, \"LIST_NETWORKS\", CMD_LEN);\n    cmd[CMD_LEN] = '\\0';\n    ret = wifi_command(cmd, reply, sizeof(reply));\n    if(ret){\n        wmg_printf(MSG_ERROR,\"do list networks error!\\n\");\n        return -1;\n    }\n\n    p_n = strchr(reply, '\\n');\n    while(p_n != NULL){\n\t  p_n++;\n        if((p_t = strchr(p_n, '\\t')) != NULL){\n            len = p_t - p_n;\n            if(len <= NET_ID_LEN){\n               strncp",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\tg5040\\wifimanager\\src\\core\\wpa_supplicant_conf.c",
        "start": 466,
        "end": 495,
        "startLoc": {
          "line": 466,
          "column": 29,
          "position": 3753
        },
        "endLoc": {
          "line": 495,
          "column": 20,
          "position": 4035
        }
      },
      "secondFile": {
        "name": "workspace\\tg5040\\wifimanager\\src\\core\\wpa_supplicant_conf.c",
        "start": 416,
        "end": 445,
        "startLoc": {
          "line": 416,
          "column": 29,
          "position": 3321
        },
        "endLoc": {
          "line": 445,
          "column": 20,
          "position": 3603
        }
      }
    },
    {
      "format": "c",
      "lines": 19,
      "fragment": "cmd, \"REMOVE_NETWORK %s\", net_id);\n        ret = wifi_command(cmd, reply, sizeof(reply));\n        if(ret){\n            wmg_printf(MSG_ERROR,\"do remove network %s error!\\n\", net_id);\n            return -1;\n        }\n\n        p_n = strchr(p_n, '\\n');\n    }\n\n    /* save config */\n\t  sprintf(cmd, \"%s\", \"SAVE_CONFIG\");\n\t  ret = wifi_command(cmd, r",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\tg5040\\wifimanager\\src\\core\\wpa_supplicant_conf.c",
        "start": 498,
        "end": 516,
        "startLoc": {
          "line": 498,
          "column": 32,
          "position": 4075
        },
        "endLoc": {
          "line": 516,
          "column": 33,
          "position": 4184
        }
      },
      "secondFile": {
        "name": "workspace\\tg5040\\wifimanager\\src\\core\\wpa_supplicant_conf.c",
        "start": 448,
        "end": 466,
        "startLoc": {
          "line": 448,
          "column": 32,
          "position": 3643
        },
        "endLoc": {
          "line": 466,
          "column": 29,
          "position": 3752
        }
      }
    },
    {
      "format": "c",
      "lines": 28,
      "fragment": "eply, sizeof(reply));\n    if(ret){\n        wmg_printf(MSG_ERROR,\"do save config error!\\n\");\n        return -1;\n    }\n\n    return 0;\n}\n\nint wpa_conf_remove_maxnetid_network()\n{\n    int ret = -1, len = 0;\n    char cmd[CMD_LEN+1] = {0};\n    char reply[REPLY_BUF_SIZE] = {0};\n    char net_id[NET_ID_LEN+1] = {0};\n    char *p_n = NULL, *p_t = NULL;\n\n    /* list ap in wpa_supplicant.conf */\n    strncpy(cmd, \"LIST_NETWORKS\", CMD_LEN);\n    cmd[CMD_LEN] = '\\0';\n    ret = wifi_command(cmd, reply, sizeof(reply));\n    if(ret){\n        wmg_printf(MSG_ERROR,\"do list networks error!\\n\");\n        return -1;\n    }\n\n    p_n = strchr(reply, '\\n');\n    while(p_n != NULL){\n\tp_n++;\n        if((p_t = strchr(p_n, '\\t')) != NULL){\n     ",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\tg5040\\wifimanager\\src\\core\\wpa_supplicant_conf.c",
        "start": 516,
        "end": 543,
        "startLoc": {
          "line": 516,
          "column": 33,
          "position": 4185
        },
        "endLoc": {
          "line": 543,
          "column": 4,
          "position": 4458
        }
      },
      "secondFile": {
        "name": "workspace\\tg5040\\wifimanager\\src\\core\\wpa_supplicant_conf.c",
        "start": 416,
        "end": 253,
        "startLoc": {
          "line": 416,
          "column": 29,
          "position": 3321
        },
        "endLoc": {
          "line": 253,
          "column": 8,
          "position": 1954
        }
      }
    },
    {
      "format": "c",
      "lines": 8,
      "fragment": "_n = strchr(p_n, '\\n');\n    }\n\n    /* cancel saved in wpa_supplicant.conf */\n    sprintf(cmd, \"REMOVE_NETWORK %s\", net_id);\n    wmg_printf(MSG_DEBUG,\"remove network %s!\\n\", net_id);\n    ret = w",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\tg5040\\wifimanager\\src\\core\\wpa_supplicant_conf.c",
        "start": 548,
        "end": 555,
        "startLoc": {
          "line": 548,
          "column": 23,
          "position": 4497
        },
        "endLoc": {
          "line": 555,
          "column": 18,
          "position": 4554
        }
      },
      "secondFile": {
        "name": "workspace\\tg5040\\wifimanager\\src\\core\\wpa_supplicant_conf.c",
        "start": 495,
        "end": 502,
        "startLoc": {
          "line": 495,
          "column": 20,
          "position": 4036
        },
        "endLoc": {
          "line": 502,
          "column": 4,
          "position": 4093
        }
      }
    },
    {
      "format": "c",
      "lines": 13,
      "fragment": "k %s!\\n\", net_id);\n    ret = wifi_command(cmd, reply, sizeof(reply));\n    if(ret){\n        wmg_printf(MSG_ERROR,\"do remove network %s error!\\n\", net_id);\n        return -1;\n    }\n\n    /* save config */\n      sprintf(cmd, \"%s\", \"SAVE_CON",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\tg5040\\wifimanager\\src\\core\\wpa_supplicant_conf.c",
        "start": 552,
        "end": 564,
        "startLoc": {
          "line": 552,
          "column": 2,
          "position": 4547
        },
        "endLoc": {
          "line": 564,
          "column": 2,
          "position": 4622
        }
      },
      "secondFile": {
        "name": "workspace\\tg5040\\wifimanager\\src\\core\\wpa_supplicant_conf.c",
        "start": 452,
        "end": 464,
        "startLoc": {
          "line": 452,
          "column": 2,
          "position": 3672
        },
        "endLoc": {
          "line": 464,
          "column": 2,
          "position": 3747
        }
      }
    },
    {
      "format": "c",
      "lines": 19,
      "fragment": "       *(ptr++) = *(ftr++);\n            *ptr = '\\0';\n            continue; //restart new search at ptr_s after removing slash\n\t}\n        else\n            ptr_s++; //restart new search at ptr_s++\n    }\n\n    ptr_s = scan.results;\n    while(1)\n    {\n        ptr = strchr(ptr_s,'\\\\');\n\tif(ptr == NULL)\n\t    break;\n\n        ptr_s = ptr;\n        if((*(ptr-1)) == '\\\\')\n\t{\n            ftr = pt",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\tg5040\\wifimanager\\src\\core\\scan.c",
        "start": 53,
        "end": 71,
        "startLoc": {
          "line": 53,
          "column": 5,
          "position": 281
        },
        "endLoc": {
          "line": 71,
          "column": 7,
          "position": 404
        }
      },
      "secondFile": {
        "name": "workspace\\tg5040\\wifimanager\\src\\core\\scan.c",
        "start": 32,
        "end": 50,
        "startLoc": {
          "line": 32,
          "column": 5,
          "position": 130
        },
        "endLoc": {
          "line": 50,
          "column": 6,
          "position": 253
        }
      }
    },
    {
      "format": "c",
      "lines": 11,
      "fragment": " <msettings.h>\n\n#include <sys/types.h>\n#include <sys/stat.h>\n#include <sys/ioctl.h>\n\n// #include \"defines.h\"\n\n#define VOLUME_MIN \t\t0\n#define VOLUME_MA",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\zero28\\keymon\\keymon.c",
        "start": 40,
        "end": 50,
        "startLoc": {
          "line": 40,
          "column": 2,
          "position": 66
        },
        "endLoc": {
          "line": 50,
          "column": 4,
          "position": 149
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\libmsettings\\msettings.c",
        "start": 50,
        "end": 60,
        "startLoc": {
          "line": 50,
          "column": 1,
          "position": 220
        },
        "endLoc": {
          "line": 60,
          "column": 5,
          "position": 303
        }
      }
    },
    {
      "format": "c",
      "lines": 9,
      "fragment": "vid.disp_fd);\n\t\n\tSDL_Quit();\n}\n\nvoid PLAT_clearVideo(SDL_Surface* IGNORED) {\n\tif (!vid.cleared) memset(vid.screen->pixels, 0, vid.pitch * vid.height);\n\tm",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\trimuismart\\platform\\platform.c",
        "start": 295,
        "end": 303,
        "startLoc": {
          "line": 295,
          "column": 2,
          "position": 2613
        },
        "endLoc": {
          "line": 303,
          "column": 7,
          "position": 2669
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 206,
        "end": 214,
        "startLoc": {
          "line": 206,
          "column": 2,
          "position": 1686
        },
        "endLoc": {
          "line": 214,
          "column": 19,
          "position": 1742
        }
      }
    },
    {
      "format": "c",
      "lines": 15,
      "fragment": "vid.buffer_config.info.fb.size[0].height = vid.width;\n\t\tvid.buffer_config.info.fb.crop.width  = (int64_t)vid.height << 32;\n\t\tvid.buffer_config.info.fb.crop.height = (int64_t)vid.width  << 32;\n\t\tuint32_t args[4] = {0, (uintptr_t)&vid.buffer_config, 1, 0};\n\t\tioctl(vid.disp_fd, DISP_LAYER_SET_CONFIG, args);\n\t\tvid.re",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\trimuismart\\platform\\platform.c",
        "start": 411,
        "end": 425,
        "startLoc": {
          "line": 411,
          "column": 2,
          "position": 3781
        },
        "endLoc": {
          "line": 425,
          "column": 7,
          "position": 3865
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 473,
        "end": 485,
        "startLoc": {
          "line": 473,
          "column": 2,
          "position": 4368
        },
        "endLoc": {
          "line": 485,
          "column": 4,
          "position": 4450
        }
      }
    },
    {
      "format": "c",
      "lines": 11,
      "fragment": "\n\tmunmap(adc.mem_map, adc.page_size*2);\n\tclose(adc.mem_fd);\n}\n\n///////////////////////////////\n\n#define USB_SPEED \"/sys/devices/platf",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\trimuismart\\platform\\platform.c",
        "start": 493,
        "end": 503,
        "startLoc": {
          "line": 493,
          "column": 10,
          "position": 4455
        },
        "endLoc": {
          "line": 503,
          "column": 6,
          "position": 4507
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 531,
        "end": 541,
        "startLoc": {
          "line": 531,
          "column": 33,
          "position": 4800
        },
        "endLoc": {
          "line": 541,
          "column": 7,
          "position": 4852
        }
      }
    },
    {
      "format": "c",
      "lines": 6,
      "fragment": "efaultSettings = {\n\t.version = SETTINGS_VERSION,\n\t.brightness = 3,\n\t.headphones = 4,\n\t.speaker = 8,\n\t.jack = 0,\n};\nstatic Settings* settings;\n\n#define SHM_KEY \"/SharedSettings\"\nstatic char SettingsPath[256];\nstatic int shm_fd = -1;\nstatic ",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\trimuismart\\libmsettings\\msettings.c",
        "start": 44,
        "end": 49,
        "startLoc": {
          "line": 44,
          "column": 1,
          "position": 209
        },
        "endLoc": {
          "line": 49,
          "column": 5,
          "position": 284
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\libmsettings\\msettings.c",
        "start": 60,
        "end": 65,
        "startLoc": {
          "line": 60,
          "column": 1,
          "position": 303
        },
        "endLoc": {
          "line": 65,
          "column": 28,
          "position": 379
        }
      }
    },
    {
      "format": "c",
      "lines": 19,
      "fragment": "KEY, O_RDWR | O_CREAT | O_EXCL, 0644); // see if it exists\n\tif (shm_fd==-1 && errno==EEXIST) { // already exists\n\t\tputs(\"Settings client\");\n\t\tshm_fd = shm_open(SHM_KEY, O_RDWR, 0644);\n\t\tsettings = mmap(NULL, shm_size, PROT_READ | PROT_WRITE, MAP_SHARED, shm_fd, 0);\n\t}\n\telse { // host\n\t\tputs(\"Settings host\"); // keymon\n\t\tis_host = 1;\n\t\t// we created it so set initial size and populate\n\t\tftruncate(shm_fd, shm_size);\n\t\tsettings = mmap(NULL, shm_size, PROT_READ | PROT_WRITE, MAP_SHARE",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\trimuismart\\libmsettings\\msettings.c",
        "start": 55,
        "end": 73,
        "startLoc": {
          "line": 55,
          "column": 3,
          "position": 357
        },
        "endLoc": {
          "line": 73,
          "column": 2,
          "position": 494
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\libmsettings\\msettings.c",
        "start": 71,
        "end": 89,
        "startLoc": {
          "line": 71,
          "column": 3,
          "position": 442
        },
        "endLoc": {
          "line": 89,
          "column": 23,
          "position": 581
        }
      }
    },
    {
      "format": "c",
      "lines": 17,
      "fragment": "aultSettings, shm_size);\n\t\t}\n\n\t\t// these shouldn't be persisted\n\t\t// settings->jack = 0;\n\t}\n\tprintf(\"brightness: %i\\nspeaker: %i \\n\", settings->brightness, settings->speaker);\n\t\n\tdisp_fd = open(\"/dev/disp\", O_RDWR);\n\t\n\tSetVolume(GetVolume());\n\tSetBrightness(GetBrightness());\n}\nvoid QuitSettings(void) {\n\tclose(disp_fd);\n\tmunmap(settings, shm",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\trimuismart\\libmsettings\\msettings.c",
        "start": 83,
        "end": 99,
        "startLoc": {
          "line": 83,
          "column": 2,
          "position": 568
        },
        "endLoc": {
          "line": 99,
          "column": 9,
          "position": 702
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\libmsettings\\msettings.c",
        "start": 103,
        "end": 120,
        "startLoc": {
          "line": 103,
          "column": 2,
          "position": 663
        },
        "endLoc": {
          "line": 120,
          "column": 4,
          "position": 799
        }
      }
    },
    {
      "format": "c",
      "lines": 11,
      "fragment": "D\t0\n#define PRESSED\t\t1\n\n#define INPUT_COUNT 2\nstatic int\tinput_fd = 0;\nstatic struct input_event ev;\n\nint main (int argc, char *argv[]) {\n\tInitSettings();\n\t\n\tinput_fd = open(\"/dev/input/event0\", O",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\trimuismart\\keymon\\keymon.c",
        "start": 33,
        "end": 43,
        "startLoc": {
          "line": 33,
          "column": 2,
          "position": 121
        },
        "endLoc": {
          "line": 43,
          "column": 9,
          "position": 193
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\keymon\\keymon.c",
        "start": 61,
        "end": 71,
        "startLoc": {
          "line": 61,
          "column": 2,
          "position": 272
        },
        "endLoc": {
          "line": 71,
          "column": 8,
          "position": 344
        }
      }
    },
    {
      "format": "c",
      "lines": 10,
      "fragment": " = down_just_pressed = val;\n\t\t\t\t\tif (val) down_repeat_at = now + 300;\n\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (up_just_pressed || (up_pressed && now>=up_repeat_at)) {\n\t\t\tif (start_pressed) {\n\t\t\t\tval = GetBrightness();\n\t\t\t\tif (v",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\trimuismart\\keymon\\keymon.c",
        "start": 80,
        "end": 89,
        "startLoc": {
          "line": 80,
          "column": 5,
          "position": 523
        },
        "endLoc": {
          "line": 89,
          "column": 14,
          "position": 608
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\keymon\\keymon.c",
        "start": 134,
        "end": 143,
        "startLoc": {
          "line": 134,
          "column": 5,
          "position": 962
        },
        "endLoc": {
          "line": 143,
          "column": 13,
          "position": 1047
        }
      }
    },
    {
      "format": "c",
      "lines": 9,
      "fragment": "X) SetVolume(++val);\n\t\t\t}\n\t\t\t\n\t\t\tif (up_just_pressed) up_just_pressed = 0;\n\t\t\telse up_repeat_at += 100;\n\t\t}\n\t\t\n\t\tif (down_just_pressed || (down_pressed && now>=down_",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\trimuismart\\keymon\\keymon.c",
        "start": 94,
        "end": 102,
        "startLoc": {
          "line": 94,
          "column": 5,
          "position": 654
        },
        "endLoc": {
          "line": 102,
          "column": 7,
          "position": 715
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\keymon\\keymon.c",
        "start": 150,
        "end": 158,
        "startLoc": {
          "line": 150,
          "column": 5,
          "position": 1113
        },
        "endLoc": {
          "line": 158,
          "column": 5,
          "position": 1174
        }
      }
    },
    {
      "format": "c",
      "lines": 16,
      "fragment": " <SDL2/SDL.h>\n#include <SDL2/SDL_image.h>\n\nSDL_Window* window;\nSDL_Surface* screen;\n\nint main(int argc , char* argv[]) {\n\tif (argc<2) {\n\t\tputs(\"Usage: show.elf image.png delay\");\n\t\treturn 0;\n\t}\n\t\n\tchar path[256];\n\tstrncpy(path,argv[1],256);\n\tif (access(path, F_OK)!=0) return 0; // nothing to show :(\n\t\n\tint delay = argc>2",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rgb30\\show\\show.c",
        "start": 10,
        "end": 25,
        "startLoc": {
          "line": 10,
          "column": 1,
          "position": 20
        },
        "endLoc": {
          "line": 25,
          "column": 4,
          "position": 167
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\show\\show.c",
        "start": 15,
        "end": 30,
        "startLoc": {
          "line": 15,
          "column": 1,
          "position": 15
        },
        "endLoc": {
          "line": 30,
          "column": 12,
          "position": 162
        }
      }
    },
    {
      "format": "c",
      "lines": 7,
      "fragment": "UNDEFINED, w,h, SDL_WINDOW_SHOWN);\n\tputs(\"\");\n\t\n\tscreen = SDL_GetWindowSurface(window); \n\tSDL_FillRect(screen, NULL, 0);\n\t \n\tSDL_Surface* img = IMG_Load(path); \n\tSDL_BlitSurface(img, NULL, screen",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rgb30\\show\\show.c",
        "start": 30,
        "end": 36,
        "startLoc": {
          "line": 30,
          "column": 7,
          "position": 222
        },
        "endLoc": {
          "line": 36,
          "column": 24,
          "position": 303
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\show\\show.c",
        "start": 44,
        "end": 48,
        "startLoc": {
          "line": 44,
          "column": 6,
          "position": 355
        },
        "endLoc": {
          "line": 48,
          "column": 16,
          "position": 430
        }
      }
    },
    {
      "format": "c",
      "lines": 6,
      "fragment": "REPEAT_DELAY); }\n\t\t\t\telse if (code==RAW_LSY) { pad.laxis.y = (value * 32767) / 1800; PAD_setAnalog(BTN_ID_ANALOG_UP,   BTN_ID_ANALOG_DOWN,  pad.laxis.y, tick+PAD_REPEAT_DELAY); }\n\t\t\t\t/",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 167,
        "end": 172,
        "startLoc": {
          "line": 167,
          "column": 2,
          "position": 1683
        },
        "endLoc": {
          "line": 172,
          "column": 3,
          "position": 1765
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 94,
        "end": 99,
        "startLoc": {
          "line": 94,
          "column": 2,
          "position": 424
        },
        "endLoc": {
          "line": 99,
          "column": 3,
          "position": 506
        }
      }
    },
    {
      "format": "c",
      "lines": 22,
      "fragment": "0;\n\t\t\t\telse if (code==RAW_RSY) pad.raxis.x = (value * 32767) / 1800;\n\t\t\t\t\n\t\t\t\tbtn = BTN_NONE; // already handled, force continue\n\t\t\t}\n\t\t\t\n\t\t\tif (btn==BTN_NONE) continue;\n\t\t\n\t\t\tif (!pressed) {\n\t\t\t\tpad.is_pressed\t\t&= ~btn; // unset\n\t\t\t\tpad.just_repeated\t&= ~btn; // unset\n\t\t\t\tpad.just_released\t|= btn; // set\n\t\t\t}\n\t\t\telse if ((pad.is_pressed & btn)==BTN_NONE) {\n\t\t\t\tpad.",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 182,
        "end": 203,
        "startLoc": {
          "line": 182,
          "column": 1,
          "position": 1811
        },
        "endLoc": {
          "line": 203,
          "column": 12,
          "position": 1933
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 35,
        "end": 55,
        "startLoc": {
          "line": 35,
          "column": 1,
          "position": 90
        },
        "endLoc": {
          "line": 55,
          "column": 7,
          "position": 211
        }
      }
    },
    {
      "format": "c",
      "lines": 17,
      "fragment": "_RendererInfo info;\n\t// SDL_GetRendererInfo(vid.renderer, &info);\n\t// LOG_info(\"Current render driver: %s\\n\", info.name);\n\t\n\tSDL_SetHint(SDL_HINT_RENDER_SCALE_QUALITY,\"1\"); // linear\n\tvid.texture = SDL_CreateTexture(vid.renderer,SDL_PIXELFORMAT_RGB565, SDL_TEXTUREACCESS_STREAMING, w,h);\n\tvid.target\t= NULL; // only needed for non-native sizes\n\t\n\t// TODO: doesn't work here\n\t// ",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 302,
        "end": 318,
        "startLoc": {
          "line": 302,
          "column": 2,
          "position": 2342
        },
        "endLoc": {
          "line": 318,
          "column": 13,
          "position": 2485
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 114,
        "end": 130,
        "startLoc": {
          "line": 114,
          "column": 2,
          "position": 830
        },
        "endLoc": {
          "line": 130,
          "column": 4,
          "position": 973
        }
      }
    },
    {
      "format": "c",
      "lines": 9,
      "fragment": "/ SDL_GetTextureScaleMode(vid.texture, &scale_mode);\n\t// LOG_info(\"texture scale mode: %i\\n\", scale_mode);\n\t\n\t// int format;\n\t// int access_;\n\t// SDL_QueryTexture(vid.texture, &format, &access_, NULL,NULL);\n\t// LOG_info(\"texture format: %s (streaming: %i)\\n\", SDL_GetPixelFormatName(format), access_==SDL_TEXTURE",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 328,
        "end": 336,
        "startLoc": {
          "line": 328,
          "column": 2,
          "position": 2559
        },
        "endLoc": {
          "line": 336,
          "column": 51,
          "position": 2640
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 146,
        "end": 154,
        "startLoc": {
          "line": 146,
          "column": 2,
          "position": 1123
        },
        "endLoc": {
          "line": 154,
          "column": 9,
          "position": 1203
        }
      }
    },
    {
      "format": "c",
      "lines": 13,
      "fragment": "AMING);\n\t\n\tvid.buffer\t= SDL_CreateRGBSurfaceFrom(NULL, w,h, FIXED_DEPTH, p, RGBA_MASK_565);\n\tvid.screen\t= SDL_CreateRGBSurface(SDL_SWSURFACE, w,h, FIXED_DEPTH, RGBA_MASK_565);\n\tvid.width\t= w;\n\tvid.height\t= h;\n\tvid.pitch\t= p;\n\t\n\tdevice_width\t= w;\n\td",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 337,
        "end": 349,
        "startLoc": {
          "line": 337,
          "column": 2,
          "position": 2645
        },
        "endLoc": {
          "line": 349,
          "column": 7,
          "position": 2724
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 155,
        "end": 168,
        "startLoc": {
          "line": 155,
          "column": 39,
          "position": 1212
        },
        "endLoc": {
          "line": 168,
          "column": 2,
          "position": 1292
        }
      }
    },
    {
      "format": "c",
      "lines": 8,
      "fragment": "vice_height\t= h;\n\tdevice_pitch\t= p;\n\t\n\tvid.sharpness = SHARPNESS_SOFT;\n\t\n\treturn vid.screen;\n}\n\nstatic void clearVideo(void) {\n\tSDL_FillRect(vid.screen, NULL, 0);\n\tfor (int i=0; i<3; i++) {\n\t\tSDL_RenderClear(vid.renderer);\n\t\tSDL_RenderPresent(vid.renderer);\n\t}\n}\n\nvoid P",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 350,
        "end": 357,
        "startLoc": {
          "line": 350,
          "column": 1,
          "position": 2726
        },
        "endLoc": {
          "line": 357,
          "column": 85,
          "position": 2799
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 168,
        "end": 175,
        "startLoc": {
          "line": 168,
          "column": 1,
          "position": 1292
        },
        "endLoc": {
          "line": 175,
          "column": 100,
          "position": 1365
        }
      }
    },
    {
      "format": "c",
      "lines": 39,
      "fragment": "arget);\n\tif (vid.effect) SDL_DestroyTexture(vid.effect);\n\tSDL_DestroyTexture(vid.texture);\n\tSDL_DestroyRenderer(vid.renderer);\n\tSDL_DestroyWindow(vid.window);\n\t\n\t// system(\"cat /dev/zero > /dev/fb0 2>/dev/null\");\n\tSDL_Quit();\n}\n\nvoid PLAT_clearVideo(SDL_Surface* screen) {\n\tSDL_FillRect(screen, NULL, 0); // TODO: revisit\n}\nvoid PLAT_clearAll(void) {\n\tPLAT_clearVideo(vid.screen); // TODO: revist\n\tSDL_RenderClear(vid.renderer);\n}\n\nvoid PLAT_setVsync(int vsync) {\n\t// buh\n}\n\nstatic int hard_scale = 4; // TODO: base src size, eg. 160x144 can be 4\n\nstatic void resizeVideo(int w, int h, int p) {\n\tif (w==vid.width && h==vid.height && p==vid.pitch) return;\n\t\n\t// TODO: minarch disables crisp (and nn upscale before linear downscale) when native\n\t\n\tif (w>=device_width && h>=device_height) hard_scale = 1;\n\telse if (h>=160) hard_scale = 2; // limits gba and up to 2x (seems sufficient)\n\telse hard_scale = 4;\n\n\tLOG_info(\"resizeVideo(%i,%i,%i) hard_scale: %i crisp: %i\\n\",w,h,p, hard_scale,vid.sharpness==SHARPNESS_CRISP);\n\n\tSDL_FreeSurface(vid.buffer);\n\tSDL_DestroyTexture(vid.texture);\n\tif (vid.target) SDL_DestroyTexture(vid.target);\n\t\n\tSDL_SetHintWithPriority(SDL_",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 361,
        "end": 399,
        "startLoc": {
          "line": 361,
          "column": 2,
          "position": 2846
        },
        "endLoc": {
          "line": 399,
          "column": 3,
          "position": 3209
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 179,
        "end": 306,
        "startLoc": {
          "line": 179,
          "column": 2,
          "position": 1395
        },
        "endLoc": {
          "line": 306,
          "column": 7,
          "position": 2685
        }
      }
    },
    {
      "format": "c",
      "lines": 90,
      "fragment": "(vid.target);\n\t\n\tSDL_SetHintWithPriority(SDL_HINT_RENDER_SCALE_QUALITY, vid.sharpness==SHARPNESS_SOFT?\"1\":\"0\", SDL_HINT_OVERRIDE);\n\tvid.texture = SDL_CreateTexture(vid.renderer,SDL_PIXELFORMAT_RGB565, SDL_TEXTUREACCESS_STREAMING, w,h);\n\t\n\tif (vid.sharpness==SHARPNESS_CRISP) {\n\t\tSDL_SetHintWithPriority(SDL_HINT_RENDER_SCALE_QUALITY, \"1\", SDL_HINT_OVERRIDE);\n\t\tvid.target = SDL_CreateTexture(vid.renderer,SDL_PIXELFORMAT_RGB565, SDL_TEXTUREACCESS_TARGET, w * hard_scale,h * hard_scale);\n\t}\n\telse {\n\t\tvid.target = NULL;\n\t}\n\n\tvid.buffer\t= SDL_CreateRGBSurfaceFrom(NULL, w,h, FIXED_DEPTH, p, RGBA_MASK_565);\n\n\tvid.width\t= w;\n\tvid.height\t= h;\n\tvid.pitch\t= p;\n}\n\nSDL_Surface* PLAT_resizeVideo(int w, int h, int p) {\n\tresizeVideo(w,h,p);\n\treturn vid.screen;\n}\n\nvoid PLAT_setVideoScaleClip(int x, int y, int width, int height) {\n\t// buh\n}\nvoid PLAT_setNearestNeighbor(int enabled) {\n\t// buh\n}\nvoid PLAT_setSharpness(int sharpness) {\n\tif (vid.sharpness==sharpness) return;\n\tint p = vid.pitch;\n\tvid.pitch = 0;\n\tvid.sharpness = sharpness;\n\tresizeVideo(vid.width,vid.height,p);\n}\n\nstatic struct FX_Context {\n\tint scale;\n\tint type;\n\tint color;\n\tint next_scale;\n\tint next_type;\n\tint next_color;\n\tint live_type;\n} effect = {\n\t.scale = 1,\n\t.next_scale = 1,\n\t.type = EFFECT_NONE,\n\t.next_type = EFFECT_NONE,\n\t.live_type = EFFECT_NONE,\n\t.color = 0,\n\t.next_color = 0,\n};\nstatic void rgb565_to_rgb888(uint32_t rgb565, uint8_t *r, uint8_t *g, uint8_t *b) {\n    // Extract the red component (5 bits)\n    uint8_t red = (rgb565 >> 11) & 0x1F;\n    // Extract the green component (6 bits)\n    uint8_t green = (rgb565 >> 5) & 0x3F;\n    // Extract the blue component (5 bits)\n    uint8_t blue = rgb565 & 0x1F;\n\n    // Scale the values to 8-bit range\n    *r = (red << 3) | (red >> 2);\n    *g = (green << 2) | (green >> 4);\n    *b = (blue << 3) | (blue >> 2);\n}\nstatic void updateEffect(void) {\n\tif (effect.next_scale==effect.scale && effect.next_type==effect.type && effect.next_color==effect.color) return; // unchanged\n\t\n\tint live_scale = effect.scale;\n\tint live_color = effect.color;\n\teffect.scale = effect.next_scale;\n\teffect.type = effect.next_type;\n\teffect.color = effect.next_color;\n\t\n\tif (effect.type==EFFECT_NONE) return; // disabled\n\tif (effect.type==effect.live_type && effect.scale==live_scale && effect.color==live_color) return; // already loaded\n\t\n\tchar* effect_path;\n\tint opacity = 128; // 1 - 1/2 = 50%\n\tif (effect.type==EFFECT_LINE) {\n\t\tif (effe",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 397,
        "end": 486,
        "startLoc": {
          "line": 397,
          "column": 1,
          "position": 3195
        },
        "endLoc": {
          "line": 486,
          "column": 2,
          "position": 4090
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 215,
        "end": 304,
        "startLoc": {
          "line": 215,
          "column": 1,
          "position": 1744
        },
        "endLoc": {
          "line": 304,
          "column": 46,
          "position": 2639
        }
      }
    },
    {
      "format": "c",
      "lines": 25,
      "fragment": "ect.scale<3) {\n\t\t\teffect_path = RES_PATH \"/line-2.png\";\n\t\t}\n\t\telse if (effect.scale<4) {\n\t\t\teffect_path = RES_PATH \"/line-3.png\";\n\t\t}\n\t\telse if (effect.scale<5) {\n\t\t\teffect_path = RES_PATH \"/line-4.png\";\n\t\t}\n\t\telse if (effect.scale<6) {\n\t\t\teffect_path = RES_PATH \"/line-5.png\";\n\t\t}\n\t\telse if (effect.scale<8) {\n\t\t\teffect_path = RES_PATH \"/line-6.png\";\n\t\t}\n\t\telse {\n\t\t\teffect_path = RES_PATH \"/line-8.png\";\n\t\t}\n\t}\n\telse if (effect.type==EFFECT_GRID) {\n\t\tif (effect.scale<3) {\n\t\t\teffect_path = RES_PATH \"/grid-2.png\";\n\t\t\topacity = 64; // 1 - 3/4 = 25%\n\t\t}\n\t\telse if (effect.scale<4) {\n\t\t\teffect_path = RES_PATH \"/grid-3.png\";\n\t\t\topacity = 112; // 1 ",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 486,
        "end": 510,
        "startLoc": {
          "line": 486,
          "column": 3,
          "position": 4090
        },
        "endLoc": {
          "line": 510,
          "column": 37,
          "position": 4285
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 305,
        "end": 329,
        "startLoc": {
          "line": 305,
          "column": 3,
          "position": 2642
        },
        "endLoc": {
          "line": 329,
          "column": 38,
          "position": 2837
        }
      }
    },
    {
      "format": "c",
      "lines": 12,
      "fragment": "4%\n\t\t}\n\t\telse if (effect.scale<5) {\n\t\t\teffect_path = RES_PATH \"/grid-4.png\";\n\t\t\topacity = 144; // 1 - 7/16 = ~56%\n\t\t}\n\t\telse if (effect.scale<6) {\n\t\t\teffect_path = RES_PATH \"/grid-5.png\";\n\t\t\topacity = 160; // 1 - 9/25 = ~64%\n\t\t}\n\t\telse if (effect.scale<8) {\n\t\t\teffect_path = RES_PATH \"/grid-6.png\";\n\t\t\topacity = 112; // 1 - 5/9 = ~44%\n\t\t}\n\t\telse if (effect.scale<11) {\n\t\t\teffect_path = RES_PATH \"/grid-8.png\";\n",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 512,
        "end": 523,
        "startLoc": {
          "line": 512,
          "column": 5,
          "position": 4290
        },
        "endLoc": {
          "line": 523,
          "column": 2,
          "position": 4486
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 331,
        "end": 343,
        "startLoc": {
          "line": 331,
          "column": 5,
          "position": 2842
        },
        "endLoc": {
          "line": 343,
          "column": 48,
          "position": 3040
        }
      }
    },
    {
      "format": "c",
      "lines": 37,
      "fragment": "\n\t\t\topacity = 144; // 1 - 7/16 = ~56%\n\t\t}\n\t\telse {\n\t\t\teffect_path = RES_PATH \"/grid-11.png\";\n\t\t\topacity = 136; // 1 - 57/121 = ~52%\n\t\t}\n\t}\n\t\n\t// LOG_info(\"effect: %s opacity: %i\\n\", effect_path, opacity);\n\tSDL_Surface* tmp = IMG_Load(effect_path);\n\tif (tmp) {\n\t\tif (effect.type==EFFECT_GRID) {\n\t\t\tif (effect.color) {\n\t\t\t\t// LOG_info(\"dmg color grid...\\n\");\n\t\t\t\n\t\t\t\tuint8_t r,g,b;\n\t\t\t\trgb565_to_rgb888(effect.color,&r,&g,&b);\n\t\t\t\t// LOG_info(\"rgb %i,%i,%i\\n\",r,g,b);\n\t\t\t\t\n\t\t\t\tuint32_t* pixels = (uint32_t*)tmp->pixels;\n\t\t\t\tint width = tmp->w;\n\t\t\t\tint height = tmp->h;\n\t\t\t\tfor (int y = 0; y < height; ++y) {\n\t\t\t\t    for (int x = 0; x < width; ++x) {\n\t\t\t\t        uint32_t pixel = pixels[y * width + x];\n\t\t\t\t        uint8_t _,a;\n\t\t\t\t        SDL_GetRGBA(pixel, tmp->format, &_, &_, &_, &a);\n\t\t\t\t        if (a) pixels[y * width + x] = SDL_MapRGBA(tmp->format, r,g,b, a);\n\t\t\t\t    }\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (vid.effect) SDL_DestroyTexture(vid.effect);\n\t\tvid.effect = SDL_CreateTextureFromSurface(vid.renderer, tmp);\n\t\tSDL_SetTextureAlphaM",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 523,
        "end": 559,
        "startLoc": {
          "line": 523,
          "column": 4,
          "position": 4486
        },
        "endLoc": {
          "line": 559,
          "column": 15,
          "position": 4799
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 344,
        "end": 381,
        "startLoc": {
          "line": 344,
          "column": 4,
          "position": 3043
        },
        "endLoc": {
          "line": 381,
          "column": 3,
          "position": 3356
        }
      }
    },
    {
      "format": "c",
      "lines": 59,
      "fragment": "tTextureAlphaMod(vid.effect, opacity);\n\t\tSDL_FreeSurface(tmp);\n\t\teffect.live_type = effect.type;\n\t}\n\t}\nvoid PLAT_setEffect(int next_type) {\n\teffect.next_type = next_type;\n}\nvoid PLAT_setEffectColor(int next_color) {\n\teffect.next_color = next_color;\n}\nvoid PLAT_vsync(int remaining) {\n\tif (remaining>0) SDL_Delay(remaining);\n}\n\nscaler_t PLAT_getScaler(GFX_Renderer* renderer) {\n\t// LOG_info(\"getScaler for scale: %i\\n\", renderer->scale);\n\teffect.next_scale = renderer->scale;\n\treturn scale1x1_c16;\n}\n\nvoid PLAT_blitRenderer(GFX_Renderer* renderer) {\n\tvid.blit = renderer;\n\tSDL_RenderClear(vid.renderer);\n\tresizeVideo(vid.blit->true_w,vid.blit->true_h,vid.blit->src_p);\n}\n\nvoid PLAT_flip(SDL_Surface* IGNORED, int ignored) {\n\tif (!vid.blit) {\n\t\tresizeVideo(device_width,device_height,FIXED_PITCH); // !!!???\n\t\tSDL_UpdateTexture(vid.texture,NULL,vid.screen->pixels,vid.screen->pitch);\n\t\tSDL_RenderCopy(vid.renderer, vid.texture, NULL,NULL);\n\t\tSDL_RenderPresent(vid.renderer);\n\t\treturn;\n\t}\n\t\n\t// uint32_t then = SDL_GetTicks();\n\tSDL_UpdateTexture(vid.texture,NULL,vid.blit->src,vid.blit->src_p);\n\t// LOG_info(\"blit blocked for %ims (%i,%i)\\n\", SDL_GetTicks()-then,vid.buffer->w,vid.buffer->h);\n\t\n\tSDL_Texture* target = vid.texture;\n\tint x = vid.blit->src_x;\n\tint y = vid.blit->src_y;\n\tint w = vid.blit->src_w;\n\tint h = vid.blit->src_h;\n\tif (vid.sharpness==SHARPNESS_CRISP) {\n\t\tSDL_SetRenderTarget(vid.renderer,vid.target);\n\t\tSDL_RenderCopy(vid.renderer, vid.texture, NULL,NULL);\n\t\tSDL_SetRenderTarget(vid.renderer,NULL);\n\t\tx *= hard_scale;\n\t\ty *= hard_scale;\n\t\tw *= hard_scale;\n\t\th *= hard_scale;\n\t\ttarget = vid.target;\n\t}\n\t\n\tSDL_Rect* src_rect = &(SDL_Rect){x,y,w,h};\n\tSDL_Rect* dst_rect = &(SDL_Rect){0,0,device_width,device_hei",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 559,
        "end": 617,
        "startLoc": {
          "line": 559,
          "column": 3,
          "position": 4799
        },
        "endLoc": {
          "line": 617,
          "column": 15,
          "position": 5429
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 382,
        "end": 440,
        "startLoc": {
          "line": 382,
          "column": 2,
          "position": 3409
        },
        "endLoc": {
          "line": 440,
          "column": 61,
          "position": 4039
        }
      }
    },
    {
      "format": "c",
      "lines": 10,
      "fragment": "ct->w,src_rect->h);\n\n\t\tint w = vid.blit->src_w * vid.blit->scale;\n\t\tint h = vid.blit->src_h * vid.blit->scale;\n\t\tint x = (device_width - w) / 2;\n\t\tint y = (device_height - h) / 2;\n\t\tdst_rect->x = x;\n\t\tdst_rect->y = y;\n\t\tdst_rect->w = w;\n\t\tdst_rect->h = h;\n\t\t\n\t\t// LOG",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 621,
        "end": 630,
        "startLoc": {
          "line": 621,
          "column": 3,
          "position": 5480
        },
        "endLoc": {
          "line": 630,
          "column": 4,
          "position": 5547
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 451,
        "end": 459,
        "startLoc": {
          "line": 451,
          "column": 2,
          "position": 4255
        },
        "endLoc": {
          "line": 459,
          "column": 32,
          "position": 4321
        }
      }
    },
    {
      "format": "c",
      "lines": 48,
      "fragment": "->x,dst_rect->y,dst_rect->w,dst_rect->h);\n\t}\n\telse if (vid.blit->aspect>0) { // aspect\n\t\tint h = device_height;\n\t\tint w = h * vid.blit->aspect;\n\t\tif (w>device_width) {\n\t\t\tdouble ratio = 1 / vid.blit->aspect;\n\t\t\tw = device_width;\n\t\t\th = w * ratio;\n\t\t}\n\t\tint x = (device_width - w) / 2;\n\t\tint y = (device_height - h) / 2;\n\t\t// dst_rect = &(SDL_Rect){x,y,w,h};\n\t\tdst_rect->x = x;\n\t\tdst_rect->y = y;\n\t\tdst_rect->w = w;\n\t\tdst_rect->h = h;\n\t}\n\t\n\tSDL_RenderCopy(vid.renderer, target, src_rect, dst_rect);\n\t\n\tupdateEffect();\n\tif (vid.blit && effect.type!=EFFECT_NONE && vid.effect) {\n\t\tSDL_RenderCopy(vid.renderer, vid.effect, &(SDL_Rect){0,0,dst_rect->w,dst_rect->h},dst_rect);\n\t}\n\t\n\t// uint32_t then = SDL_GetTicks();\n\tSDL_RenderPresent(vid.renderer);\n\t// LOG_info(\"SDL_RenderPresent blocked for %ims\\n\", SDL_GetTicks()-then);\n\tvid.blit = NULL;\n}\n\nint PLAT_supportsOverscan(void) { return 1; }\n\n///////////////////////////////\n\n// TODO: \n#define OVERLAY_WIDTH PILL_SIZE // unscaled\n#define OVERLAY_HEIGHT PILL_SIZE // unscaled\n#define OVERLAY_BPP 4\n#define OVERLAY_DEPTH 16\n#define OVERLAY_PITCH (OVERLAY_WID",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 630,
        "end": 677,
        "startLoc": {
          "line": 630,
          "column": 2,
          "position": 5559
        },
        "endLoc": {
          "line": 677,
          "column": 36,
          "position": 5883
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 456,
        "end": 505,
        "startLoc": {
          "line": 456,
          "column": 5,
          "position": 4316
        },
        "endLoc": {
          "line": 505,
          "column": 45,
          "position": 4642
        }
      }
    },
    {
      "format": "c",
      "lines": 7,
      "fragment": "ext {\n\tSDL_Surface* overlay;\n} ovl;\n\nSDL_Surface* PLAT_initOverlay(void) {\n\tovl.overlay = SDL_CreateRGBSurface(SDL_SWSURFACE, SCALE2(OVERLAY_WIDTH,OVERLAY_HEIG",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 682,
        "end": 688,
        "startLoc": {
          "line": 682,
          "column": 2,
          "position": 5907
        },
        "endLoc": {
          "line": 688,
          "column": 7,
          "position": 5956
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 510,
        "end": 517,
        "startLoc": {
          "line": 510,
          "column": 2,
          "position": 4664
        },
        "endLoc": {
          "line": 517,
          "column": 18,
          "position": 4714
        }
      }
    },
    {
      "format": "c",
      "lines": 10,
      "fragment": "(ovl.overlay);\n}\nvoid PLAT_enableOverlay(int enable) {\n\n}\n\n///////////////////////////////\n\nstatic int online = 0;\nvoid PLAT_getBatteryStatus",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 692,
        "end": 701,
        "startLoc": {
          "line": 692,
          "column": 2,
          "position": 5986
        },
        "endLoc": {
          "line": 701,
          "column": 11,
          "position": 6036
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 532,
        "end": 541,
        "startLoc": {
          "line": 532,
          "column": 2,
          "position": 4804
        },
        "endLoc": {
          "line": 541,
          "column": 39,
          "position": 4854
        }
      }
    },
    {
      "format": "c",
      "lines": 10,
      "fragment": "\n\tPLAT_getBatteryStatusFine(is_charging, charge);\n\n\t// worry less about battery and more about the game you're playing\n\t     if (*charge>80) *charge = 100;\n\telse if (*charge>60) *charge =  80;\n\te",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 703,
        "end": 712,
        "startLoc": {
          "line": 703,
          "column": 1,
          "position": 6054
        },
        "endLoc": {
          "line": 712,
          "column": 8,
          "position": 6117
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 547,
        "end": 556,
        "startLoc": {
          "line": 547,
          "column": 2,
          "position": 4892
        },
        "endLoc": {
          "line": 556,
          "column": 7,
          "position": 4955
        }
      }
    },
    {
      "format": "c",
      "lines": 12,
      "fragment": "\n}\n\nvoid PLAT_getBatteryStatusFine(int* is_charging, int* charge)\n{\n\t// *is_charging = 0;\n\t// *charge = PWR_LOW_CHARGE;\n\t// return;\n\t\n\t*is_ch",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 716,
        "end": 727,
        "startLoc": {
          "line": 716,
          "column": 5,
          "position": 6165
        },
        "endLoc": {
          "line": 727,
          "column": 7,
          "position": 6219
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\trimuismart\\platform\\platform.c",
        "start": 521,
        "end": 532,
        "startLoc": {
          "line": 521,
          "column": 4,
          "position": 4653
        },
        "endLoc": {
          "line": 532,
          "column": 5,
          "position": 4707
        }
      }
    },
    {
      "format": "c",
      "lines": 8,
      "fragment": " 2\ntypedef struct Settings {\n\tint version; // future proofing\n\tint brightness;\n\tint headphones;\n\tint speaker;\n\tint unused[2]; // for futur",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rgb30\\libmsettings\\msettings.c",
        "start": 25,
        "end": 32,
        "startLoc": {
          "line": 25,
          "column": 5,
          "position": 76
        },
        "endLoc": {
          "line": 32,
          "column": 5,
          "position": 132
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\libmsettings\\msettings.c",
        "start": 27,
        "end": 34,
        "startLoc": {
          "line": 27,
          "column": 5,
          "position": 78
        },
        "endLoc": {
          "line": 34,
          "column": 5,
          "position": 134
        }
      }
    },
    {
      "format": "c",
      "lines": 16,
      "fragment": "E: doesn't really need to be persisted but still needs to be shared\n\tint jack; \n\tint hdmi; \n} Settings;\nstatic Settings DefaultSettings = {\n\t.version = SETTINGS_VERS",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rgb30\\libmsettings\\msettings.c",
        "start": 33,
        "end": 48,
        "startLoc": {
          "line": 33,
          "column": 2,
          "position": 143
        },
        "endLoc": {
          "line": 48,
          "column": 4,
          "position": 214
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\libmsettings\\msettings.c",
        "start": 35,
        "end": 45,
        "startLoc": {
          "line": 35,
          "column": 2,
          "position": 145
        },
        "endLoc": {
          "line": 45,
          "column": 68,
          "position": 211
        }
      }
    },
    {
      "format": "c",
      "lines": 22,
      "fragment": "ERSION,\n\t.brightness = 2,\n\t.headphones = 4,\n\t.speaker = 8,\n\t.jack = 0,\n\t.hdmi = 0,\n};\nstatic Settings* settings;\n\n#define SHM_KEY \"/SharedSettings\"\nstatic char SettingsPath[256];\nstatic int shm_fd = -1;\nstatic int is_host = 0;\nstatic int shm_size = sizeof(Settings);\n\n#define BACKLIGHT_PATH \"/sys/class/backlight/backlight/bl_power\"\n#define BRIGHTNESS_PATH \"/sys/class/backlight/backlight/brightness\"\n#define JACK_STATE_PATH \"/sys/bus/platform/devices/singleadc-joypad/hp\"\n#define HDMI_STATE_PATH \"/sys/class/extcon/hdmi/cable.0/state\"\n\nint getInt(char* path) {\n\tint i = 0;\n\tFILE *file = fopen(path, \"r\");",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rgb30\\libmsettings\\msettings.c",
        "start": 48,
        "end": 69,
        "startLoc": {
          "line": 48,
          "column": 1,
          "position": 214
        },
        "endLoc": {
          "line": 69,
          "column": 27,
          "position": 444
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\libmsettings\\msettings.c",
        "start": 50,
        "end": 54,
        "startLoc": {
          "line": 50,
          "column": 1,
          "position": 220
        },
        "endLoc": {
          "line": 54,
          "column": 10,
          "position": 354
        }
      }
    },
    {
      "format": "c",
      "lines": 20,
      "fragment": "f (file!=NULL) {\n\t\tfscanf(file, \"%i\", &i);\n\t\tfclose(file);\n\t}\n\treturn i;\n}\n\n\nvoid InitSettings(void) {\t\n\tsprintf(SettingsPath, \"%s/msettings.bin\", getenv(\"USERDATA_PATH\"));\n\t\n\tshm_fd = shm_open(SHM_KEY, O_RDWR | O_CREAT | O_EXCL, 0644); // see if it exists\n\tif (shm_fd==-1 && errno==EEXIST) { // already exists\n\t\tputs(\"Settings client\");\n\t\tshm_fd = shm_open(SHM_KEY, O_RDWR, 0644);\n\t\tsettings = mmap(NULL, shm_size, PROT_READ | PROT_WRITE, MAP_SHARED, shm_fd, 0);\n\t}\n\telse { // host\n\t\tputs(\"Settings host\"); // sho",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rgb30\\libmsettings\\msettings.c",
        "start": 70,
        "end": 89,
        "startLoc": {
          "line": 70,
          "column": 3,
          "position": 447
        },
        "endLoc": {
          "line": 89,
          "column": 2,
          "position": 589
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\libmsettings\\msettings.c",
        "start": 71,
        "end": 90,
        "startLoc": {
          "line": 71,
          "column": 3,
          "position": 442
        },
        "endLoc": {
          "line": 90,
          "column": 9,
          "position": 584
        }
      }
    },
    {
      "format": "c",
      "lines": 19,
      "fragment": "ose(fd);\n\t\t}\n\t\telse {\n\t\t\t// load defaults\n\t\t\tmemcpy(settings, &DefaultSettings, shm_size);\n\t\t}\n\t\t\n\t\t// these shouldn't be persisted\n\t\t// settings->jack = 0;\n\t\t// settings->hdmi = 0;\n\t}\n\t\n\tint jack = getInt(JACK_STATE_PATH);\n\tint hdmi = getInt(HDMI_STATE_PATH);\n\tprintf(\"brightness: %i (hdmi: %i)\\nspeaker: %i (jack: %i)\\n\", settings->brightness, hdmi, settings->spe",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rgb30\\libmsettings\\msettings.c",
        "start": 101,
        "end": 119,
        "startLoc": {
          "line": 101,
          "column": 1,
          "position": 681
        },
        "endLoc": {
          "line": 119,
          "column": 3,
          "position": 827
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\libmsettings\\msettings.c",
        "start": 101,
        "end": 120,
        "startLoc": {
          "line": 101,
          "column": 1,
          "position": 651
        },
        "endLoc": {
          "line": 120,
          "column": 4,
          "position": 799
        }
      }
    },
    {
      "format": "c",
      "lines": 9,
      "fragment": "(fd);\n\t\tsync();\n\t}\n}\n\nint GetBrightness(void) { // 0-10\n\treturn settings->brightness;\n}\nvoid SetBrightness(int value) {\n\tif (settings->hdmi) retur",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rgb30\\libmsettings\\msettings.c",
        "start": 134,
        "end": 142,
        "startLoc": {
          "line": 134,
          "column": 3,
          "position": 1019
        },
        "endLoc": {
          "line": 142,
          "column": 7,
          "position": 1075
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\libmsettings\\msettings.c",
        "start": 133,
        "end": 141,
        "startLoc": {
          "line": 133,
          "column": 3,
          "position": 997
        },
        "endLoc": {
          "line": 141,
          "column": 3,
          "position": 1055
        }
      }
    },
    {
      "format": "c",
      "lines": 9,
      "fragment": "\nvoid SetBrightness(int value) {\n\tif (settings->hdmi) return;\n\t\n\tint raw;\n\tswitch (value) {\n\t\t// TODO: redo, range is 0-255\n\t\tcase 0: raw=4; break; \t\t//  0\n\t\tcase 1: ra",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rgb30\\libmsettings\\msettings.c",
        "start": 137,
        "end": 145,
        "startLoc": {
          "line": 137,
          "column": 6,
          "position": 1052
        },
        "endLoc": {
          "line": 145,
          "column": 5,
          "position": 1113
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\trimuismart\\libmsettings\\msettings.c",
        "start": 116,
        "end": 124,
        "startLoc": {
          "line": 116,
          "column": 2,
          "position": 913
        },
        "endLoc": {
          "line": 124,
          "column": 5,
          "position": 974
        }
      }
    },
    {
      "format": "c",
      "lines": 15,
      "fragment": "ude <msettings.h>\n\n//\tfor ev.value\n#define RELEASED\t0\n#define PRESSED\t\t1\n#define REPEAT\t\t2\n\n// L3 or R3\n#define CODE_MENU 317 // 11 in SDL for some reason...\n",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rgb30\\keymon\\keymon.c",
        "start": 34,
        "end": 48,
        "startLoc": {
          "line": 34,
          "column": 9,
          "position": 59
        },
        "endLoc": {
          "line": 48,
          "column": 7,
          "position": 147
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\libmsettings\\msettings.c",
        "start": 41,
        "end": 60,
        "startLoc": {
          "line": 41,
          "column": 2,
          "position": 206
        },
        "endLoc": {
          "line": 60,
          "column": 5,
          "position": 303
        }
      }
    },
    {
      "format": "c",
      "lines": 32,
      "fragment": " {\n\t\t\thad_headphones = has_headphones;\n\t\t\tSetJack(has_headphones);\n\t\t}\n\t\t\n\t\thas_hdmi = getInt(HDMI_STATE_PATH);\n\t\tif (had_hdmi!=has_hdmi) {\n\t\t\thad_hdmi = has_hdmi;\n\t\t\tSetHDMI(has_hdmi);\n\t\t}\n\t}\n\t\n\treturn 0;\n}\n\n\nint main (int argc, char *argv[]) {\n\tprintf(\"keymon\\n\"); fflush(stdout);\n\tInitSettings();\n\tpthread_create(&ports_pt, NULL, &watchPorts, NULL);\n\t\n\tchar path[32];\n\tfor (int i=0; i<INPUT_COUNT-1; i++) {\n\t\tsprintf(path, \"/dev/input/event%i\", i);\n\t\tinputs[i] = open(path, O_RDONLY | O_NONBLOCK | O_CLOEXEC);\n\t}\n\tinputs[5] = open(\"/dev/input/js0\", O_RDONLY | O_NONBLOCK | O_CLOEXEC);\n\t\n\tuint32_t input;\n\tuint32_t val;\n\tuint32_t menu_pressed = 0;\n\t\n\tuint32_t up_pressed = 0;\n\tuint32_t up_just_pressed = 0;\n\tuint32_t up_repeat_at = 0;\n\t\n\tuint32_t down_pressed = 0",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rgb30\\keymon\\keymon.c",
        "start": 89,
        "end": 120,
        "startLoc": {
          "line": 89,
          "column": 2,
          "position": 501
        },
        "endLoc": {
          "line": 120,
          "column": 2,
          "position": 812
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\keymon\\keymon.c",
        "start": 59,
        "end": 90,
        "startLoc": {
          "line": 59,
          "column": 2,
          "position": 256
        },
        "endLoc": {
          "line": 90,
          "column": 3,
          "position": 567
        }
      }
    },
    {
      "format": "c",
      "lines": 27,
      "fragment": "/ essential SDL_GetTicks()\n\tignore = 0;\n\t\n\twhile (1) {\n\t\tgettimeofday(&tod, NULL);\n\t\tnow = tod.tv_sec * 1000 + tod.tv_usec / 1000;\n\t\tif (now-then>1000) ignore = 1; // ignore input that arrived during sleep\n\t\t\n\t\tfor (int i=0; i<INPUT_COUNT; i++) {\n\t\t\tinput = inputs[i];\n\t\t\twhile(read(input, &ev, sizeof(ev))==sizeof(ev)) {\n\t\t\t\tif (ignore) continue;\n\t\t\t\tval = ev.value;\n\t\t\t\tif (( ev.type != EV_KEY ) || ( val > REPEAT )) continue;\n\t\t\t\t// printf(\"value: %i code: %i\\n\", val, ev.code); fflush(stdout);\n\t\t\t\tswitch (ev.code) {\n\t\t\t\t\tcase CODE_MENU:\n\t\t\t\t\tcase COD",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rgb30\\keymon\\keymon.c",
        "start": 125,
        "end": 151,
        "startLoc": {
          "line": 125,
          "column": 4,
          "position": 872
        },
        "endLoc": {
          "line": 151,
          "column": 4,
          "position": 1070
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\keymon\\keymon.c",
        "start": 102,
        "end": 128,
        "startLoc": {
          "line": 102,
          "column": 6,
          "position": 704
        },
        "endLoc": {
          "line": 128,
          "column": 7,
          "position": 902
        }
      }
    },
    {
      "format": "c",
      "lines": 12,
      "fragment": "ssed = up_just_pressed = val;\n\t\t\t\t\t\tif (val) up_repeat_at = now + 300;\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase CODE_MINUS:\n\t\t\t\t\t\tdown_pressed = down_just_pressed = val;\n\t\t\t\t\t\tif (val) down_repeat_at = now + 300;\n\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif ",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rgb30\\keymon\\keymon.c",
        "start": 154,
        "end": 165,
        "startLoc": {
          "line": 154,
          "column": 2,
          "position": 1101
        },
        "endLoc": {
          "line": 165,
          "column": 4,
          "position": 1195
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\trimuismart\\keymon\\keymon.c",
        "start": 79,
        "end": 144,
        "startLoc": {
          "line": 79,
          "column": 2,
          "position": 520
        },
        "endLoc": {
          "line": 144,
          "column": 7,
          "position": 1053
        }
      }
    },
    {
      "format": "c",
      "lines": 15,
      "fragment": "d = down_just_pressed = 0;\n\t\t\tup_repeat_at = 0;\n\t\t\tdown_repeat_at = 0;\n\t\t}\n\t\t\n\t\tif (up_just_pressed || (up_pressed && now>=up_repeat_at)) {\n\t\t\tif (menu_pressed) {\n\t\t\t\tval = GetBrightness();\n\t\t\t\tif (val<BRIGHTNESS_MAX) SetBri",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rgb30\\keymon\\keymon.c",
        "start": 168,
        "end": 182,
        "startLoc": {
          "line": 168,
          "column": 2,
          "position": 1226
        },
        "endLoc": {
          "line": 182,
          "column": 2,
          "position": 1319
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\trimuismart\\keymon\\keymon.c",
        "start": 93,
        "end": 163,
        "startLoc": {
          "line": 93,
          "column": 2,
          "position": 651
        },
        "endLoc": {
          "line": 163,
          "column": 2,
          "position": 1203
        }
      }
    },
    {
      "format": "c",
      "lines": 16,
      "fragment": "stdio.h>\n#include <unistd.h>\n#include <SDL2/SDL.h>\n#include <SDL2/SDL_image.h>\n\n#define FIXED_BPP\t\t2\n#define FIXED_DEPTH\t\t(FIXED_BPP * 8)\n\n#define RGBA_MASK_565\t0xF800, 0x07E0, 0x001F, 0x0000\n\nint main(int argc , char* argv[]) {\n\tif (argc<2) {\n\t\tputs(\"Usage: show.elf image.png delay\");\n\t\treturn 0;\n\t}\n\t\n\tchar path[256];",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\show\\show.c",
        "start": 12,
        "end": 27,
        "startLoc": {
          "line": 12,
          "column": 1,
          "position": 12
        },
        "endLoc": {
          "line": 27,
          "column": 2,
          "position": 159
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\show\\show.c",
        "start": 15,
        "end": 30,
        "startLoc": {
          "line": 15,
          "column": 1,
          "position": 15
        },
        "endLoc": {
          "line": 30,
          "column": 12,
          "position": 162
        }
      }
    },
    {
      "format": "c",
      "lines": 7,
      "fragment": "56);\n\tif (access(path, F_OK)!=0) return 0; // nothing to show :(\n\t\n\tint delay = argc>2 ? atoi(argv[2]) : 2;\n\t\n\tSDL_Init(SDL_INIT_VIDEO);\n\tSDL_ShowCursor(0);\n\t\n\tint w = 0;\n\tint h = 0;\n\tint p = 0;\n\tSDL_Window* window = SDL_CreateWi",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\show\\show.c",
        "start": 29,
        "end": 35,
        "startLoc": {
          "line": 29,
          "column": 2,
          "position": 180
        },
        "endLoc": {
          "line": 35,
          "column": 2,
          "position": 256
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\show\\show.c",
        "start": 32,
        "end": 38,
        "startLoc": {
          "line": 32,
          "column": 12,
          "position": 183
        },
        "endLoc": {
          "line": 38,
          "column": 2,
          "position": 259
        }
      }
    },
    {
      "format": "c",
      "lines": 14,
      "fragment": "EFINED, w,h, SDL_WINDOW_SHOWN);\n\t\n\tint rotate = 0;\n\tSDL_DisplayMode mode;\n\tSDL_GetCurrentDisplayMode(0, &mode);\n\tif (mode.h>mode.w) rotate = 3;\n\tw = mode.w;\n\th = mode.h;\n\tp = mode.w * FIXED_BPP;\n\t\n\tSDL_Renderer* renderer = SDL_CreateRenderer(window,-1,SDL_RENDERER_ACCELERATED|SDL_RENDERER_PRESENTVSYNC);\n\tSDL_Texture* texture = SDL_CreateTexture(renderer,SDL_PIXELFORMAT_RGB565, SDL_TEXTUREACCESS_STREAMING, w,h);\n\tSDL_Surface* screen = SDL_CreateRGBSurfaceFrom(NULL, w,h, FIXED_DEPTH, p, RGBA_MASK_565);\n\t\n\tSDL_LockTexture(texture,NULL,&screen->pixels,&screen->pitch);\n\tSDL_FillRect(screen, NULL, 0);\n\tSDL_Surface* img = IMG_Load(path);\n\tSDL_BlitSurface(i",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\show\\show.c",
        "start": 38,
        "end": 51,
        "startLoc": {
          "line": 38,
          "column": 10,
          "position": 291
        },
        "endLoc": {
          "line": 51,
          "column": 2,
          "position": 495
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\show\\show.c",
        "start": 38,
        "end": 51,
        "startLoc": {
          "line": 38,
          "column": 2,
          "position": 260
        },
        "endLoc": {
          "line": 51,
          "column": 2,
          "position": 464
        }
      }
    },
    {
      "format": "c",
      "lines": 13,
      "fragment": ", NULL, screen, &(SDL_Rect){(screen->w-img->w)/2,(screen->h-img->h)/2});\n\tSDL_FreeSurface(img);\n\tSDL_UnlockTexture(texture);\n\n\tif (rotate) SDL_RenderCopyEx(renderer,texture,NULL,&(SDL_Rect){0,w,w,h},rotate*90,&(SDL_Point){0,0},SDL_FLIP_NONE);\n\telse SDL_RenderCopy(renderer, texture, NULL,NULL",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\show\\show.c",
        "start": 51,
        "end": 63,
        "startLoc": {
          "line": 51,
          "column": 2,
          "position": 498
        },
        "endLoc": {
          "line": 63,
          "column": 2,
          "position": 597
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\show\\show.c",
        "start": 51,
        "end": 63,
        "startLoc": {
          "line": 51,
          "column": 2,
          "position": 467
        },
        "endLoc": {
          "line": 63,
          "column": 2,
          "position": 566
        }
      }
    },
    {
      "format": "c",
      "lines": 34,
      "fragment": "um GamepadType {\n\tkGamepadTypeUnknown,\n\tkGamepadTypeRGP01,\n\tkGamepadTypeXbox,\n} GamepadType;\n\n#define INPUT_COUNT 3\nstatic int inputs[INPUT_COUNT];\n\n#define kPadIndex 2\nstatic GamepadType pad_type = kGamepadTypeUnknown;\n\n#define LID_PATH \"/sys/class/power_supply/axp2202-battery/hallkey\"\nvoid PLAT_initLid(void) {\n\tlid.has_lid = exists(LID_PATH);\n}\nint PLAT_lidChanged(int* state) {\n\tif (lid.has_lid) {\n\t\tint lid_open = getInt(LID_PATH);\n\t\tif (lid_open!=lid.is_open) {\n\t\t\tlid.is_open = lid_open;\n\t\t\tif (state) *state = lid_open;\n\t\t\treturn 1;\n\t\t}\n\t}\n\treturn 0;\n}\n\nstatic void checkForGamepad(void) {\n\tuint32_t now = SDL_GetTicks();\n\tstatic uint32_t last_check = 0;\n\tif",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\platform\\platform.c",
        "start": 167,
        "end": 200,
        "startLoc": {
          "line": 167,
          "column": 2,
          "position": 684
        },
        "endLoc": {
          "line": 200,
          "column": 16,
          "position": 933
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 60,
        "end": 93,
        "startLoc": {
          "line": 60,
          "column": 10,
          "position": 172
        },
        "endLoc": {
          "line": 93,
          "column": 19,
          "position": 421
        }
      }
    },
    {
      "format": "c",
      "lines": 6,
      "fragment": "check==0 || now-last_check>2000) {\n\t\tlast_check = now;\n\t\tint connected = exists(\"/dev/input/event3\");\n\t\tif (inputs[kPadIndex]<0",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\platform\\platform.c",
        "start": 202,
        "end": 207,
        "startLoc": {
          "line": 202,
          "column": 2,
          "position": 941
        },
        "endLoc": {
          "line": 207,
          "column": 3,
          "position": 993
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 93,
        "end": 98,
        "startLoc": {
          "line": 93,
          "column": 2,
          "position": 421
        },
        "endLoc": {
          "line": 98,
          "column": 6,
          "position": 473
        }
      }
    },
    {
      "format": "c",
      "lines": 17,
      "fragment": "\tLOG_info(\"Connecting gamepad: \");\n\t\t\tchar pad_name[256];\n\t\t\tgetFile(\"/sys/class/input/event3/device/name\", pad_name, 256);\n\t\t\tif (containsString(pad_name,\"Anbernic\")) {\n\t\t\t\tLOG_info(\"P01\\n\");\n\t\t\t\tpad_type = kGamepadTypeRGP01;\n\t\t\t}\n\t\t\telse if (containsString(pad_name, \"Microsoft\")) {\n\t\t\t\tLOG_info(\"Xbox\\n\");\n\t\t\t\tpad_type = kGamepadTypeXbox;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tLOG_info(\"Unknown\\n\");\n\t\t\t\tpad_type = kGamepadTypeUnknown;\n\t\t\t}\n\t\t\t\n\t\t\tinputs[kPadIndex] = open(\"/dev/input/event3\", ",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\platform\\platform.c",
        "start": 207,
        "end": 223,
        "startLoc": {
          "line": 207,
          "column": 9,
          "position": 1002
        },
        "endLoc": {
          "line": 223,
          "column": 51,
          "position": 1164
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 97,
        "end": 113,
        "startLoc": {
          "line": 97,
          "column": 2,
          "position": 470
        },
        "endLoc": {
          "line": 113,
          "column": 9,
          "position": 632
        }
      }
    },
    {
      "format": "c",
      "lines": 24,
      "fragment": " BTN_ID_Y; }\n\t\t\t\t\t\telse if (code==RGP01_START)\t\t{ btn = BTN_START; \t\tid = BTN_ID_START; }\n\t\t\t\t\t\telse if (code==RGP01_SELECT)\t{ btn = BTN_SELECT; \tid = BTN_ID_SELECT; }\n\t\t\t\t\t\telse if (code==RGP01_MENU)\t\t{ btn = BTN_MENU; \t\tid = BTN_ID_MENU; }\n\t\t\t\t\t\telse if (code==RGP01_MENU1)\t\t{ btn = BTN_MENU; \t\tid = BTN_ID_MENU; }\n\t\t\t\t\t\telse if (code==RGP01_MENU2)\t\t{ btn = BTN_MENU; \t\tid = BTN_ID_MENU; }\n\t\t\t\t\t\telse if (code==RGP01_L1)\t\t{ btn = BTN_L1; \t\tid = BTN_ID_L1; }\n\t\t\t\t\t\telse if (code==RGP01_L2)\t\t{ btn = BTN_L2; \t\tid = BTN_ID_L2; }\n\t\t\t\t\t\telse if (code==RGP01_L3)\t\t{ btn = BTN_L3; \t\tid = BTN_ID_L3; }\n\t\t\t\t\t\telse if (code==RGP01_R1)\t\t{ btn = BTN_R1; \t\tid = BTN_ID_R1; }\n\t\t\t\t\t\telse if (code==RGP01_R2)\t\t{ btn = BTN_R2; \t\tid = BTN_ID_R2; }\n\t\t\t\t\t\telse if (code==RGP01_R3)\t\t{ btn = BTN_R3; \t\tid = BTN_ID_R3; }\n\t\t\t\t\t}\n\t\t\t\t\telse if (pad_type==kGamepadTypeXbox) {\n\t\t\t\t\t\t\t if (code==XBOX_A)\t\t\t{ btn = BTN_A; \t\t\tid = BTN_ID_A; }\n\t\t\t\t\t\telse if (code==XBOX_B)\t\t\t{ btn = BTN_B; \t\t\tid = BTN_ID_B; }\n\t\t\t\t\t\telse if (code==XBOX_X)\t\t\t{ btn = BTN_X; \t\t\tid = BTN_ID_X; }\n\t\t\t\t\t\telse if (code==XBOX_Y)\t\t\t{ btn = BTN_Y; \t\t\tid = BTN_ID_Y; }\n\t\t\t\t\t\telse if (code==XBOX_START)\t\t{ btn = BTN_START; \t\tid = BTN_ID_START; }\n\t\t\t\t\t\telse if (code==XBOX_SELECT)\t\t{ btn = BTN_SELECT; \tid = BTN_ID_SELECT; }\n\t\t\t\t\t\telse if (code==XBOX_MENU)\t\t{ btn = BTN_MENU; \t\tid = BTN_ID_MENU; }\n\t\t\t\t\t\telse if (code==XBOX_MENU1)\t\t{ btn = BTN_MENU; \t\tid = BTN_ID_MENU; }\n\t\t\t\t\t\telse if (code==XBOX_MENU2)\t\t{ btn = BTN_MENU; \t\tid = BTN_ID_MENU; }\n\t\t\t\t\t\telse if (code==XBOX_L1)\t\t\t{ btn = BTN_L1",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\platform\\platform.c",
        "start": 259,
        "end": 282,
        "startLoc": {
          "line": 259,
          "column": 8,
          "position": 2024
        },
        "endLoc": {
          "line": 282,
          "column": 2,
          "position": 2663
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 114,
        "end": 137,
        "startLoc": {
          "line": 114,
          "column": 7,
          "position": 644
        },
        "endLoc": {
          "line": 137,
          "column": 5,
          "position": 1283
        }
      }
    },
    {
      "format": "c",
      "lines": 6,
      "fragment": "\t\tid = BTN_ID_A; }\n\t\t\t\t\telse if (code==RAW_B)\t\t{ btn = BTN_B; \t\t\tid = BTN_ID_B; }\n\t\t\t\t\telse if (code==RAW_X)\t\t{ btn = BTN_X; \t\t\tid = BTN_ID_X; }\n\t\t\t\t\telse i",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\platform\\platform.c",
        "start": 302,
        "end": 307,
        "startLoc": {
          "line": 302,
          "column": 2,
          "position": 2892
        },
        "endLoc": {
          "line": 307,
          "column": 6,
          "position": 2946
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 151,
        "end": 156,
        "startLoc": {
          "line": 151,
          "column": 8,
          "position": 1536
        },
        "endLoc": {
          "line": 156,
          "column": 2,
          "position": 1590
        }
      }
    },
    {
      "format": "c",
      "lines": 9,
      "fragment": "==RAW_Y)\t\t{ btn = BTN_Y; \t\t\tid = BTN_ID_Y; }\n\t\t\t\t\telse if (code==RAW_START)\t{ btn = BTN_START; \t\tid = BTN_ID_START; }\n\t\t\t\t\telse if (code==RAW_SELECT)\t{ btn = BTN_SELECT; \tid = BTN_ID_SELECT; }\n\t\t\t\t\telse if (code==RAW_MENU)\t{ btn = BTN",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\platform\\platform.c",
        "start": 307,
        "end": 315,
        "startLoc": {
          "line": 307,
          "column": 2,
          "position": 2952
        },
        "endLoc": {
          "line": 315,
          "column": 4,
          "position": 3032
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 156,
        "end": 163,
        "startLoc": {
          "line": 156,
          "column": 2,
          "position": 1590
        },
        "endLoc": {
          "line": 163,
          "column": 2,
          "position": 1668
        }
      }
    },
    {
      "format": "c",
      "lines": 19,
      "fragment": "pad.repeat_at[id]\t= tick + PAD_REPEAT_DELAY;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tbtn = BTN_NONE; // already handled, force continue\n\t\t\t\t}\n\t\t\t\telse if (i==kPadIndex) {\n\t\t\t\t\tif (pad_type==kGamepadTypeRGP01) {\n\t\t\t\t\t\t\t if (code==RGP01_LSX) { pad.laxis.x = ((value-128) * 32767) / 128; PAD_setAnalog(BTN_ID_ANALOG_LEFT, BTN_ID_ANALOG_RIGHT, pad.laxis.x, tick+PAD_REPEAT_DELAY); }\n\t\t\t\t\t\telse if (code==RGP01_LSY) { pad",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\platform\\platform.c",
        "start": 339,
        "end": 357,
        "startLoc": {
          "line": 339,
          "column": 4,
          "position": 3679
        },
        "endLoc": {
          "line": 357,
          "column": 3,
          "position": 3840
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 147,
        "end": 164,
        "startLoc": {
          "line": 147,
          "column": 4,
          "position": 1512
        },
        "endLoc": {
          "line": 164,
          "column": 2,
          "position": 1670
        }
      }
    },
    {
      "format": "c",
      "lines": 6,
      "fragment": "f (code==RGP01_RSY) pad.raxis.y = ((value-128) * 32767) / 128;\n\t\t\t\t\t}\n\t\t\t\t\telse if (pad_type==kGamepadTypeXbox) {\n\t\t\t\t\t\t\t if (code==XBOX_LSX) { pad.laxis.x = value; PAD_setAnalog(BTN_ID_ANALOG_LEFT, BTN_ID_ANALOG_RIGHT, pad.laxis.x, tic",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\platform\\platform.c",
        "start": 364,
        "end": 369,
        "startLoc": {
          "line": 364,
          "column": 2,
          "position": 3918
        },
        "endLoc": {
          "line": 369,
          "column": 2,
          "position": 4020
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 94,
        "end": 172,
        "startLoc": {
          "line": 94,
          "column": 2,
          "position": 424
        },
        "endLoc": {
          "line": 172,
          "column": 7,
          "position": 1785
        }
      }
    },
    {
      "format": "c",
      "lines": 24,
      "fragment": "e if (code==XBOX_L2) { pressed = value>0; btn = BTN_L2; id = BTN_ID_L2; }\n\t\t\t\t\t\telse if (code==XBOX_R2) { pressed = value>0; btn = BTN_R2; id = BTN_ID_R2; }\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t\t if (code==RAW_LSX) { pad.laxis.x = (value * 32767) / 4096; PAD_setAnalog(BTN_ID_ANALOG_LEFT, BTN_ID_ANALOG_RIGHT, pad.laxis.x, tick+PAD_REPEAT_DELAY); }\n\t\t\t\t\telse if (code==RAW_LSY) { pad.laxis.y = (value * 32767) / 4096; PAD_setAnalog(BTN_ID_ANALOG_UP,   BTN_I",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\platform\\platform.c",
        "start": 385,
        "end": 408,
        "startLoc": {
          "line": 385,
          "column": 1,
          "position": 4081
        },
        "endLoc": {
          "line": 408,
          "column": 33,
          "position": 4225
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 35,
        "end": 57,
        "startLoc": {
          "line": 35,
          "column": 1,
          "position": 90
        },
        "endLoc": {
          "line": 57,
          "column": 18,
          "position": 233
        }
      }
    },
    {
      "format": "c",
      "lines": 35,
      "fragment": "W_RSY) pad.raxis.y = (value * 32767) / 4096;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (btn==BTN_NONE) continue;\n\t\t\n\t\t\tif (!pressed) {\n\t\t\t\tpad.is_pressed\t\t&= ~btn; // unset\n\t\t\t\tpad.just_repeated\t&= ~btn; // unset\n\t\t\t\tpad.just_released\t|= btn; // set\n\t\t\t}\n\t\t\telse if ((pad.is_pressed & btn)==BTN_NONE) {\n\t\t\t\tpad.just_pressed\t|= btn; // set\n\t\t\t\tpad.just_repeated\t|= btn; // set\n\t\t\t\tpad.is_pressed\t\t|= btn; // set\n\t\t\t\tpad.repeat_at[id]\t= tick + PAD_REPEAT_DELAY;\n\t\t\t}\n\t\t}\n\t}\n\t\n\tif (lid.has_lid && PLAT_lidChanged(NULL)) pad.just_released |= BTN_SLEEP;\n}\n\nint PLAT_shouldWake(void) {\n\tint lid_open = 1; // assume open by default\n\tif (lid.has_lid && PLAT_lidChanged(&lid_open) && lid_open) return 1;\n\t\n\tint input;\n\tstatic struct input_event event;\n\tfor (int i=0; i<INPUT_COUNT; i++) {\n\t\tinput = inputs[i];\n\t\twhile (read(input, &event, sizeof(event))==sizeof(event)) {\n\t\t\tif (event.type==EV_KEY && event.code==RAW_POWER && event.value==0) {\n\t\t\t\t// ignore input while lid is closed\n\t\t\t\tif (lid.has_lid && !lid.is_open) return 0;  // do it here so we eat the input\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t}\n\t}\n\treturn 0;\n}\n\n///////////////////////////////\n\n// based on rgb30 + tg5040 + m17\n#define HDMI_STATE_PATH \"/sys/class/switch/hdmi/cable.0/state\" // TODO: can detect but doesn't update automatically\n#define BLANK_PATH \"/sys/class/graphics/fb0/blank\"\n\nstatic ",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\platform\\platform.c",
        "start": 412,
        "end": 446,
        "startLoc": {
          "line": 412,
          "column": 6,
          "position": 4270
        },
        "endLoc": {
          "line": 446,
          "column": 54,
          "position": 4370
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 207,
        "end": 241,
        "startLoc": {
          "line": 207,
          "column": 2,
          "position": 1959
        },
        "endLoc": {
          "line": 241,
          "column": 43,
          "position": 2059
        }
      }
    },
    {
      "format": "c",
      "lines": 24,
      "fragment": "ed SDL version %d.%d.%d ...\\n\", compiled.major, compiled.minor, compiled.patch);\n\t// LOG_info(\"Linked SDL version %d.%d.%d.\\n\", linked.major, linked.minor, linked.patch);\n\t//\n\t// int num_displays = SDL_GetNumVideoDisplays();\n\t// LOG_info(\"SDL_GetNumVideoDisplays(): %i\\n\", num_displays);\n\t//\n\t// LOG_info(\"Available video drivers:\\n\");\n\t// for (int i=0; i<SDL_GetNumVideoDrivers(); i++) {\n\t// \tLOG_info(\"- %s\\n\", SDL_GetVideoDriver(i));\n\t// }\n\t// LOG_info(\"Current video driver: %s\\n\", SDL_GetCurrentVideoDriver());\n\t//\n\t// LOG_info(\"Available render drivers:\\n\");\n\t// for (int i=0; i<SDL_GetNumRenderDrivers(); i++) {\n\t// \tSDL_RendererInfo info;\n\t// \tSDL_GetRenderDriverInfo(i,&info);\n\t// \tLOG_info(\"- %s\\n\", info.name);\n\t// }\n\t//\n\t// LOG_info(\"Available display modes:\\n\");\n\t// SDL_DisplayMode mode;\n\t// for (int i=0; i<SDL_GetNumDisplayModes(0); i++) {\n\t// \tSDL_GetDisplayMode(0, i, &mode);\n\t// \tLOG_info(\"- %ix%i (%s)\\n\", mode.w,mode.h, SDL_GetPixelFormatName(mode.format));\n\t// }\n\t// SDL_GetCurrentDisplayMode(0, &mode);\n\t// LOG_info(\"Current display mode: %ix%i (%s)\\n\", mode.w,mode.h, SDL_GetPixelFormatName(mode.format));\n\n\t// SDL_SetHint",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\platform\\platform.c",
        "start": 468,
        "end": 491,
        "startLoc": {
          "line": 468,
          "column": 2,
          "position": 4566
        },
        "endLoc": {
          "line": 491,
          "column": 3,
          "position": 4653
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 258,
        "end": 282,
        "startLoc": {
          "line": 258,
          "column": 2,
          "position": 2159
        },
        "endLoc": {
          "line": 282,
          "column": 26,
          "position": 2248
        }
      }
    },
    {
      "format": "c",
      "lines": 79,
      "fragment": "DL_HINT_RENDER_VSYNC,\"0\"); // ignored\n\n\tint w = FIXED_WIDTH;\n\tint h = FIXED_HEIGHT;\n\tint p = FIXED_PITCH;\n\tif (getInt(HDMI_STATE_PATH)) { // can't use getHDMI() from settings because it hasn't be initialized yet\n\t\tw = HDMI_WIDTH;\n\t\th = HDMI_HEIGHT;\n\t\tp = HDMI_PITCH;\n\t\ton_hdmi = 1;\n\t}\n\t\n\tSDL_InitSubSystem(SDL_INIT_VIDEO);\n\tSDL_ShowCursor(0);\n\t\n\tvid.window   = SDL_CreateWindow(\"\", SDL_WINDOWPOS_UNDEFINED, SDL_WINDOWPOS_UNDEFINED, w,h, SDL_WINDOW_SHOWN);\n\t// LOG_info(\"window size: %ix%i\\n\", w,h);\n\t\n\tSDL_DisplayMode mode;\n\tSDL_GetCurrentDisplayMode(0, &mode);\n\tLOG_info(\"Current display mode: %ix%i (%s)\\n\", mode.w,mode.h, SDL_GetPixelFormatName(mode.format));\n\tif (mode.h>mode.w) rotate = 3; // no longer set on 28xx (because of SDL2 rotation patch?)\n\tvid.renderer = SDL_CreateRenderer(vid.window,-1,SDL_RENDERER_ACCELERATED|SDL_RENDERER_PRESENTVSYNC);\n\t// SDL_RenderSetLogicalSize(vid.renderer, w,h); // TODO: wrong, but without and with the below it's even wrong-er\n\t\n\t// int renderer_width,renderer_height;\n\t// SDL_GetRendererOutputSize(vid.renderer, &renderer_width, &renderer_height);\n\t// LOG_info(\"output size: %ix%i\\n\", renderer_width, renderer_height);\n\t// if (renderer_width!=w) { // I think this can only be hdmi\n\t// \tfloat x_scale = (float)renderer_width / w;\n\t// \tfloat y_scale = (float)renderer_height / h;\n\t// \tSDL_SetWindowSize(vid.window, w / x_scale, h / y_scale);\n\t//\n\t// \tSDL_GetRendererOutputSize(vid.renderer, &renderer_width, &renderer_height);\n\t// \tLOG_info(\"adjusted size: %ix%i\\n\", renderer_width, renderer_height);\n\t// \tx_scale = (float)renderer_width / w;\n\t// \ty_scale = (float)renderer_height / h;\n\t// \tSDL_RenderSetScale(vid.renderer, x_scale,y_scale);\n\t//\n\t// \t// for some reason we need to clear and present\n\t// \t// after setting the window size or we'll miss\n\t// \t// the first frame\n\t// \tSDL_RenderClear(vid.renderer);\n\t// \tSDL_RenderPresent(vid.renderer);\n\t// }\n\t//\n\t// SDL_RendererInfo info;\n\t// SDL_GetRendererInfo(vid.renderer, &info);\n\t// LOG_info(\"Current render driver: %s\\n\", info.name);\n\t\n\tSDL_SetHint(SDL_HINT_RENDER_SCALE_QUALITY,\"1\"); // linear\n\tvid.texture = SDL_CreateTexture(vid.renderer,SDL_PIXELFORMAT_RGB565, SDL_TEXTUREACCESS_STREAMING, w,h);\n\tvid.target\t= NULL; // only needed for non-native sizes\n\t\n\t// TODO: doesn't work here\n\t// SDL_SetTextureScaleMode(vid.texture, SDL_ScaleModeLinear); // we always start at device size so use linear for better upscaling over hdmi\n\t\n\t// SD",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\platform\\platform.c",
        "start": 492,
        "end": 570,
        "startLoc": {
          "line": 492,
          "column": 2,
          "position": 4656
        },
        "endLoc": {
          "line": 570,
          "column": 58,
          "position": 5250
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 282,
        "end": 360,
        "startLoc": {
          "line": 282,
          "column": 2,
          "position": 2248
        },
        "endLoc": {
          "line": 360,
          "column": 46,
          "position": 2843
        }
      }
    },
    {
      "format": "c",
      "lines": 197,
      "fragment": "ScaleMode scale_mode;\n\t// SDL_GetTextureScaleMode(vid.texture, &scale_mode);\n\t// LOG_info(\"texture scale mode: %i\\n\", scale_mode);\n\t\n\t// int format;\n\t// int access_;\n\t// SDL_QueryTexture(vid.texture, &format, &access_, NULL,NULL);\n\t// LOG_info(\"texture format: %s (streaming: %i)\\n\", SDL_GetPixelFormatName(format), access_==SDL_TEXTUREACCESS_STREAMING);\n\t\n\tvid.buffer\t= SDL_CreateRGBSurfaceFrom(NULL, w,h, FIXED_DEPTH, p, RGBA_MASK_565);\n\tvid.screen\t= SDL_CreateRGBSurface(SDL_SWSURFACE, w,h, FIXED_DEPTH, RGBA_MASK_565);\n\tvid.width\t= w;\n\tvid.height\t= h;\n\tvid.pitch\t= p;\n\t\n\tdevice_width\t= w;\n\tdevice_height\t= h;\n\tdevice_pitch\t= p;\n\t\n\tvid.sharpness = SHARPNESS_SOFT;\n\t\n\treturn vid.screen;\n}\n\nstatic void clearVideo(void) {\n\tSDL_FillRect(vid.screen, NULL, 0);\n\tfor (int i=0; i<3; i++) {\n\t\tSDL_RenderClear(vid.renderer);\n\t\tSDL_RenderPresent(vid.renderer);\n\t}\n}\n\nvoid PLAT_quitVideo(void) {\n\t// clearVideo();\n\n\tSDL_FreeSurface(vid.screen);\n\tSDL_FreeSurface(vid.buffer);\n\tif (vid.target) SDL_DestroyTexture(vid.target);\n\tif (vid.effect) SDL_DestroyTexture(vid.effect);\n\tSDL_DestroyTexture(vid.texture);\n\tSDL_DestroyRenderer(vid.renderer);\n\tSDL_DestroyWindow(vid.window);\n\n\t// system(\"cat /dev/zero > /dev/fb0 2>/dev/null\");\n\tSDL_Quit();\n}\n\nvoid PLAT_clearVideo(SDL_Surface* screen) {\n\tSDL_FillRect(screen, NULL, 0); // TODO: revisit\n}\nvoid PLAT_clearAll(void) {\n\tPLAT_clearVideo(vid.screen); // TODO: revist\n\tSDL_RenderClear(vid.renderer);\n}\n\nvoid PLAT_setVsync(int vsync) {\n\t// buh\n}\n\nstatic int hard_scale = 4; // TODO: base src size, eg. 160x144 can be 4\n\nstatic void resizeVideo(int w, int h, int p) {\n\tif (w==vid.width && h==vid.height && p==vid.pitch) return;\n\t\n\t// TODO: minarch disables crisp (and nn upscale before linear downscale) when native\n\t\n\tif (w>=device_width && h>=device_height) hard_scale = 1;\n\telse if (h>=160) hard_scale = 2; // limits gba and up to 2x (seems sufficient for 640x480)\n\telse hard_scale = 4;\n\n\tLOG_info(\"resizeVideo(%i,%i,%i) hard_scale: %i crisp: %i\\n\",w,h,p, hard_scale,vid.sharpness==SHARPNESS_CRISP);\n\n\tSDL_FreeSurface(vid.buffer);\n\tSDL_DestroyTexture(vid.texture);\n\tif (vid.target) SDL_DestroyTexture(vid.target);\n\t\n\tSDL_SetHintWithPriority(SDL_HINT_RENDER_SCALE_QUALITY, vid.sharpness==SHARPNESS_SOFT?\"1\":\"0\", SDL_HINT_OVERRIDE);\n\tvid.texture = SDL_CreateTexture(vid.renderer,SDL_PIXELFORMAT_RGB565, SDL_TEXTUREACCESS_STREAMING, w,h);\n\t\n\tif (vid.sharpness==SHARPNESS_CRISP) {\n\t\tSDL_SetHintWithPriority(SDL_HINT_RENDER_SCALE_QUALITY, \"1\", SDL_HINT_OVERRIDE);\n\t\tvid.target = SDL_CreateTexture(vid.renderer,SDL_PIXELFORMAT_RGB565, SDL_TEXTUREACCESS_TARGET, w * hard_scale,h * hard_scale);\n\t}\n\telse {\n\t\tvid.target = NULL;\n\t}\n\n\tvid.buffer\t= SDL_CreateRGBSurfaceFrom(NULL, w,h, FIXED_DEPTH, p, RGBA_MASK_565);\n\n\tvid.width\t= w;\n\tvid.height\t= h;\n\tvid.pitch\t= p;\n}\n\nSDL_Surface* PLAT_resizeVideo(int w, int h, int p) {\n\tresizeVideo(w,h,p);\n\treturn vid.screen;\n}\n\nvoid PLAT_setVideoScaleClip(int x, int y, int width, int height) {\n\t// buh\n}\nvoid PLAT_setNearestNeighbor(int enabled) {\n\t// buh\n}\nvoid PLAT_setSharpness(int sharpness) {\n\tif (vid.sharpness==sharpness) return;\n\tint p = vid.pitch;\n\tvid.pitch = 0;\n\tvid.sharpness = sharpness;\n\tresizeVideo(vid.width,vid.height,p);\n}\n\nstatic struct FX_Context {\n\tint scale;\n\tint type;\n\tint color;\n\tint next_scale;\n\tint next_type;\n\tint next_color;\n\tint live_type;\n} effect = {\n\t.scale = 1,\n\t.next_scale = 1,\n\t.type = EFFECT_NONE,\n\t.next_type = EFFECT_NONE,\n\t.live_type = EFFECT_NONE,\n\t.color = 0,\n\t.next_color = 0,\n};\nstatic void rgb565_to_rgb888(uint32_t rgb565, uint8_t *r, uint8_t *g, uint8_t *b) {\n    // Extract the red component (5 bits)\n    uint8_t red = (rgb565 >> 11) & 0x1F;\n    // Extract the green component (6 bits)\n    uint8_t green = (rgb565 >> 5) & 0x3F;\n    // Extract the blue component (5 bits)\n    uint8_t blue = rgb565 & 0x1F;\n\n    // Scale the values to 8-bit range\n    *r = (red << 3) | (red >> 2);\n    *g = (green << 2) | (green >> 4);\n    *b = (blue << 3) | (blue >> 2);\n}\nstatic void updateEffect(void) {\n\tif (effect.next_scale==effect.scale && effect.next_type==effect.type && effect.next_color==effect.color) return; // unchanged\n\t\n\tint live_scale = effect.scale;\n\tint live_color = effect.color;\n\teffect.scale = effect.next_scale;\n\teffect.type = effect.next_type;\n\teffect.color = effect.next_color;\n\t\n\tif (effect.type==EFFECT_NONE) return; // disabled\n\tif (effect.type==effect.live_type && effect.scale==live_scale && effect.color==live_color) return; // already loaded\n\t\n\tchar* effect_path;\n\tint opacity = 128; // 1 - 1/2 = 50%\n\tif (effect.type==EFFECT_LINE) {\n\t\tif (effect.scale<3) {\n\t\t\teffect_path = RES_PATH \"/line-2.png\";\n\t\t}\n\t\telse if (effect.scale<4) {\n\t\t\teffect_path = RES_PATH \"/line-3.png\";\n\t\t}\n\t\telse if (effect.scale<5) {\n\t\t\teffect_path = RES_PATH \"/line-4.png\";\n\t\t}\n\t\telse if (effect.scale<6) {\n\t\t\teffect_path = RES_PATH \"/line-5.png\";\n\t\t}\n\t\telse if (effect.scale<8) {\n\t\t\teffect_path = RES_PATH \"/line-6.png\";\n\t\t}\n\t\telse {\n\t\t\teffect_path = RES_PATH \"/line-8.png\";\n\t\t}\n\t}\n\telse if (effect.type==EFFECT_GRID) {\n\t\tif (effect.scale<3) {\n\t\t\teffect_path = RES_PATH \"/grid-2.png\";\n\t\t\topacity = 64; // 1 - 3/4 = 25%\n\t\t}\n\t\telse if (effect.scale<4) {\n\t\t\teffect_path = RES_PATH \"/grid-3.png\";\n\t\t\topacity = 112; // 1 - 5/9 = ~44%\n\t\t}\n\t\telse if (effect.scale<5) {\n\t\t\teffect_path = RES_PATH \"/grid-4.png\";\n\t\t\topacity = 144; // 1 - 7/16 = ~56%\n\t\t}\n\t\telse if (effect.scale<6) {\n\t\t\teffect_path = RES_PATH \"/grid-5.png\";\n\t\t\topacity = 160; // 1 - 9/25 = ~64%\n\t\t}\n\t\telse if (effect.scale<8",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\platform\\platform.c",
        "start": 571,
        "end": 767,
        "startLoc": {
          "line": 571,
          "column": 2,
          "position": 5253
        },
        "endLoc": {
          "line": 767,
          "column": 8,
          "position": 7160
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 179,
        "end": 378,
        "startLoc": {
          "line": 179,
          "column": 2,
          "position": 1395
        },
        "endLoc": {
          "line": 378,
          "column": 3,
          "position": 3308
        }
      }
    },
    {
      "format": "c",
      "lines": 60,
      "fragment": "ity: %i\\n\", effect_path, opacity);\n\tSDL_Surface* tmp = IMG_Load(effect_path);\n\tif (tmp) {\n\t\tif (effect.type==EFFECT_GRID) {\n\t\t\tif (effect.color) {\n\t\t\t\t// LOG_info(\"dmg color grid...\\n\");\n\t\t\t\n\t\t\t\tuint8_t r,g,b;\n\t\t\t\trgb565_to_rgb888(effect.color,&r,&g,&b);\n\t\t\t\t// LOG_info(\"rgb %i,%i,%i\\n\",r,g,b);\n\t\t\t\t\n\t\t\t\tuint32_t* pixels = (uint32_t*)tmp->pixels;\n\t\t\t\tint width = tmp->w;\n\t\t\t\tint height = tmp->h;\n\t\t\t\tfor (int y = 0; y < height; ++y) {\n\t\t\t\t    for (int x = 0; x < width; ++x) {\n\t\t\t\t        uint32_t pixel = pixels[y * width + x];\n\t\t\t\t        uint8_t _,a;\n\t\t\t\t        SDL_GetRGBA(pixel, tmp->format, &_, &_, &_, &a);\n\t\t\t\t        if (a) pixels[y * width + x] = SDL_MapRGBA(tmp->format, r,g,b, a);\n\t\t\t\t    }\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (vid.effect) SDL_DestroyTexture(vid.effect);\n\t\tvid.effect = SDL_CreateTextureFromSurface(vid.renderer, tmp);\n\t\tSDL_SetTextureAlphaMod(vid.effect, opacity);\n\t\tSDL_FreeSurface(tmp);\n\t\teffect.live_type = effect.type;\n\t}\n\t}\nvoid PLAT_setEffect(int next_type) {\n\teffect.next_type = next_type;\n}\nvoid PLAT_setEffectColor(int next_color) {\n\teffect.next_color = next_color;\n}\nvoid PLAT_vsync(int remaining) {\n\tif (remaining>0) SDL_Delay(remaining);\n}\n\nscaler_t PLAT_getScaler(GFX_Renderer* renderer) {\n\t// LOG_info(\"getScaler for scale: %i\\n\", renderer->scale);\n\teffect.next_scale = renderer->scale;\n\treturn scale1x1_c16;\n}\n\nvoid PLAT_blitRenderer(GFX_Renderer* renderer) {\n\tvid.blit = renderer;\n\tSDL_RenderClear(vid.renderer);\n\tresizeVideo(vid.blit->true_w,vid.blit->true_h,vid.blit->src_p);\n}\n\nvoid PLAT_flip(SDL_Surface* IGNORED, int ignored) {\n\t\n\ton_hdmi = GetHDMI(); // use settings instead of getInt(HDMI_STATE_PATH)\n\t\n\tif (!vid.blit) {\n\t\tresizeVideo(device_width,device_height,FIXED_PITCH); // !!!???\n\t\tSDL_UpdateTexture(vid.texture,NULL,vid.screen->pixels,vid.screen-",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\platform\\platform.c",
        "start": 772,
        "end": 831,
        "startLoc": {
          "line": 772,
          "column": 13,
          "position": 7253
        },
        "endLoc": {
          "line": 831,
          "column": 4,
          "position": 7910
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 381,
        "end": 440,
        "startLoc": {
          "line": 381,
          "column": 2,
          "position": 3382
        },
        "endLoc": {
          "line": 440,
          "column": 61,
          "position": 4039
        }
      }
    },
    {
      "format": "c",
      "lines": 6,
      "fragment": "L,&(SDL_Rect){0,device_width,device_width,device_height},rotate*90,&(SDL_Point){0,0},SDL_FLIP_NONE);\n\t\telse SDL_RenderCopy(vid.renderer, vid.texture, NULL,NULL);\n\t\tSDL_RenderPresent(vid.renderer);\n\t\treturn;\n\t}\n\t\n\t// uint32_t then = SDL_GetTicks();\n\tSDL_UpdateTexture(vid.texture,NULL,vid.blit->src,vid.blit->src_p);\n\t// LOG_info(\"blit blocked",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\platform\\platform.c",
        "start": 834,
        "end": 839,
        "startLoc": {
          "line": 834,
          "column": 8,
          "position": 7950
        },
        "endLoc": {
          "line": 839,
          "column": 53,
          "position": 8052
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 444,
        "end": 449,
        "startLoc": {
          "line": 444,
          "column": 7,
          "position": 4077
        },
        "endLoc": {
          "line": 449,
          "column": 97,
          "position": 4179
        }
      }
    },
    {
      "format": "c",
      "lines": 11,
      "fragment": "_h;\n\tif (vid.sharpness==SHARPNESS_CRISP) {\n\t\tSDL_SetRenderTarget(vid.renderer,vid.target);\n\t\tSDL_RenderCopy(vid.renderer, vid.texture, NULL,NULL);\n\t\tSDL_SetRenderTarget(vid.renderer,NULL);\n\t\tx *= hard_scale;\n\t\ty *= hard_scale;\n\t\tw *= hard_scale;\n\t\th *= hard_scale;\n\t\ttarget = vid.target;\n\t}\n\t\n\tSDL_Rect* src_rect = &(SDL_Rect){x,y,w,h};\n\tSDL_Rect* dst_rect = &(SDL_Rect){0,0,device_width,device_height};\n\tif (vid.blit->aspect==0) { // native or cropped\n\t\t// LOG_info(\"src_rect %i,%i %ix%i\\n\",src_rect->x",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\platform\\platform.c",
        "start": 844,
        "end": 854,
        "startLoc": {
          "line": 844,
          "column": 8,
          "position": 8076
        },
        "endLoc": {
          "line": 854,
          "column": 10,
          "position": 8223
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 450,
        "end": 630,
        "startLoc": {
          "line": 450,
          "column": 7,
          "position": 4186
        },
        "endLoc": {
          "line": 630,
          "column": 2,
          "position": 5558
        }
      }
    },
    {
      "format": "c",
      "lines": 52,
      "fragment": ",src_rect->y,src_rect->w,src_rect->h);\n\n\t\tint w = vid.blit->src_w * vid.blit->scale;\n\t\tint h = vid.blit->src_h * vid.blit->scale;\n\t\tint x = (device_width - w) / 2;\n\t\tint y = (device_height - h) / 2;\n\t\tdst_rect->x = x;\n\t\tdst_rect->y = y;\n\t\tdst_rect->w = w;\n\t\tdst_rect->h = h;\n\t\t\n\t\t// LOG_info(\"dst_rect %i,%i %ix%i\\n\",dst_rect->x,dst_rect->y,dst_rect->w,dst_rect->h);\n\t}\n\telse if (vid.blit->aspect>0) { // aspect\n\t\tint h = device_height;\n\t\tint w = h * vid.blit->aspect;\n\t\tif (w>device_width) {\n\t\t\tdouble ratio = 1 / vid.blit->aspect;\n\t\t\tw = device_width;\n\t\t\th = w * ratio;\n\t\t}\n\t\tint x = (device_width - w) / 2;\n\t\tint y = (device_height - h) / 2;\n\t\t// dst_rect = &(SDL_Rect){x,y,w,h};\n\t\tdst_rect->x = x;\n\t\tdst_rect->y = y;\n\t\tdst_rect->w = w;\n\t\tdst_rect->h = h;\n\t}\n\t\n\tint ox,oy;\n\toy = (device_width-device_height)/2;\n\tox = -oy;\n\tif (rotate && !on_hdmi) SDL_RenderCopyEx(vid.renderer,target,src_rect,&(SDL_Rect){ox+dst_rect->x,oy+dst_rect->y,dst_rect->w,dst_rect->h},rotate*90,NULL,SDL_FLIP_NONE);\n\telse SDL_RenderCopy(vid.renderer, target, src_rect, dst_rect);\n\t\n\tupdateEffect();\n\tif (vid.blit && effect.type!=EFFECT_NONE && vid.effect) {\n\t\t// ox = effect.scale - (dst_rect->x % effect.scale);\n\t\t// oy = effect.scale - (dst_rect->y % effect.scale);",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\platform\\platform.c",
        "start": 854,
        "end": 905,
        "startLoc": {
          "line": 854,
          "column": 10,
          "position": 8224
        },
        "endLoc": {
          "line": 905,
          "column": 58,
          "position": 8567
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 456,
        "end": 509,
        "startLoc": {
          "line": 456,
          "column": 5,
          "position": 4316
        },
        "endLoc": {
          "line": 509,
          "column": 61,
          "position": 4661
        }
      }
    },
    {
      "format": "c",
      "lines": 11,
      "fragment": "scale);\n\t\t// oy = effect.scale - (dst_rect->y % effect.scale);\n\t\t// if (ox==effect.scale) ox = 0;\n\t\t// if (oy==effect.scale) oy = 0;\n\t\t// LOG_info(\"rotate: %i ox: %i oy: %i\\n\", rotate, ox,oy);\n\t\tif (rotate && !on_hdmi) S",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\platform\\platform.c",
        "start": 903,
        "end": 913,
        "startLoc": {
          "line": 903,
          "column": 51,
          "position": 8562
        },
        "endLoc": {
          "line": 913,
          "column": 3,
          "position": 8620
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 679,
        "end": 517,
        "startLoc": {
          "line": 679,
          "column": 43,
          "position": 5898
        },
        "endLoc": {
          "line": 517,
          "column": 18,
          "position": 4714
        }
      }
    },
    {
      "format": "c",
      "lines": 11,
      "fragment": "ffect, &(SDL_Rect){0,0,dst_rect->w,dst_rect->h},dst_rect);\n\t}\n\t\n\t// uint32_t then = SDL_GetTicks();\n\tSDL_RenderPresent(vid.renderer);\n\t// LOG_info(\"SDL_Rend",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\platform\\platform.c",
        "start": 921,
        "end": 931,
        "startLoc": {
          "line": 921,
          "column": 2,
          "position": 8691
        },
        "endLoc": {
          "line": 931,
          "column": 7,
          "position": 8739
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 526,
        "end": 536,
        "startLoc": {
          "line": 526,
          "column": 19,
          "position": 4778
        },
        "endLoc": {
          "line": 536,
          "column": 9,
          "position": 4826
        }
      }
    },
    {
      "format": "c",
      "lines": 9,
      "fragment": "eRGBSurface(SDL_SWSURFACE, SCALE2(OVERLAY_WIDTH,OVERLAY_HEIGHT),OVERLAY_DEPTH,OVERLAY_RGBA_MASK);\n\treturn ovl.overlay;\n}\nvoid PLAT_quitOverlay(void) {\n\tif (ovl.overlay) SDL_FreeSurface(ovl.overlay",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\platform\\platform.c",
        "start": 957,
        "end": 965,
        "startLoc": {
          "line": 957,
          "column": 1,
          "position": 8860
        },
        "endLoc": {
          "line": 965,
          "column": 59,
          "position": 8915
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 721,
        "end": 729,
        "startLoc": {
          "line": 721,
          "column": 1,
          "position": 6185
        },
        "endLoc": {
          "line": 729,
          "column": 5,
          "position": 6240
        }
      }
    },
    {
      "format": "c",
      "lines": 30,
      "fragment": "o.h>\n#include <stdlib.h>\n#include <unistd.h>\n#include <fcntl.h>\n#include <sys/mman.h>\n#include <linux/fb.h>\n#include <sys/ioctl.h>\n#include <errno.h>\n#include <sys/stat.h>\n#include <dlfcn.h>\n#include <string.h>\n\n#include \"msettings.h\"\n\n///////////////////////////////////////\n\n#define SETTINGS_VERSION 2\ntypedef struct Settings {\n\tint version; // future proofing\n\tint brightness;\n\tint headphones;\n\tint speaker;\n\tint unused[2]; // for future use\n\t// NOTE: doesn't really need to be persisted but still needs to be shared\n\tint jack; \n\tint hdmi; \n} Settings;\nstatic Settings DefaultSettings = {\n\t.version = SETTINGS_VERSION",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\libmsettings\\msettings.c",
        "start": 15,
        "end": 44,
        "startLoc": {
          "line": 15,
          "column": 1,
          "position": 14
        },
        "endLoc": {
          "line": 44,
          "column": 34,
          "position": 210
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\libmsettings\\msettings.c",
        "start": 14,
        "end": 45,
        "startLoc": {
          "line": 14,
          "column": 1,
          "position": 13
        },
        "endLoc": {
          "line": 45,
          "column": 68,
          "position": 211
        }
      }
    },
    {
      "format": "c",
      "lines": 75,
      "fragment": ".brightness = 2,\n\t.headphones = 4,\n\t.speaker = 8,\n\t.jack = 0,\n\t.hdmi = 0,\n};\nstatic Settings* settings;\n\n#define SHM_KEY \"/SharedSettings\"\nstatic char SettingsPath[256];\nstatic int shm_fd = -1;\nstatic int is_host = 0;\nstatic int shm_size = sizeof(Settings);\n\n#define JACK_STATE_PATH \"/sys/module/snd_soc_sunxi_component_jack/parameters/jack_state\" // TODO: doesn't change, always 0\n#define HDMI_STATE_PATH \"/sys/class/switch/hdmi/cable.0/state\"\n\nint getInt(char* path) {\n\tint i = 0;\n\tFILE *file = fopen(path, \"r\");\n\tif (file!=NULL) {\n\t\tfscanf(file, \"%i\", &i);\n\t\tfclose(file);\n\t}\n\treturn i;\n}\n\nvoid InitSettings(void) {\t\n\tsprintf(SettingsPath, \"%s/msettings.bin\", getenv(\"USERDATA_PATH\"));\n\t\n\tshm_fd = shm_open(SHM_KEY, O_RDWR | O_CREAT | O_EXCL, 0644); // see if it exists\n\tif (shm_fd==-1 && errno==EEXIST) { // already exists\n\t\tputs(\"Settings client\");\n\t\tshm_fd = shm_open(SHM_KEY, O_RDWR, 0644);\n\t\tsettings = mmap(NULL, shm_size, PROT_READ | PROT_WRITE, MAP_SHARED, shm_fd, 0);\n\t}\n\telse { // host\n\t\tputs(\"Settings host\"); // should always be keymon\n\t\tis_host = 1;\n\t\t// we created it so set initial size and populate\n\t\tftruncate(shm_fd, shm_size);\n\t\tsettings = mmap(NULL, shm_size, PROT_READ | PROT_WRITE, MAP_SHARED, shm_fd, 0);\n\t\t\n\t\tint fd = open(SettingsPath, O_RDONLY);\n\t\tif (fd>=0) {\n\t\t\tread(fd, settings, shm_size);\n\t\t\t// TODO: use settings->version for future proofing?\n\t\t\tclose(fd);\n\t\t}\n\t\telse {\n\t\t\t// load defaults\n\t\t\tmemcpy(settings, &DefaultSettings, shm_size);\n\t\t}\n\t\t\n\t\t// these shouldn't be persisted\n\t\t// settings->jack = 0;\n\t\t// settings->hdmi = 0;\n\t}\n\t\n\tint jack = getInt(JACK_STATE_PATH);\n\tint hdmi = getInt(HDMI_STATE_PATH);\n\tprintf(\"brightness: %i (hdmi: %i)\\nspeaker: %i (jack: %i)\\n\", settings->brightness, hdmi, settings->speaker, jack); fflush(stdout);\n\t\n\t// both of these set volume\n\tSetJack(jack);\n\tSetHDMI(hdmi);\n\t\n\tSetBrightness(GetBrightness());\n\t// system(\"echo $(< \" BRI",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\libmsettings\\msettings.c",
        "start": 47,
        "end": 121,
        "startLoc": {
          "line": 47,
          "column": 1,
          "position": 214
        },
        "endLoc": {
          "line": 121,
          "column": 5,
          "position": 855
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\libmsettings\\msettings.c",
        "start": 50,
        "end": 123,
        "startLoc": {
          "line": 50,
          "column": 1,
          "position": 220
        },
        "endLoc": {
          "line": 123,
          "column": 30,
          "position": 856
        }
      }
    },
    {
      "format": "c",
      "lines": 37,
      "fragment": " BRIGHTNESS_PATH \")\");\n}\nvoid QuitSettings(void) {\n\tmunmap(settings, shm_size);\n\tif (is_host) shm_unlink(SHM_KEY);\n}\nstatic inline void SaveSettings(void) {\n\tint fd = open(SettingsPath, O_CREAT|O_WRONLY, 0644);\n\tif (fd>=0) {\n\t\twrite(fd, settings, shm_size);\n\t\tclose(fd);\n\t\tsync();\n\t}\n}\n\nint GetBrightness(void) { // 0-10\n\treturn settings->brightness;\n}\nvoid SetBrightness(int value) {\n\tif (settings->hdmi) return;\n\t\n\tint raw;\n\tswitch (value) {\n\t\tcase  0: raw=  4; break;\t//  0\n\t\tcase  1: raw=  6; break;\t//  2\n\t\tcase  2: raw= 10; break;\t//  4\n\t\tcase  3: raw= 16; break;\t//  6\n\t\tcase  4: raw= 32; break;\t// 16\n\t\tcase  5: raw= 48; break;\t// 16\n\t\tcase  6: raw= 64; break;\t// 16\n\t\tcase  7: raw= 96; break;\t// 32\n\t\tcase  8: raw=128; break;\t// 32\n\t\tcase  9: raw=192; break;\t// 64\n\t\tcase 10: raw=255; break;\t// 64\n\t}\n\t\n\tSetRawBrightness(",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\libmsettings\\msettings.c",
        "start": 121,
        "end": 157,
        "startLoc": {
          "line": 121,
          "column": 3,
          "position": 855
        },
        "endLoc": {
          "line": 157,
          "column": 7,
          "position": 1218
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\libmsettings\\msettings.c",
        "start": 124,
        "end": 158,
        "startLoc": {
          "line": 124,
          "column": 3,
          "position": 859
        },
        "endLoc": {
          "line": 158,
          "column": 58,
          "position": 1211
        }
      }
    },
    {
      "format": "c",
      "lines": 9,
      "fragment": "tness(raw);\n\tsettings->brightness = value;\n\tSaveSettings();\n}\n\nint GetVolume(void) { // 0-20\n\treturn settings->jack ? settings->headphones : settings->speaker;\n}\nvoid SetVolume(int value) {\n\tif (settings->hdmi) return;\n\t\n\tif (settings->jack) settings",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\libmsettings\\msettings.c",
        "start": 157,
        "end": 165,
        "startLoc": {
          "line": 157,
          "column": 2,
          "position": 1218
        },
        "endLoc": {
          "line": 165,
          "column": 11,
          "position": 1316
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\libmsettings\\msettings.c",
        "start": 162,
        "end": 171,
        "startLoc": {
          "line": 162,
          "column": 2,
          "position": 1239
        },
        "endLoc": {
          "line": 171,
          "column": 17,
          "position": 1338
        }
      }
    },
    {
      "format": "c",
      "lines": 12,
      "fragment": "tf(\"SetRawVolume(%i)\\n\", val); fflush(stdout);\n\tchar cmd[256];\n\tsprintf(cmd, \"amixer sset 'lineout volume' %i%% > /dev/null 2>&1\", val);\n\t// // puts(cmd); fflush(stdout);\n\tsystem(cmd);\n}\n\n// monitored and set by thread in keymon\nint GetJack(void) {\n\t",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\libmsettings\\msettings.c",
        "start": 184,
        "end": 195,
        "startLoc": {
          "line": 184,
          "column": 2,
          "position": 1418
        },
        "endLoc": {
          "line": 195,
          "column": 9,
          "position": 1479
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\libmsettings\\msettings.c",
        "start": 184,
        "end": 195,
        "startLoc": {
          "line": 184,
          "column": 2,
          "position": 1387
        },
        "endLoc": {
          "line": 195,
          "column": 82,
          "position": 1448
        }
      }
    },
    {
      "format": "c",
      "lines": 7,
      "fragment": "oid) {\n\treturn settings->jack;\n}\nvoid SetJack(int value) {\n\t// printf(\"SetJack(%i)\\n\", value); fflush(stdout);\n\t\n\t// char cmd[256];\n\t// sprintf(cmd, \"amixer cset na",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\libmsettings\\msettings.c",
        "start": 195,
        "end": 201,
        "startLoc": {
          "line": 195,
          "column": 2,
          "position": 1479
        },
        "endLoc": {
          "line": 201,
          "column": 2,
          "position": 1545
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\libmsettings\\msettings.c",
        "start": 197,
        "end": 203,
        "startLoc": {
          "line": 197,
          "column": 2,
          "position": 1453
        },
        "endLoc": {
          "line": 203,
          "column": 2,
          "position": 1520
        }
      }
    },
    {
      "format": "c",
      "lines": 14,
      "fragment": "ttings.h>\n\n#include <sys/types.h>\n#include <sys/stat.h>\n#include <sys/ioctl.h>\n\n// #include \"defines.h\"\n\n#define VOLUME_MIN \t\t0\n#define VOLUME_MAX \t\t20\n#define BRIGHTNESS_MI",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\keymon\\keymon.c",
        "start": 37,
        "end": 50,
        "startLoc": {
          "line": 37,
          "column": 8,
          "position": 63
        },
        "endLoc": {
          "line": 50,
          "column": 10,
          "position": 155
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\libmsettings\\msettings.c",
        "start": 41,
        "end": 48,
        "startLoc": {
          "line": 41,
          "column": 2,
          "position": 206
        },
        "endLoc": {
          "line": 48,
          "column": 11,
          "position": 152
        }
      }
    },
    {
      "format": "c",
      "lines": 12,
      "fragment": "E_MINUS\t\t114\n\n//\tfor ev.value\n#define RELEASED\t0\n#define PRESSED\t\t1\n#define REPEAT\t\t2\n\nstatic int\tinput_fd = 0;\nstatic struct input_event ev;\n\nstatic pthread_t hdmi_pt;\n#define HDMI_",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\keymon\\keymon.c",
        "start": 59,
        "end": 70,
        "startLoc": {
          "line": 59,
          "column": 3,
          "position": 217
        },
        "endLoc": {
          "line": 70,
          "column": 13,
          "position": 291
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\keymon\\keymon.c",
        "start": 66,
        "end": 78,
        "startLoc": {
          "line": 66,
          "column": 3,
          "position": 286
        },
        "endLoc": {
          "line": 78,
          "column": 7,
          "position": 361
        }
      }
    },
    {
      "format": "c",
      "lines": 27,
      "fragment": " *file = fopen(path, \"r\");\n\tif (file!=NULL) {\n\t\tfscanf(file, \"%i\", &i);\n\t\tfclose(file);\n\t}\n\treturn i;\n}\n\nstatic void* watchHDMI(void *arg) {\n\tint has_hdmi,had_hdmi;\n\t\n\thas_hdmi = had_hdmi = getInt(HDMI_STATE_PATH);\n\tSetHDMI(has_hdmi);\n\t\n\twhile(1) {\n\t\tsleep(1);\n\t\t\n\t\thas_hdmi = getInt(HDMI_STATE_PATH);\n\t\tif (had_hdmi!=has_hdmi) {\n\t\t\thad_hdmi = has_hdmi;\n\t\t\tSetHDMI(has_hdmi);\n\t\t}\n\t}\n\t\n\treturn 0;\n}\n\nint main (int argc, char *argv[]) {\n\tInitSettings();\n\tpthread_create(&hdmi_pt, NULL, &watchHDMI, NULL);\n\t\n\tinput_fd = open(\"/dev/input/event1\", O_RDONLY | O_NONBLOCK | O_CLOEXEC);\n\t\n\tuint32_t i",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\keymon\\keymon.c",
        "start": 73,
        "end": 99,
        "startLoc": {
          "line": 73,
          "column": 20,
          "position": 324
        },
        "endLoc": {
          "line": 99,
          "column": 31,
          "position": 548
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\keymon\\keymon.c",
        "start": 87,
        "end": 83,
        "startLoc": {
          "line": 87,
          "column": 17,
          "position": 484
        },
        "endLoc": {
          "line": 83,
          "column": 3,
          "position": 463
        }
      }
    },
    {
      "format": "c",
      "lines": 6,
      "fragment": "ed = 0;\n\tuint32_t up_repeat_at = 0;\n\t\n\tuint32_t down_pressed = 0;\n\tuint32_t down_just_pressed = 0;\n\tuint32_t down_repeat_at = 0;\n\t\n\tuint8_t ignore;\n\tuint32_t then;\n\tuint32_t now;\n\tstruct timeval tod;\n\t",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\keymon\\keymon.c",
        "start": 102,
        "end": 107,
        "startLoc": {
          "line": 102,
          "column": 9,
          "position": 578
        },
        "endLoc": {
          "line": 107,
          "column": 60,
          "position": 652
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\keymon\\keymon.c",
        "start": 87,
        "end": 121,
        "startLoc": {
          "line": 87,
          "column": 6,
          "position": 523
        },
        "endLoc": {
          "line": 121,
          "column": 65,
          "position": 841
        }
      }
    },
    {
      "format": "c",
      "lines": 19,
      "fragment": "ttimeofday(&tod, NULL);\n\tthen = tod.tv_sec * 1000 + tod.tv_usec / 1000; // essential SDL_GetTicks()\n\tignore = 0;\n\t\n\twhile (1) {\n\t\tgettimeofday(&tod, NULL);\n\t\tnow = tod.tv_sec * 1000 + tod.tv_usec / 1000;\n\t\t// TODO: check if if necessary\n\t\tif (now-then>1000) ignore = 1; // ignore input that arrived during sleep\n\t\t\n\t\twhile(read(input_fd, &ev, sizeof(ev))==s",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\keymon\\keymon.c",
        "start": 108,
        "end": 126,
        "startLoc": {
          "line": 108,
          "column": 4,
          "position": 655
        },
        "endLoc": {
          "line": 126,
          "column": 3,
          "position": 784
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\keymon\\keymon.c",
        "start": 99,
        "end": 116,
        "startLoc": {
          "line": 99,
          "column": 5,
          "position": 678
        },
        "endLoc": {
          "line": 116,
          "column": 2,
          "position": 805
        }
      }
    },
    {
      "format": "c",
      "lines": 14,
      "fragment": "izeof(ev))==sizeof(ev)) {\n\t\t\tif (ignore) continue;\n\t\t\tval = ev.value;\n\n\t\t\tif (( ev.type != EV_KEY ) || ( val > REPEAT )) continue;\n\t\t\t// printf(\"code: %i (%i)\\n\", ev.code, val); fflush(stdout);\n\t\t\tswitch (ev.code) {\n\t\t\t\tcase CODE_MENU:\n\t\t\t\t\tmenu_pressed = val;\n\t\t\t\tbreak;\n\t\t\t\tbreak;\n\t\t\t\tcase CODE_PLUS:\n\t\t\t\t\tu",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\keymon\\keymon.c",
        "start": 123,
        "end": 136,
        "startLoc": {
          "line": 123,
          "column": 4,
          "position": 776
        },
        "endLoc": {
          "line": 136,
          "column": 46,
          "position": 876
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\keymon\\keymon.c",
        "start": 115,
        "end": 128,
        "startLoc": {
          "line": 115,
          "column": 4,
          "position": 802
        },
        "endLoc": {
          "line": 128,
          "column": 7,
          "position": 902
        }
      }
    },
    {
      "format": "c",
      "lines": 11,
      "fragment": "d = val;\n\t\t\t\t\tif (val) down_repeat_at = now + 300;\n\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (ignore) {\n\t\t\tmenu_pressed = 0;\n\t\t\tup_pressed = up_just_pressed = 0;\n\t\t\tdown_pressed = down_just_pressed = 0;\n\t\t\tup_repeat_at = 0;\n\t\t\tdown_repeat_at = 0;\n\t\t}\n\t\t\n\t\tif (up_just_pressed || (up_",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\keymon\\keymon.c",
        "start": 142,
        "end": 152,
        "startLoc": {
          "line": 142,
          "column": 5,
          "position": 916
        },
        "endLoc": {
          "line": 152,
          "column": 48,
          "position": 1007
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\keymon\\keymon.c",
        "start": 134,
        "end": 144,
        "startLoc": {
          "line": 134,
          "column": 5,
          "position": 962
        },
        "endLoc": {
          "line": 144,
          "column": 7,
          "position": 1053
        }
      }
    },
    {
      "format": "c",
      "lines": 14,
      "fragment": "BRIGHTNESS_MAX) SetBrightness(++val);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// printf(\"volume up\\n\"); fflush(stdout);\n\t\t\t\tval = GetVolume();\n\t\t\t\tif (val<VOLUME_MAX) SetVolume(++val);\n\t\t\t}\n\t\t\t\n\t\t\tif (up_just_pressed) up_just_pressed = 0;\n",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\keymon\\keymon.c",
        "start": 158,
        "end": 171,
        "startLoc": {
          "line": 158,
          "column": 5,
          "position": 1047
        },
        "endLoc": {
          "line": 171,
          "column": 2,
          "position": 1137
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\keymon\\keymon.c",
        "start": 150,
        "end": 163,
        "startLoc": {
          "line": 150,
          "column": 5,
          "position": 1113
        },
        "endLoc": {
          "line": 163,
          "column": 2,
          "position": 1203
        }
      }
    },
    {
      "format": "c",
      "lines": 10,
      "fragment": "E(0)/4]>>16)+1;\n\t\n\tvid.de_mem[DE_OVL_ISIZE(0)/4] = vid.de_mem[DE_OVL_ISIZE(2)/4] = ((vid.width-1) & 0xFFFF) | ((vid.height-1) << 16);\n\tvid.de_mem[DE_OVL_SR(0)/4] = vid.de_mem[DE_OVL_SR(2)/4] = ((0x2000*vid.width/vw)&0xFFFF) | ((0x2000*vid.height/vh)<<16);\n\tvid.de_mem[DE_OVL_STR(0)/4] = vid.de_mem[DE_OVL_STR(2)/4] = vid.pitch / 8;\n\tvid.de_mem[DE_OVL_BA0(0)/4] = (uintptr_t)(vid.fb_info.padd + PAGE_SIZE);\n\t\n\tGFX_setNearestNeighbor(0); // false?  \n\t\n\treturn vid.screen;\n}\n\nvoid PLAT_quitVideo(void) {\n\tion_free(vid.fd_ion, &vid.fb_info);\n\tmunmap(vid.de_mem, DE_SIZE);\n\tclose(vid.fd_mem);\n\tclose(vid.fd_ion);\n\tclo",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xx\\platform\\platform.c",
        "start": 356,
        "end": 365,
        "startLoc": {
          "line": 356,
          "column": 2,
          "position": 3116
        },
        "endLoc": {
          "line": 365,
          "column": 4,
          "position": 3404
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rg35xx\\platform\\platform.c",
        "start": 311,
        "end": 320,
        "startLoc": {
          "line": 311,
          "column": 2,
          "position": 2551
        },
        "endLoc": {
          "line": 320,
          "column": 10,
          "position": 2839
        }
      }
    },
    {
      "format": "c",
      "lines": 12,
      "fragment": "nt height) {\n\tDE_setRect(vid.de_mem, x,y,width,height);\n}\n\nvoid PLAT_setNearestNeighbor(int enabled) {\n\tint scale_coef = enabled ? DE_SCOEF_NONE : DE_SCOEF_HALF_ZOOMOUT;\n\tDE_setScaleCoef(vid.de_mem, 0, scale_coef);\n\tDE_setScaleCoef(vid.de_mem, 1, scale_coef);\n\tDE_setScaleCoef(",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xx\\platform\\platform.c",
        "start": 415,
        "end": 426,
        "startLoc": {
          "line": 415,
          "column": 2,
          "position": 3837
        },
        "endLoc": {
          "line": 426,
          "column": 3,
          "position": 3930
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\trimuismart\\platform\\platform.c",
        "start": 316,
        "end": 327,
        "startLoc": {
          "line": 316,
          "column": 2,
          "position": 2748
        },
        "endLoc": {
          "line": 327,
          "column": 4,
          "position": 2841
        }
      }
    },
    {
      "format": "c",
      "lines": 15,
      "fragment": "rlay->w;\n\tx = FIXED_WIDTH - SCALE1(PADDING) - w;\n\ty = SCALE1(PADDING);\n\t\n\tovl.oinfo.mem_off = (uintptr_t)ovl.ov_info.padd - vid.finfo.smem_start;\n\tovl.oinfo.mem_size = size;\n\tovl.oinfo.screen_width = PAGE_WIDTH; // ???\n\tovl.oinfo.color_mode = OWL_DSS_COLOR_ARGB32;\n\tovl.oinfo.img_width = w;\n\tovl.oinfo.img_height = h;\n\tovl.oinfo.xoff = 0;\n\tovl.oinfo.yoff = 0;\n\tovl.oinfo.width = w;\n\tovl.oinfo.height = h;\n\tovl.oinfo.rotation = 0;\n\tovl.oinfo.pos_x = x;\t// position\n\to",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xx\\platform\\platform.c",
        "start": 530,
        "end": 544,
        "startLoc": {
          "line": 530,
          "column": 1,
          "position": 5043
        },
        "endLoc": {
          "line": 544,
          "column": 2,
          "position": 5206
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 486,
        "end": 501,
        "startLoc": {
          "line": 486,
          "column": 1,
          "position": 4459
        },
        "endLoc": {
          "line": 501,
          "column": 21,
          "position": 4624
        }
      }
    },
    {
      "format": "c",
      "lines": 14,
      "fragment": "VERLAY_ENABLE, &ovl.oargs)<0) printf(\"ENABLE failed %s\\n\",strerror(errno));\n\tDE_enableLayer(vid.de_mem); // we don't want it to show immediately\n\t\n\treturn ovl.overlay;\n}\nvoid PLAT_quitOverlay(void) {\n\tif (ovl.overlay) SDL_Free",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xx\\platform\\platform.c",
        "start": 555,
        "end": 568,
        "startLoc": {
          "line": 555,
          "column": 44,
          "position": 5277
        },
        "endLoc": {
          "line": 568,
          "column": 2,
          "position": 5357
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 688,
        "end": 702,
        "startLoc": {
          "line": 688,
          "column": 42,
          "position": 5959
        },
        "endLoc": {
          "line": 702,
          "column": 6,
          "position": 6041
        }
      }
    },
    {
      "format": "c",
      "lines": 11,
      "fragment": "FreeSurface(ovl.overlay);\n\tion_free(vid.fd_ion, &ovl.ov_info);\n\n\tmemset(&ovl.oargs, 0, sizeof(struct owlfb_overlay_args));\n\tovl.oargs.fb_id = OVERLAY_FB;\n\tovl.oargs.overlay_id = OVERLAY_ID;\n\tovl.oargs.overlay_type = OWLFB_OVERLAY_VIDEO;\n\tovl.oargs",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xx\\platform\\platform.c",
        "start": 567,
        "end": 577,
        "startLoc": {
          "line": 567,
          "column": 11,
          "position": 5354
        },
        "endLoc": {
          "line": 577,
          "column": 8,
          "position": 5435
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\trimuismart\\platform\\platform.c",
        "start": 504,
        "end": 515,
        "startLoc": {
          "line": 504,
          "column": 2,
          "position": 4517
        },
        "endLoc": {
          "line": 515,
          "column": 8,
          "position": 4599
        }
      }
    },
    {
      "format": "c",
      "lines": 8,
      "fragment": " <sys/stat.h>\n#include <dlfcn.h>\n#include <string.h>\n\n#include \"msettings.h\"\n\n///////////////////////////////////////\n\n#define SETTINGS_VERSION 2\ntypedef struct Settings {\n\tint version; // future proofing\n\tint brightness;\n\tint h",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xx\\libmsettings\\msettings.c",
        "start": 21,
        "end": 28,
        "startLoc": {
          "line": 21,
          "column": 2,
          "position": 46
        },
        "endLoc": {
          "line": 28,
          "column": 2,
          "position": 102
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\trimuismart\\libmsettings\\msettings.c",
        "start": 23,
        "end": 30,
        "startLoc": {
          "line": 23,
          "column": 2,
          "position": 50
        },
        "endLoc": {
          "line": 30,
          "column": 2,
          "position": 106
        }
      }
    },
    {
      "format": "c",
      "lines": 12,
      "fragment": "h>\n#include <dlfcn.h>\n#include <string.h>\n\n#include \"msettings.h\"\n\n///////////////////////////////////////\n\n#define SETTINGS_VERSION 2\ntypedef struct Settings {\n\tint version; // future proofing\n\tint brightness;\n\tint headphones;\n\tint speaker;\n\tint unused[2]; // for ",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xx\\libmsettings\\msettings.c",
        "start": 21,
        "end": 32,
        "startLoc": {
          "line": 21,
          "column": 8,
          "position": 49
        },
        "endLoc": {
          "line": 32,
          "column": 2,
          "position": 132
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\libmsettings\\msettings.c",
        "start": 24,
        "end": 33,
        "startLoc": {
          "line": 24,
          "column": 5,
          "position": 58
        },
        "endLoc": {
          "line": 33,
          "column": 2,
          "position": 140
        }
      }
    },
    {
      "format": "c",
      "lines": 18,
      "fragment": "eadphones;\n\tint speaker;\n\tint unused[2]; // for future use\n\t// NOTE: doesn't really need to be persisted but still needs to be shared\n\tint jack; \n} Settings;\nstatic Settings DefaultSettings = {\n\t.version = S",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xx\\libmsettings\\msettings.c",
        "start": 28,
        "end": 45,
        "startLoc": {
          "line": 28,
          "column": 2,
          "position": 103
        },
        "endLoc": {
          "line": 45,
          "column": 5,
          "position": 197
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\trimuismart\\libmsettings\\msettings.c",
        "start": 30,
        "end": 45,
        "startLoc": {
          "line": 30,
          "column": 2,
          "position": 107
        },
        "endLoc": {
          "line": 45,
          "column": 68,
          "position": 211
        }
      }
    },
    {
      "format": "c",
      "lines": 41,
      "fragment": "hared\n\tint jack; \n} Settings;\nstatic Settings DefaultSettings = {\n\t.version = SETTINGS_VERSION,\n\t.brightness = 2,\n\t.headphones = 4,\n\t.speaker = 8,\n\t.jack = 0,\n};\nstatic Settings* settings;\n\n#define SHM_KEY \"/SharedSettings\"\nstatic char SettingsPath[256];\nstatic int shm_fd = -1;\nstatic int is_host = 0;\nstatic int shm_size = sizeof(Settings);\n\n#define BACKLIGHT_PATH \"/sys/class/backlight/backlight.2/bl_power\"\n#define BRIGHTNESS_PATH \"/sys/class/backlight/backlight.2/brightness\"\n#define VOLUME_PATH \"/sys/class/volume/value\"\n\nvoid InitSettings(void) {\t\n\tsprintf(SettingsPath, \"%s/msettings.bin\", getenv(\"USERDATA_PATH\"));\n\t\n\tshm_fd = shm_open(SHM_KEY, O_RDWR | O_CREAT | O_EXCL, 0644); // see if it exists\n\tif (shm_fd==-1 && errno==EEXIST) { // already exists\n\t\tputs(\"Settings client\");\n\t\tshm_fd = shm_open(SHM_KEY, O_RDWR, 0644);\n\t\tsettings = mmap(NULL, shm_size, PROT_READ | PROT_WRITE, MAP_SHARED, shm_fd, 0);\n\t}\n\telse { // host\n\t\tputs(\"Settings host\"); // keymon\n\t\tis_host = 1;\n\t\t// we created it so set initial size and populate\n\t\tftruncate(shm_fd, shm_size);\n\t\tsettings = mmap(NULL, shm_size, PRO",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xx\\libmsettings\\msettings.c",
        "start": 37,
        "end": 77,
        "startLoc": {
          "line": 37,
          "column": 2,
          "position": 161
        },
        "endLoc": {
          "line": 77,
          "column": 10,
          "position": 507
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\trimuismart\\libmsettings\\msettings.c",
        "start": 40,
        "end": 76,
        "startLoc": {
          "line": 40,
          "column": 2,
          "position": 177
        },
        "endLoc": {
          "line": 76,
          "column": 8,
          "position": 516
        }
      }
    },
    {
      "format": "c",
      "lines": 23,
      "fragment": "size, PROT_READ | PROT_WRITE, MAP_SHARED, shm_fd, 0);\n\t\t\n\t\tint fd = open(SettingsPath, O_RDONLY);\n\t\tif (fd>=0) {\n\t\t\tread(fd, settings, shm_size);\n\t\t\t// TODO: use settings->version for future proofing?\n\t\t\tclose(fd);\n\t\t}\n\t\telse {\n\t\t\t// load defaults\n\t\t\tmemcpy(settings, &DefaultSettings, shm_size);\n\t\t}\n\t\t\n\t\t// these shouldn't be persisted\n\t\t// settings->jack = 0;\n\t}\n\tprintf(\"brightness: %i\\nspeaker: %i \\n\", settings->brightness, settings->speaker);\n\t\n\t",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xx\\libmsettings\\msettings.c",
        "start": 77,
        "end": 99,
        "startLoc": {
          "line": 77,
          "column": 2,
          "position": 507
        },
        "endLoc": {
          "line": 99,
          "column": 5,
          "position": 685
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\libmsettings\\msettings.c",
        "start": 99,
        "end": 122,
        "startLoc": {
          "line": 99,
          "column": 2,
          "position": 634
        },
        "endLoc": {
          "line": 122,
          "column": 17,
          "position": 814
        }
      }
    },
    {
      "format": "c",
      "lines": 14,
      "fragment": "gs->brightness;\n}\nvoid SetBrightness(int value) {\n\tint raw;\n\tswitch (value) {\n\t\tcase 0: raw=16; break; \t\t//   0\n\t\tcase 1: raw=24; break; \t\t//   8\n\t\tcase 2: raw=40; break; \t\t//  16\n\t\tcase 3: raw=64; break; \t\t//  24\n\t\tcase 4: raw=128; break;\t\t//\t64\n\t\tcase 5: raw=192; break;\t\t//  64\n\t\tcase 6: raw=256; break;\t\t//",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xx\\libmsettings\\msettings.c",
        "start": 110,
        "end": 123,
        "startLoc": {
          "line": 110,
          "column": 2,
          "position": 861
        },
        "endLoc": {
          "line": 123,
          "column": 2,
          "position": 976
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\libmsettings\\msettings.c",
        "start": 135,
        "end": 127,
        "startLoc": {
          "line": 135,
          "column": 2,
          "position": 1035
        },
        "endLoc": {
          "line": 127,
          "column": 3,
          "position": 1010
        }
      }
    },
    {
      "format": "c",
      "lines": 8,
      "fragment": "68; break;\t\t// 256\n\t\tcase 10: raw=1024; break;\t// 256\n\t}\n\tSetRawBrightness(raw);\n\tsettings->brightness = value;\n\tSaveSettings();\n}\n\nint GetVolume(void) { // 0-20\n\treturn settings->jack ? settings",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xx\\libmsettings\\msettings.c",
        "start": 129,
        "end": 136,
        "startLoc": {
          "line": 129,
          "column": 2,
          "position": 1009
        },
        "endLoc": {
          "line": 136,
          "column": 10,
          "position": 1072
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\libmsettings\\msettings.c",
        "start": 158,
        "end": 165,
        "startLoc": {
          "line": 158,
          "column": 2,
          "position": 1211
        },
        "endLoc": {
          "line": 165,
          "column": 11,
          "position": 1274
        }
      }
    },
    {
      "format": "c",
      "lines": 22,
      "fragment": ">headphones = value;\n\telse settings->speaker = value;\n\t\n\tint raw = value * 2;\n\tSetRawVolume(raw);\n\tSaveSettings();\n}\n\nvoid SetRawBrightness(int val) { // 0 - 1024\n\t// printf(\"SetRawBrightness(%i)\\n\", val); fflush(stdout);\n\tint fd = open(BRIGHTNESS_PATH, O_WRONLY);\n\tif (fd>=0) {\n\t\tdprintf(fd,\"%d\",val);\n\t\tclose(fd);\n\t}\n}\nvoid SetRawVolume(int val) { /",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xx\\libmsettings\\msettings.c",
        "start": 142,
        "end": 163,
        "startLoc": {
          "line": 142,
          "column": 1,
          "position": 1122
        },
        "endLoc": {
          "line": 163,
          "column": 2,
          "position": 1244
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\trimuismart\\libmsettings\\msettings.c",
        "start": 145,
        "end": 165,
        "startLoc": {
          "line": 145,
          "column": 1,
          "position": 1139
        },
        "endLoc": {
          "line": 165,
          "column": 2,
          "position": 1259
        }
      }
    },
    {
      "format": "c",
      "lines": 22,
      "fragment": "#include <stdint.h>\n#include <unistd.h>\n#include <string.h>\n#include <fcntl.h>\n#include <dirent.h>\n#include <linux/input.h>\n\n#include <msettings.h>\n\n#include <sys/types.h>\n#include <sys/stat.h>\n#include <sys/ioctl.h>\n#include <pthread.h>\n\n#include \"defines.h\"\n\n//\tfor ev.value\n#define RELEASED\t0\n#define PRESSED\t\t1\n#define REPEAT\t\t",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xx\\keymon\\keymon.c",
        "start": 25,
        "end": 46,
        "startLoc": {
          "line": 25,
          "column": 1,
          "position": 25
        },
        "endLoc": {
          "line": 46,
          "column": 15,
          "position": 165
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\keymon\\keymon.c",
        "start": 31,
        "end": 50,
        "startLoc": {
          "line": 31,
          "column": 1,
          "position": 34
        },
        "endLoc": {
          "line": 50,
          "column": 4,
          "position": 171
        }
      }
    },
    {
      "format": "c",
      "lines": 11,
      "fragment": "ct input_event ev;\n\nstatic pthread_t ports_pt;\n\n#define JACK_STATE_PATH \"/sys/class/switch/h2w/state\"\n#define BACKLIGHT_PATH \"/sys/class/backlight/backlight.2/bl_power\"\n\nint getInt(char*",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xx\\keymon\\keymon.c",
        "start": 47,
        "end": 57,
        "startLoc": {
          "line": 47,
          "column": 15,
          "position": 183
        },
        "endLoc": {
          "line": 57,
          "column": 2,
          "position": 246
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\keymon\\keymon.c",
        "start": 55,
        "end": 66,
        "startLoc": {
          "line": 55,
          "column": 9,
          "position": 221
        },
        "endLoc": {
          "line": 66,
          "column": 9,
          "position": 286
        }
      }
    },
    {
      "format": "c",
      "lines": 6,
      "fragment": "int has_headphones,had_headphones;\n\t\n\thas_headphones = had_headphones = getInt(JACK_STATE_PATH);\n\tSetJack(has_headphones);\n\t\n\t",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xx\\keymon\\keymon.c",
        "start": 67,
        "end": 72,
        "startLoc": {
          "line": 67,
          "column": 12,
          "position": 328
        },
        "endLoc": {
          "line": 72,
          "column": 9,
          "position": 380
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\keymon\\keymon.c",
        "start": 83,
        "end": 87,
        "startLoc": {
          "line": 83,
          "column": 2,
          "position": 424
        },
        "endLoc": {
          "line": 87,
          "column": 7,
          "position": 474
        }
      }
    },
    {
      "format": "c",
      "lines": 31,
      "fragment": "(had_headphones!=has_headphones) {\n\t\t\thad_headphones = has_headphones;\n\t\t\tSetJack(has_headphones);\n\t\t}\n\t}\n\t\n\treturn 0;\n}\n\nint main (int argc, char *argv[]) {\n\tInitSettings();\n\tpthread_create(&ports_pt, NULL, &watchPorts, NULL);\n\t\n\tchar path[32];\n\tfor (int i=0; i<INPUT_COUNT; i++) {\n\t\tsprintf(path, \"/dev/input/event%i\", i);\n\t\tinputs[i] = open(path, O_RDONLY | O_NONBLOCK | O_CLOEXEC);\n\t}\n\t\n\tuint32_t input;\n\tuint32_t val;\n\tuint32_t menu_pressed = 0;\n\tuint32_t power_pressed = 0;\n\t\n\tuint32_t up_pressed = 0;\n\tuint32_t up_just_pressed = 0;\n\tuint32_t up_repeat_at = 0;\n\t\n\tuint32_t down_pressed = 0;\n\tuint32_t down_just_pressed = 0;\n\tuint32_t down_repeat_at = 0;\n\t\n\tuint8_t ignore;\n\tuint32_t then;\n\tuint32_t now;\n\tstruct timeval tod;\n\t\n\tgettimeofday(&tod, NULL);\n\tthen = tod.t",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xx\\keymon\\keymon.c",
        "start": 75,
        "end": 105,
        "startLoc": {
          "line": 75,
          "column": 2,
          "position": 406
        },
        "endLoc": {
          "line": 105,
          "column": 7,
          "position": 730
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\keymon\\keymon.c",
        "start": 61,
        "end": 121,
        "startLoc": {
          "line": 61,
          "column": 2,
          "position": 272
        },
        "endLoc": {
          "line": 121,
          "column": 65,
          "position": 841
        }
      }
    },
    {
      "format": "c",
      "lines": 19,
      "fragment": "LL);\n\t\tnow = tod.tv_sec * 1000 + tod.tv_usec / 1000;\n\t\tif (now-then>1000) ignore = 1; // ignore input that arrived during sleep\n\t\t\n\t\tfor (int i=0; i<INPUT_COUNT; i++) {\n\t\t\tinput = inputs[i];\n\t\t\twhile(read(input, &ev, sizeof(ev))==sizeof(ev)) {\n\t\t\t\tif (ignore) continue;\n\t\t\t\tval = ev.value;\n\t\t\t\tif (( ev.type != EV_KEY ) || ( val > REPEAT )) continue;\n\t\t\t\t",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xx\\keymon\\keymon.c",
        "start": 110,
        "end": 128,
        "startLoc": {
          "line": 110,
          "column": 2,
          "position": 767
        },
        "endLoc": {
          "line": 128,
          "column": 14,
          "position": 893
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\keymon\\keymon.c",
        "start": 125,
        "end": 120,
        "startLoc": {
          "line": 125,
          "column": 2,
          "position": 869
        },
        "endLoc": {
          "line": 120,
          "column": 11,
          "position": 827
        }
      }
    },
    {
      "format": "c",
      "lines": 41,
      "fragment": "witch (ev.code) {\n\t\t\t\t\tcase CODE_MENU:\n\t\t\t\t\t\tmenu_pressed = val;\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase CODE_POWER:\n\t\t\t\t\t\tpower_pressed = val;\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase CODE_PLUS:\n\t\t\t\t\t\tup_pressed = up_just_pressed = val;\n\t\t\t\t\t\tif (val) up_repeat_at = now + 300;\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase CODE_MINUS:\n\t\t\t\t\t\tdown_pressed = down_just_pressed = val;\n\t\t\t\t\t\tif (val) down_repeat_at = now + 300;\n\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (ignore) {\n\t\t\tmenu_pressed = 0;\n\t\t\tpower_pressed = 0;\n\t\t\tup_pressed = up_just_pressed = 0;\n\t\t\tdown_pressed = down_just_pressed = 0;\n\t\t\tup_repeat_at = 0;\n\t\t\tdown_repeat_at = 0;\n\t\t}\n\t\t\n\t\tif (up_just_pressed || (up_pressed && now>=up_repeat_at)) {\n\t\t\tif (menu_pressed) {\n\t\t\t\tval = GetBrightness();\n\t\t\t\tif (val<BRIGHTNESS_MAX) SetBrightness(++val);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tval = GetVolume();\n\t\t\t\tif (val<VOLUME_MAX) SetVolume(++val);\n\t\t\t}\n\t\t\t\n\t\t\tif (up_j",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\rg35xx\\keymon\\keymon.c",
        "start": 128,
        "end": 168,
        "startLoc": {
          "line": 128,
          "column": 2,
          "position": 895
        },
        "endLoc": {
          "line": 168,
          "column": 2,
          "position": 1225
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\keymon\\keymon.c",
        "start": 119,
        "end": 163,
        "startLoc": {
          "line": 119,
          "column": 2,
          "position": 821
        },
        "endLoc": {
          "line": 163,
          "column": 2,
          "position": 1203
        }
      }
    },
    {
      "format": "c",
      "lines": 63,
      "fragment": "// rg35xxplus\n#include <stdio.h>\n#include <unistd.h>\n#include <SDL2/SDL.h>\n#include <SDL2/SDL_image.h>\n\n#define FIXED_BPP\t\t2\n#define FIXED_DEPTH\t\t(FIXED_BPP * 8)\n\n#define RGBA_MASK_565\t0xF800, 0x07E0, 0x001F, 0x0000\n\nint main(int argc , char* argv[]) {\n\tif (argc<2) {\n\t\tputs(\"Usage: show.elf image.png delay\");\n\t\treturn 0;\n\t}\n\t\n\tchar path[256];\n\tstrncpy(path,argv[1],256);\n\tif (access(path, F_OK)!=0) return 0; // nothing to show :(\n\t\n\tint delay = argc>2 ? atoi(argv[2]) : 2;\n\t\n\tSDL_Init(SDL_INIT_VIDEO);\n\tSDL_ShowCursor(0);\n\t\n\tint w = 0;\n\tint h = 0;\n\tint p = 0;\n\tSDL_Window* window = SDL_CreateWindow(\"\", SDL_WINDOWPOS_UNDEFINED, SDL_WINDOWPOS_UNDEFINED, w,h, SDL_WINDOW_SHOWN);\n\t\n\tint rotate = 0;\n\tSDL_DisplayMode mode;\n\tSDL_GetCurrentDisplayMode(0, &mode);\n\tif (mode.h>mode.w) rotate = 3;\n\tw = mode.w;\n\th = mode.h;\n\tp = mode.w * FIXED_BPP;\n\t\n\tSDL_Renderer* renderer = SDL_CreateRenderer(window,-1,SDL_RENDERER_ACCELERATED|SDL_RENDERER_PRESENTVSYNC);\n\tSDL_Texture* texture = SDL_CreateTexture(renderer,SDL_PIXELFORMAT_RGB565, SDL_TEXTUREACCESS_STREAMING, w,h);\n\tSDL_Surface* screen = SDL_CreateRGBSurfaceFrom(NULL, w,h, FIXED_DEPTH, p, RGBA_MASK_565);\n\t\n\tSDL_LockTexture(texture,NULL,&screen->pixels,&screen->pitch);\n\tSDL_FillRect(screen, NULL, 0);\n\tSDL_Surface* img = IMG_Load(path);\n\tSDL_BlitSurface(img, NULL, screen, &(SDL_Rect){(screen->w-img->w)/2,(screen->h-img->h)/2});\n\tSDL_FreeSurface(img);\n\tSDL_UnlockTexture(texture);\n\n\tif (rotate) SDL_RenderCopyEx(renderer,texture,NULL,&(SDL_Rect){0,w,w,h},rotate*90,&(SDL_Point){0,0},SDL_FLIP_NONE);\n\telse SDL_RenderCopy(renderer, texture, NULL,NULL",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my355\\show\\show.c",
        "start": 1,
        "end": 63,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 63,
          "column": 2,
          "position": 597
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\show\\show.c",
        "start": 1,
        "end": 63,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 63,
          "column": 2,
          "position": 566
        }
      }
    },
    {
      "format": "c",
      "lines": 16,
      "fragment": "e <sys/mman.h>\n\n#include <fcntl.h>\n#include <unistd.h>\n#include <errno.h>\n#include <pthread.h>\n\n#include <msettings.h>\n\n#include \"defines.h\"\n#include \"platform.h\"\n#include \"api.h\"\n#include \"utils.h\"\n\n#include \"scaler.h\"\n\nint on_hdmi = 0;\n\n///////////////////////////////\n\n#define LID_PATH \"/sys/devices/pla",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my355\\platform\\platform.c",
        "start": 27,
        "end": 42,
        "startLoc": {
          "line": 27,
          "column": 1,
          "position": 37
        },
        "endLoc": {
          "line": 42,
          "column": 32,
          "position": 156
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\platform\\platform.c",
        "start": 114,
        "end": 129,
        "startLoc": {
          "line": 114,
          "column": 1,
          "position": 181
        },
        "endLoc": {
          "line": 129,
          "column": 7,
          "position": 300
        }
      }
    },
    {
      "format": "c",
      "lines": 18,
      "fragment": "fine LID_PATH \"/sys/devices/platform/hall-mh248/hallvalue\" // 1 open, 0 closed\nvoid PLAT_initLid(void) {\n\tlid.has_lid = exists(LID_PATH);\n}\nint PLAT_lidChanged(int* state) {\n\tif (lid.has_lid) {\n\t\tint lid_open = getInt(LID_PATH);\n\t\tif (lid_open!=lid.is_open) {\n\t\t\tlid.is_open = lid_open;\n\t\t\tif (state) *state = li",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my355\\platform\\platform.c",
        "start": 42,
        "end": 59,
        "startLoc": {
          "line": 42,
          "column": 1,
          "position": 156
        },
        "endLoc": {
          "line": 59,
          "column": 4,
          "position": 230
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 21,
        "end": 35,
        "startLoc": {
          "line": 21,
          "column": 1,
          "position": 21
        },
        "endLoc": {
          "line": 35,
          "column": 7,
          "position": 92
        }
      }
    },
    {
      "format": "c",
      "lines": 24,
      "fragment": "put(void) {\n\tSDL_InitSubSystem(SDL_INIT_JOYSTICK);\n\tjoystick = SDL_JoystickOpen(0);\n}\nvoid PLAT_quitInput(void) {\n\tSDL_JoystickClose(joystick);\n\tSDL_QuitSubSystem(SDL_INIT_JOYSTICK);\n}\n\n///////////////////////////////\n\n#define BLANK_PATH \"/sys/class/backlight/backlight/bl_power\"\n#define HDMI_STATE_PATH \"/sys/class/drm/card0-HDMI-A-1/status\"\n\nstatic int HDMI_enabled(void) {\n\tchar value[64];\n\tgetFile(HDMI_STATE_PATH, value,",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my355\\platform\\platform.c",
        "start": 65,
        "end": 88,
        "startLoc": {
          "line": 65,
          "column": 1,
          "position": 276
        },
        "endLoc": {
          "line": 88,
          "column": 9,
          "position": 420
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 35,
        "end": 57,
        "startLoc": {
          "line": 35,
          "column": 1,
          "position": 90
        },
        "endLoc": {
          "line": 57,
          "column": 18,
          "position": 233
        }
      }
    },
    {
      "format": "c",
      "lines": 8,
      "fragment": "e* target;\n\tSDL_Texture* effect;\n\n\tSDL_Surface* buffer;\n\tSDL_Surface* screen;\n\t\n\tGFX_Renderer* blit; // yeesh\n\t\n\tint width;\n\tint height;\n\tint pitch;\n\tint sharpness;\n} vid;\n\nstatic int device_width;\nstatic int device_height;\nstatic int device_pitch;\nstatic int rotate = 0;\nSDL_Surface*",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my355\\platform\\platform.c",
        "start": 94,
        "end": 101,
        "startLoc": {
          "line": 94,
          "column": 2,
          "position": 440
        },
        "endLoc": {
          "line": 101,
          "column": 4,
          "position": 513
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 60,
        "end": 67,
        "startLoc": {
          "line": 60,
          "column": 2,
          "position": 249
        },
        "endLoc": {
          "line": 67,
          "column": 9,
          "position": 322
        }
      }
    },
    {
      "format": "c",
      "lines": 23,
      "fragment": " is_cubexx = exactMatch(\"RGcubexx\", model);\n\t// is_rg34xx = exactMatch(\"RG34xx\", model);\n\t\n\tSDL_version compiled;\n\tSDL_version linked;\n\tSDL_VERSION(&compiled);\n\tSDL_GetVersion(&linked);\n\tLOG_info(\"Compiled SDL version %d.%d.%d ...\\n\", compiled.major, compiled.minor, compiled.patch);\n\tLOG_info(\"Linked SDL version %d.%d.%d.\\n\", linked.major, linked.minor, linked.patch);\n\n\tint num_displays = SDL_GetNumVideoDisplays();\n\tLOG_info(\"SDL_GetNumVideoDisplays(): %i\\n\", num_displays);\n\n\tLOG_info(\"Available video drivers:\\n\");\n\tfor (int i=0; i<SDL_GetNumVideoDrivers(); i++) {\n\t\tLOG_info(\"- %s\\n\", SDL_GetVideoDriver(i));\n\t}\n\tLOG_info(\"Current video driver: %s\\n\", SDL_GetCurrentVideoDriver())",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my355\\platform\\platform.c",
        "start": 102,
        "end": 124,
        "startLoc": {
          "line": 102,
          "column": 13,
          "position": 531
        },
        "endLoc": {
          "line": 124,
          "column": 9,
          "position": 749
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 65,
        "end": 87,
        "startLoc": {
          "line": 65,
          "column": 6,
          "position": 317
        },
        "endLoc": {
          "line": 87,
          "column": 3,
          "position": 535
        }
      }
    },
    {
      "format": "c",
      "lines": 14,
      "fragment": "\n\tSDL_DisplayMode mode;\n\tfor (int i=0; i<SDL_GetNumDisplayModes(0); i++) {\n\t\tSDL_GetDisplayMode(0, i, &mode);\n\t\tLOG_info(\"- %ix%i (%s)\\n\", mode.w,mode.h, SDL_GetPixelFormatName(mode.format));\n\t}\n\tSDL_GetCurrentDisplayMode(0, &mode);\n\tLOG_info(\"Current display mode: %ix%i (%s)\\n\", mode.w,mode.h, SDL_GetPixelFormatName(mode.format));\n\n\t// SDL_SetHint(SDL_HINT_RENDER_VSYNC,\"0\"); // ignored\n\n\ti",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my355\\platform\\platform.c",
        "start": 131,
        "end": 144,
        "startLoc": {
          "line": 131,
          "column": 2,
          "position": 813
        },
        "endLoc": {
          "line": 144,
          "column": 25,
          "position": 906
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\platform\\platform.c",
        "start": 451,
        "end": 464,
        "startLoc": {
          "line": 451,
          "column": 16,
          "position": 4410
        },
        "endLoc": {
          "line": 464,
          "column": 16,
          "position": 4503
        }
      }
    },
    {
      "format": "c",
      "lines": 28,
      "fragment": " w = FIXED_WIDTH;\n\tint h = FIXED_HEIGHT;\n\tint p = FIXED_PITCH;\n\tif (HDMI_enabled()) { // can't use getHDMI() from settings because it hasn't be initialized yet\n\t\tw = HDMI_WIDTH;\n\t\th = HDMI_HEIGHT;\n\t\tp = HDMI_PITCH;\n\t\ton_hdmi = 1;\n\t}\n\t\n\tSDL_InitSubSystem(SDL_INIT_VIDEO);\n\tSDL_ShowCursor(0);\n\t\n\tvid.window   = SDL_CreateWindow(\"\", SDL_WINDOWPOS_UNDEFINED, SDL_WINDOWPOS_UNDEFINED, w,h, SDL_WINDOW_SHOWN);\n\t// LOG_info(\"window size: %ix%i\\n\", w,h);\n\t\n\t// SDL_DisplayMode mode;\n\tSDL_GetCurrentDisplayMode(0, &mode);\n\tLOG_info(\"Current display mode: %ix%i (%s)\\n\", mode.w,mode.h, SDL_GetPixelFormatName(mode.format));\n\tif (mode.h>mode.w) rotate = 3; // no longer set on 28xx (because of SDL2 rotation patch?)\n\tvid.renderer = SDL_CreateRenderer(vid.window,-1,SDL_RENDERER_ACCELERATED|SDL_RENDERER_PRESENTVSYNC);\n\t// SDL_RenderSetLogicalSize(vid.renderer, w,h); // TODO: wrong, but without and with the below it's even wrong-er\n\t\n\t// int renderer_width,renderer_height;\n\t// SDL_GetRendererOutputSize(vid.renderer, &renderer_width, &renderer_height);\n\t// LOG_info(\"output size: %ix%i\\n\", renderer_width, renderer_height);\n\t// if (renderer_width!=w) { // I think this can only be hdmi\n\t// \tfloat x_scale = (float)renderer_width / w;\n\t// \tfloat y_scale = (float)renderer_height / h;\n\t// \tSDL_SetWindowSize(vid.window, w / x_scale, h / y_scale);\n\t//\n\t// \tSDL_GetRendererOutputSize(vid.renderer, &rende",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my355\\platform\\platform.c",
        "start": 145,
        "end": 172,
        "startLoc": {
          "line": 145,
          "column": 2,
          "position": 909
        },
        "endLoc": {
          "line": 172,
          "column": 17,
          "position": 1054
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\platform\\platform.c",
        "start": 465,
        "end": 282,
        "startLoc": {
          "line": 465,
          "column": 2,
          "position": 4509
        },
        "endLoc": {
          "line": 282,
          "column": 26,
          "position": 2248
        }
      }
    },
    {
      "format": "c",
      "lines": 359,
      "fragment": "/ \tx_scale = (float)renderer_width / w;\n\t// \ty_scale = (float)renderer_height / h;\n\t// \tSDL_RenderSetScale(vid.renderer, x_scale,y_scale);\n\t//\n\t// \t// for some reason we need to clear and present\n\t// \t// after setting the window size or we'll miss\n\t// \t// the first frame\n\t// \tSDL_RenderClear(vid.renderer);\n\t// \tSDL_RenderPresent(vid.renderer);\n\t// }\n\n\tSDL_RendererInfo info;\n\tSDL_GetRendererInfo(vid.renderer, &info);\n\tLOG_info(\"Current render driver: %s\\n\", info.name);\n\t\n\tSDL_SetHint(SDL_HINT_RENDER_SCALE_QUALITY,\"1\"); // linear\n\tvid.texture = SDL_CreateTexture(vid.renderer,SDL_PIXELFORMAT_RGB565, SDL_TEXTUREACCESS_STREAMING, w,h);\n\tvid.target\t= NULL; // only needed for non-native sizes\n\t\n\t// TODO: doesn't work here\n\t// SDL_SetTextureScaleMode(vid.texture, SDL_ScaleModeLinear); // we always start at device size so use linear for better upscaling over hdmi\n\t\n\t// SDL_ScaleMode scale_mode;\n\t// SDL_GetTextureScaleMode(vid.texture, &scale_mode);\n\t// LOG_info(\"texture scale mode: %i\\n\", scale_mode);\n\t\n\t// int format;\n\t// int access_;\n\t// SDL_QueryTexture(vid.texture, &format, &access_, NULL,NULL);\n\t// LOG_info(\"texture format: %s (streaming: %i)\\n\", SDL_GetPixelFormatName(format), access_==SDL_TEXTUREACCESS_STREAMING);\n\t\n\tvid.buffer\t= SDL_CreateRGBSurfaceFrom(NULL, w,h, FIXED_DEPTH, p, RGBA_MASK_565);\n\tvid.screen\t= SDL_CreateRGBSurface(SDL_SWSURFACE, w,h, FIXED_DEPTH, RGBA_MASK_565);\n\tvid.width\t= w;\n\tvid.height\t= h;\n\tvid.pitch\t= p;\n\t\n\tdevice_width\t= w;\n\tdevice_height\t= h;\n\tdevice_pitch\t= p;\n\t\n\tvid.sharpness = SHARPNESS_SOFT;\n\t\n\treturn vid.screen;\n}\n\nstatic void clearVideo(void) {\n\tSDL_FillRect(vid.screen, NULL, 0);\n\tfor (int i=0; i<3; i++) {\n\t\tSDL_RenderClear(vid.renderer);\n\t\tSDL_RenderPresent(vid.renderer);\n\t}\n}\n\nvoid PLAT_quitVideo(void) {\n\t// clearVideo();\n\n\tSDL_FreeSurface(vid.screen);\n\tSDL_FreeSurface(vid.buffer);\n\tif (vid.target) SDL_DestroyTexture(vid.target);\n\tif (vid.effect) SDL_DestroyTexture(vid.effect);\n\tSDL_DestroyTexture(vid.texture);\n\tSDL_DestroyRenderer(vid.renderer);\n\tSDL_DestroyWindow(vid.window);\n\n\t// system(\"cat /dev/zero > /dev/fb0 2>/dev/null\");\n\tSDL_Quit();\n}\n\nvoid PLAT_clearVideo(SDL_Surface* screen) {\n\tSDL_FillRect(screen, NULL, 0); // TODO: revisit\n}\nvoid PLAT_clearAll(void) {\n\tPLAT_clearVideo(vid.screen); // TODO: revist\n\tSDL_RenderClear(vid.renderer);\n}\n\nvoid PLAT_setVsync(int vsync) {\n\t// buh\n}\n\nstatic int hard_scale = 4; // TODO: base src size, eg. 160x144 can be 4\n\nstatic void resizeVideo(int w, int h, int p) {\n\tif (w==vid.width && h==vid.height && p==vid.pitch) return;\n\t\n\t// TODO: minarch disables crisp (and nn upscale before linear downscale) when native\n\t\n\tif (w>=device_width && h>=device_height) hard_scale = 1;\n\telse if (h>=160) hard_scale = 2; // limits gba and up to 2x (seems sufficient for 640x480)\n\telse hard_scale = 4;\n\n\tLOG_info(\"resizeVideo(%i,%i,%i) hard_scale: %i crisp: %i\\n\",w,h,p, hard_scale,vid.sharpness==SHARPNESS_CRISP);\n\n\tSDL_FreeSurface(vid.buffer);\n\tSDL_DestroyTexture(vid.texture);\n\tif (vid.target) SDL_DestroyTexture(vid.target);\n\t\n\tSDL_SetHintWithPriority(SDL_HINT_RENDER_SCALE_QUALITY, vid.sharpness==SHARPNESS_SOFT?\"1\":\"0\", SDL_HINT_OVERRIDE);\n\tvid.texture = SDL_CreateTexture(vid.renderer,SDL_PIXELFORMAT_RGB565, SDL_TEXTUREACCESS_STREAMING, w,h);\n\t\n\tif (vid.sharpness==SHARPNESS_CRISP) {\n\t\tSDL_SetHintWithPriority(SDL_HINT_RENDER_SCALE_QUALITY, \"1\", SDL_HINT_OVERRIDE);\n\t\tvid.target = SDL_CreateTexture(vid.renderer,SDL_PIXELFORMAT_RGB565, SDL_TEXTUREACCESS_TARGET, w * hard_scale,h * hard_scale);\n\t}\n\telse {\n\t\tvid.target = NULL;\n\t}\n\n\tvid.buffer\t= SDL_CreateRGBSurfaceFrom(NULL, w,h, FIXED_DEPTH, p, RGBA_MASK_565);\n\n\tvid.width\t= w;\n\tvid.height\t= h;\n\tvid.pitch\t= p;\n}\n\nSDL_Surface* PLAT_resizeVideo(int w, int h, int p) {\n\tresizeVideo(w,h,p);\n\treturn vid.screen;\n}\n\nvoid PLAT_setVideoScaleClip(int x, int y, int width, int height) {\n\t// buh\n}\nvoid PLAT_setNearestNeighbor(int enabled) {\n\t// buh\n}\nvoid PLAT_setSharpness(int sharpness) {\n\tif (vid.sharpness==sharpness) return;\n\tint p = vid.pitch;\n\tvid.pitch = 0;\n\tvid.sharpness = sharpness;\n\tresizeVideo(vid.width,vid.height,p);\n}\n\nstatic struct FX_Context {\n\tint scale;\n\tint type;\n\tint color;\n\tint next_scale;\n\tint next_type;\n\tint next_color;\n\tint live_type;\n} effect = {\n\t.scale = 1,\n\t.next_scale = 1,\n\t.type = EFFECT_NONE,\n\t.next_type = EFFECT_NONE,\n\t.live_type = EFFECT_NONE,\n\t.color = 0,\n\t.next_color = 0,\n};\nstatic void rgb565_to_rgb888(uint32_t rgb565, uint8_t *r, uint8_t *g, uint8_t *b) {\n    // Extract the red component (5 bits)\n    uint8_t red = (rgb565 >> 11) & 0x1F;\n    // Extract the green component (6 bits)\n    uint8_t green = (rgb565 >> 5) & 0x3F;\n    // Extract the blue component (5 bits)\n    uint8_t blue = rgb565 & 0x1F;\n\n    // Scale the values to 8-bit range\n    *r = (red << 3) | (red >> 2);\n    *g = (green << 2) | (green >> 4);\n    *b = (blue << 3) | (blue >> 2);\n}\nstatic void updateEffect(void) {\n\tif (effect.next_scale==effect.scale && effect.next_type==effect.type && effect.next_color==effect.color) return; // unchanged\n\t\n\tint live_scale = effect.scale;\n\tint live_color = effect.color;\n\teffect.scale = effect.next_scale;\n\teffect.type = effect.next_type;\n\teffect.color = effect.next_color;\n\t\n\tif (effect.type==EFFECT_NONE) return; // disabled\n\tif (effect.type==effect.live_type && effect.scale==live_scale && effect.color==live_color) return; // already loaded\n\t\n\tchar* effect_path;\n\tint opacity = 128; // 1 - 1/2 = 50%\n\tif (effect.type==EFFECT_LINE) {\n\t\tif (effect.scale<3) {\n\t\t\teffect_path = RES_PATH \"/line-2.png\";\n\t\t}\n\t\telse if (effect.scale<4) {\n\t\t\teffect_path = RES_PATH \"/line-3.png\";\n\t\t}\n\t\telse if (effect.scale<5) {\n\t\t\teffect_path = RES_PATH \"/line-4.png\";\n\t\t}\n\t\telse if (effect.scale<6) {\n\t\t\teffect_path = RES_PATH \"/line-5.png\";\n\t\t}\n\t\telse if (effect.scale<8) {\n\t\t\teffect_path = RES_PATH \"/line-6.png\";\n\t\t}\n\t\telse {\n\t\t\teffect_path = RES_PATH \"/line-8.png\";\n\t\t}\n\t}\n\telse if (effect.type==EFFECT_GRID) {\n\t\tif (effect.scale<3) {\n\t\t\teffect_path = RES_PATH \"/grid-2.png\";\n\t\t\topacity = 64; // 1 - 3/4 = 25%\n\t\t}\n\t\telse if (effect.scale<4) {\n\t\t\teffect_path = RES_PATH \"/grid-3.png\";\n\t\t\topacity = 112; // 1 - 5/9 = ~44%\n\t\t}\n\t\telse if (effect.scale<5) {\n\t\t\teffect_path = RES_PATH \"/grid-4.png\";\n\t\t\topacity = 144; // 1 - 7/16 = ~56%\n\t\t}\n\t\telse if (effect.scale<6) {\n\t\t\teffect_path = RES_PATH \"/grid-5.png\";\n\t\t\topacity = 160; // 1 - 9/25 = ~64%\n\t\t}\n\t\telse if (effect.scale<8) {\n\t\t\teffect_path = RES_PATH \"/grid-6.png\";\n\t\t\topacity = 112; // 1 - 5/9 = ~44%\n\t\t}\n\t\telse if (effect.scale<11) {\n\t\t\teffect_path = RES_PATH \"/grid-8.png\";\n\t\t\topacity = 144; // 1 - 7/16 = ~56%\n\t\t}\n\t\telse {\n\t\t\teffect_path = RES_PATH \"/grid-11.png\";\n\t\t\topacity = 136; // 1 - 57/121 = ~52%\n\t\t}\n\t}\n\t\n\t// LOG_info(\"effect: %s opacity: %i\\n\", effect_path, opacity);\n\tSDL_Surface* tmp = IMG_Load(effect_path);\n\tif (tmp) {\n\t\tif (effect.type==EFFECT_GRID) {\n\t\t\tif (effect.color) {\n\t\t\t\t// LOG_info(\"dmg color grid...\\n\");\n\t\t\t\n\t\t\t\tuint8_t r,g,b;\n\t\t\t\trgb565_to_rgb888(effect.color,&r,&g,&b);\n\t\t\t\t// LOG_info(\"rgb %i,%i,%i\\n\",r,g,b);\n\t\t\t\t\n\t\t\t\tuint32_t* pixels = (uint32_t*)tmp->pixels;\n\t\t\t\tint width = tmp->w;\n\t\t\t\tint height = tmp->h;\n\t\t\t\tfor (int y = 0; y < height; ++y) {\n\t\t\t\t    for (int x = 0; x < width; ++x) {\n\t\t\t\t        uint32_t pixel = pixels[y * width + x];\n\t\t\t\t        uint8_t _,a;\n\t\t\t\t        SDL_GetRGBA(pixel, tmp->format, &_, &_, &_, &a);\n\t\t\t\t        if (a) pixels[y * width + x] = SDL_MapRGBA(tmp->format, r,g,b, a);\n\t\t\t\t    }\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (vid.effect) SDL_DestroyTexture(vid.effect);\n\t\tvid.effect = SDL_CreateTextureFromSurface(vid.renderer, tmp);\n\t\tSDL_SetTextureAlphaMod(vid.effect, opacity);\n\t\tSDL_FreeSurface(tmp);\n\t\teffect.live_type = effect.type;\n\t}\n\t}\nvoid PLAT_setEffect(int next_type) {\n\teffect.next_type = next_type;\n}\nvoid PLAT_setEffectColor(int next_color) {\n\teffect.next_color = next_color;\n}\nvoid PLAT_vsync(int remaining) {\n\tif (remaining>0) SDL_Delay(remaining);\n}\n\nscaler_t PLAT_getScaler(GFX_Renderer* renderer) {\n\t// LOG_info(\"getScaler for scale: %i\\n\", renderer->scale);\n\teffect.next_scale = renderer->scale;\n\treturn scale1x1_c16;\n}\n\nvoid PLAT_blitRenderer(GFX_Renderer* renderer) {\n\tvid.blit = renderer;\n\tSDL_RenderClear(vid.renderer);\n\tresizeVideo(vid.blit->true_w,vid.blit->true_h,vid.blit->src_p);\n}\n\nvoid PLAT_flip(SDL_Surface* IGNORED, int ignored) {\n\t\n\ton_hdmi = GetHDMI(); // use settings instead of getInt(HDMI_STATE_PATH)\n\t\n\tif (!vid.blit) {\n\t\tresizeVideo(device_width,device_height,FIXED_PITCH); // !!!???\n\t\tSDL_UpdateTexture(vid.texture,NULL,vid.screen->pixels,vid.screen->pitch);\n\t\tif (rotate && !on_hdmi) SDL_RenderCopyEx(vid.renderer,vid.texture,NULL,&(SDL_Rect){0,device_width,device_width,device_height},rotate*90,&(SDL_Point){0,0},SDL_FLIP_NONE);\n\t\telse SDL_RenderCopy(vid.renderer, vid.texture, NULL,NULL);\n\t\tSDL_RenderPresent(vid.renderer);\n\t\treturn;\n\t}\n\t\n\t// uint32_t then = SDL_GetTicks();\n\tSDL_UpdateTexture(vid.texture,NULL,vid.blit->src,vid.blit->src_p);\n\t// LOG_info(\"blit blocked for %ims (%i,%i)\\n\", SDL_GetTicks()-then,vid.buffer->w,vid.buffer->h);\n\t\n\tSDL_Texture* target = vid.texture;\n\tint x = vid.blit->src_x;\n\tint y = vid.blit->src_y;\n\tint w = vid.blit->src_w;\n\tint h = vid.blit->src_h;\n\tif (vid.sharpness==SHARPNESS_CRISP) {\n\t\tSDL_SetRenderTarget(vid.renderer,vid.target);\n\t\tSDL_RenderCopy(vid.renderer, vid.texture, NULL,NULL);\n\t\tSDL_SetRenderTarget(vid.renderer,NULL);\n\t\tx *= hard_scale;\n\t\ty *= hard_scale;\n\t\tw *= hard_scale;\n\t\th *= hard_scale;\n\t\ttarget = vid.target;\n\t}\n\t\n\tSDL_Rect* src_rect = &(SDL_Rect){x,y,w,h};\n\tSDL_Rect* dst_rect = &(SDL_Rect){0,0,device_width,device_height};\n\tif (vid.blit->aspect==0) { // native or cropped\n\t\t// LOG_info(\"src_rect %i,%i %ix%i\\n\",src_rect->x,src_rect->y,src_rect->w,src_rect->h);\n\n\t\tint w = vid.blit->src_w * vid.blit->scale;\n\t\tint h = vid.blit->src_h * vid.blit->scale;\n\t\tint x = (device_width - w) / 2;\n\t\tint y = (device_height - h) / 2;\n\t\tdst_rect->x = x;\n\t\tdst_rect->y = y;\n\t\tdst_rect->w = w;\n\t\tdst_rect->h = h;\n\t\t\n\t\t// LOG_info(\"dst_rect %i,%i %ix%i\\n\",dst_rect->x,dst_rect->y,dst_rect->w,dst_rect->h);\n\t}\n\telse if (vid.blit->aspect>0) { // aspect\n\t\tint h = device_height;\n\t\tint w = h * vid.blit->aspect;\n\t\tif (w>device_width) {\n\t\t\tdouble ratio = 1 / vid.blit->aspect;\n\t\t\tw = device_width;\n\t\t\th = w * ratio;\n\t\t}\n\t\tint x = (device_width - w) / 2;\n\t\tint y = (device_height - h) / 2;\n\t\t// dst_rect = &(SDL_Rect){x,y,w,h};\n\t\tdst_rect->x = x;\n\t\tdst_rect->y = y;\n\t\tdst_rect->w = w;\n\t\tdst_rect->h = h;\n\t}\n\t\n\tint ox,oy;\n\toy = (device_width-device_height)/2;\n\tox = -oy;\n\tif (rotate && !on_hdmi) SDL_RenderCopyEx(vid.renderer,target,src_rect,&(SDL_Rect){ox+dst_rect->x,oy+dst_rect->y,dst_rect->w,dst_rect->h},rotate*90,NULL,SDL_FLIP_NONE);\n\telse SDL_RenderCopy(vid.renderer, target, src_rect, dst_rect);\n\t\n\tupdateEffect();\n\tif (vid.blit && effect.type!=EFFECT_NONE && vid.effect) {\n\t\t// ox = effect.scale - (dst_rect->x % effect.scale);\n\t\t// oy = effect.scale - (dst_rect->y % effect.scale);\n\t\t// if (ox==effect.scale) ox = 0;\n\t\t// if (oy==effect.scale) oy = 0;\n\t\t// LOG_info(\"rotate: %i ox: %i oy: %i\\n\", rotate, ox,oy);\n\t\tif (rotate && !on_hdmi) SDL_RenderCopyEx(",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my355\\platform\\platform.c",
        "start": 176,
        "end": 534,
        "startLoc": {
          "line": 176,
          "column": 2,
          "position": 1087
        },
        "endLoc": {
          "line": 534,
          "column": 2,
          "position": 4643
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 286,
        "end": 630,
        "startLoc": {
          "line": 286,
          "column": 2,
          "position": 2259
        },
        "endLoc": {
          "line": 630,
          "column": 2,
          "position": 5558
        }
      }
    },
    {
      "format": "c",
      "lines": 68,
      "fragment": "vid.renderer,vid.effect,&(SDL_Rect){0,0,dst_rect->w,dst_rect->h},&(SDL_Rect){ox+dst_rect->x,oy+dst_rect->y,dst_rect->w,dst_rect->h},rotate*90,NULL,SDL_FLIP_NONE);\n\t\telse SDL_RenderCopy(vid.renderer, vid.effect, &(SDL_Rect){0,0,dst_rect->w,dst_rect->h},dst_rect);\n\t}\n\t\n\t// uint32_t then = SDL_GetTicks();\n\tSDL_RenderPresent(vid.renderer);\n\t// LOG_info(\"SDL_RenderPresent blocked for %ims\\n\", SDL_GetTicks()-then);\n\tvid.blit = NULL;\n}\n\nint PLAT_supportsOverscan(void) { return 0; }\n\n///////////////////////////////\n\n// TODO: \n#define OVERLAY_WIDTH PILL_SIZE // unscaled\n#define OVERLAY_HEIGHT PILL_SIZE // unscaled\n#define OVERLAY_BPP 4\n#define OVERLAY_DEPTH 16\n#define OVERLAY_PITCH (OVERLAY_WIDTH * OVERLAY_BPP) // unscaled\n#define OVERLAY_RGBA_MASK 0x00ff0000,0x0000ff00,0x000000ff,0xff000000 // ARGB\nstatic struct OVL_Context {\n\tSDL_Surface* overlay;\n} ovl;\n\nSDL_Surface* PLAT_initOverlay(void) {\n\tovl.overlay = SDL_CreateRGBSurface(SDL_SWSURFACE, SCALE2(OVERLAY_WIDTH,OVERLAY_HEIGHT),OVERLAY_DEPTH,OVERLAY_RGBA_MASK);\n\treturn ovl.overlay;\n}\nvoid PLAT_quitOverlay(void) {\n\tif (ovl.overlay) SDL_FreeSurface(ovl.overlay);\n}\nvoid PLAT_enableOverlay(int enable) {\n\n}\n\n///////////////////////////////\n\nstatic int online = 0;\nvoid PLAT_getBatteryStatus(int* is_charging, int* charge) {\n\tPLAT_getBatteryStatusFine(is_charging, charge);\n\n\t// worry less about battery and more about the game you're playing\n\t     if (*charge>80) *charge = 100;\n\telse if (*charge>60) *charge =  80;\n\telse if (*charge>40) *charge =  60;\n\telse if (*charge>20) *charge =  40;\n\telse if (*charge>10) *charge =  20;\n\telse           \t\t *cha",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my355\\platform\\platform.c",
        "start": 534,
        "end": 601,
        "startLoc": {
          "line": 534,
          "column": 2,
          "position": 4644
        },
        "endLoc": {
          "line": 601,
          "column": 4,
          "position": 5110
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 456,
        "end": 921,
        "startLoc": {
          "line": 456,
          "column": 5,
          "position": 4316
        },
        "endLoc": {
          "line": 921,
          "column": 2,
          "position": 8690
        }
      }
    },
    {
      "format": "c",
      "lines": 11,
      "fragment": "rge =  10;\n}\n\nvoid PLAT_getBatteryStatusFine(int* is_charging, int* charge)\n{\n\t// *is_charging = 0;\n\t// *charge = PWR_LOW_CHARGE;\n\t// return;\n\t\n\t*is_charging = getInt(\"/sys/class/power_supply/ac/online",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my355\\platform\\platform.c",
        "start": 601,
        "end": 611,
        "startLoc": {
          "line": 601,
          "column": 4,
          "position": 5111
        },
        "endLoc": {
          "line": 611,
          "column": 45,
          "position": 5161
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 526,
        "end": 931,
        "startLoc": {
          "line": 526,
          "column": 19,
          "position": 4778
        },
        "endLoc": {
          "line": 931,
          "column": 60,
          "position": 8741
        }
      }
    },
    {
      "format": "c",
      "lines": 20,
      "fragment": "\"/sys/class/leds/work/brightness\"\nvoid PLAT_enableBacklight(int enable) {\n\tif (enable) {\n\t\tputInt(BLANK_PATH, FB_BLANK_UNBLANK); // wake\n\t\tSetBrightness(GetBrightness());\n\t\tputInt(LED_PATH,0);\n\t}\n\telse {\n\t\tputInt(BLANK_PATH, FB_BLANK_POWERDOWN); // sleep\n\t\tSetRawBrightness(0);\n\t\tputInt(LED_PATH,255);\n\t}\n}\n\nvoid PLAT_powerOff(void) {\n\tsystem(\"rm -f /tmp/nextui_exec && sync\");\n\tsleep(",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my355\\platform\\platform.c",
        "start": 624,
        "end": 643,
        "startLoc": {
          "line": 624,
          "column": 2,
          "position": 5215
        },
        "endLoc": {
          "line": 643,
          "column": 3,
          "position": 5347
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 547,
        "end": 720,
        "startLoc": {
          "line": 547,
          "column": 2,
          "position": 4890
        },
        "endLoc": {
          "line": 720,
          "column": 7,
          "position": 6183
        }
      }
    },
    {
      "format": "c",
      "lines": 13,
      "fragment": "(\"rm -f /tmp/nextui_exec && sync\");\n\tsleep(2);\n\n\tSetRawVolume(MUTE_VOLUME_RAW);\n\tPLAT_enableBacklight(0);\n\tsystem(\"echo 255 > /sys/class/leds/work/brightness\");\n\tSND_quit();\n\tVIB_quit();\n\tPWR_quit();\n\tGFX_quit();\n\n\t// system(",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my355\\platform\\platform.c",
        "start": 639,
        "end": 651,
        "startLoc": {
          "line": 639,
          "column": 1,
          "position": 5331
        },
        "endLoc": {
          "line": 651,
          "column": 5,
          "position": 5408
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\platform\\platform.c",
        "start": 951,
        "end": 963,
        "startLoc": {
          "line": 951,
          "column": 1,
          "position": 8817
        },
        "endLoc": {
          "line": 963,
          "column": 7,
          "position": 8894
        }
      }
    },
    {
      "format": "c",
      "lines": 9,
      "fragment": "ass/leds/work/brightness\");\n\tSND_quit();\n\tVIB_quit();\n\tPWR_quit();\n\tGFX_quit();\n\n\t// system(\"cat /dev/zero > /dev/fb0 2>/dev/null\");\n\t//",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my355\\platform\\platform.c",
        "start": 644,
        "end": 652,
        "startLoc": {
          "line": 644,
          "column": 2,
          "position": 5371
        },
        "endLoc": {
          "line": 652,
          "column": 13,
          "position": 5421
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rg35xx\\platform\\platform.c",
        "start": 590,
        "end": 598,
        "startLoc": {
          "line": 590,
          "column": 4,
          "position": 5545
        },
        "endLoc": {
          "line": 598,
          "column": 18,
          "position": 5595
        }
      }
    },
    {
      "format": "c",
      "lines": 39,
      "fragment": "o.h>\n#include <stdlib.h>\n#include <unistd.h>\n#include <fcntl.h>\n#include <sys/mman.h>\n#include <linux/fb.h>\n#include <sys/ioctl.h>\n#include <errno.h>\n#include <sys/stat.h>\n#include <dlfcn.h>\n#include <string.h>\n\n#include \"msettings.h\"\n\n///////////////////////////////////////\n\n#define SETTINGS_VERSION 2\ntypedef struct Settings {\n\tint version; // future proofing\n\tint brightness;\n\tint headphones;\n\tint speaker;\n\tint unused[2]; // for future use\n\t// NOTE: doesn't really need to be persisted but still needs to be shared\n\tint jack; \n\tint hdmi; \n} Settings;\nstatic Settings DefaultSettings = {\n\t.version = SETTINGS_VERSION,\n\t.brightness = 2,\n\t.headphones = 4,\n\t.speaker = 8,\n\t.jack = 0,\n\t.hdmi = 0,\n};\nstatic Settings* settings;\n\n#define SHM_KEY \"",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my355\\libmsettings\\msettings.c",
        "start": 15,
        "end": 53,
        "startLoc": {
          "line": 15,
          "column": 1,
          "position": 14
        },
        "endLoc": {
          "line": 53,
          "column": 8,
          "position": 294
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\libmsettings\\msettings.c",
        "start": 14,
        "end": 60,
        "startLoc": {
          "line": 14,
          "column": 1,
          "position": 13
        },
        "endLoc": {
          "line": 60,
          "column": 13,
          "position": 305
        }
      }
    },
    {
      "format": "c",
      "lines": 7,
      "fragment": "e) {\n\tchar buffer[8];\n\tsprintf(buffer, \"%d\", value);\n\tputFile(path, buffer);\n}\n\nint exactMatch(char* str1, char* str2) {\n\tint len1 = str",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my355\\libmsettings\\msettings.c",
        "start": 91,
        "end": 97,
        "startLoc": {
          "line": 91,
          "column": 1,
          "position": 651
        },
        "endLoc": {
          "line": 97,
          "column": 5,
          "position": 699
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\my355\\platform\\platform.c",
        "start": 59,
        "end": 65,
        "startLoc": {
          "line": 59,
          "column": 1,
          "position": 228
        },
        "endLoc": {
          "line": 65,
          "column": 7,
          "position": 276
        }
      }
    },
    {
      "format": "c",
      "lines": 36,
      "fragment": "en1 = strlen(str1);\n\tif (len1!=strlen(str2)) return 0;\n\treturn (strncmp(str1,str2,len1)==0);\n}\n\n\n#define JACK_STATE_PATH \"/sys/class/gpio/gpio150/value\"\n#define HDMI_STATE_PATH \"/sys/class/drm/card0-HDMI-A-1/status\"\n\nstatic int JACK_enabled(void) {\n\treturn !getInt(JACK_STATE_PATH);\n}\nstatic int HDMI_enabled(void) {\n\tchar value[64];\n\tgetFile(HDMI_STATE_PATH, value, 64);\n\treturn exactMatch(value, \"connected\\n\");\n}\n\nvoid InitSettings(void) {\t\n\tsprintf(SettingsPath, \"%s/msettings.bin\", getenv(\"USERDATA_PATH\"));\n\t\n\tshm_fd = shm_open(SHM_KEY, O_RDWR | O_CREAT | O_EXCL, 0644); // see if it exists\n\tif (shm_fd==-1 && errno==EEXIST) { // already exists\n\t\tputs(\"Settings client\");\n\t\tshm_fd = shm_open(SHM_KEY, O_RDWR, 0644);\n\t\tsettings = mmap(NULL, shm_size, PROT_READ | PROT_WRITE, MAP_SHARED, shm_fd, 0);\n\t}\n\telse { // host\n\t\tputs(\"Settings host\"); // should always be keymon\n\t\tis_host = 1;\n\t\t// we created it so set initial size and populate\n\t\tftruncate(shm_fd, shm_size);\n\t\tsettings = mmap(NULL, shm_size,",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my355\\libmsettings\\msettings.c",
        "start": 94,
        "end": 129,
        "startLoc": {
          "line": 94,
          "column": 2,
          "position": 694
        },
        "endLoc": {
          "line": 129,
          "column": 13,
          "position": 1001
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\libmsettings\\msettings.c",
        "start": 57,
        "end": 91,
        "startLoc": {
          "line": 57,
          "column": 2,
          "position": 298
        },
        "endLoc": {
          "line": 91,
          "column": 7,
          "position": 600
        }
      }
    },
    {
      "format": "c",
      "lines": 8,
      "fragment": "SHARED, shm_fd, 0);\n\t\t\n\t\tint fd = open(SettingsPath, O_RDONLY);\n\t\tif (fd>=0) {\n\t\t\tread(fd, settings, shm_size);\n\t\t\t// TODO: use settings->version for future proofing?\n\t\t\tclose(fd);\n\t\t}\n\t\telse {\n\t\t\t// load d",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my355\\libmsettings\\msettings.c",
        "start": 130,
        "end": 137,
        "startLoc": {
          "line": 130,
          "column": 2,
          "position": 1015
        },
        "endLoc": {
          "line": 137,
          "column": 5,
          "position": 1069
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\libmsettings\\msettings.c",
        "start": 92,
        "end": 99,
        "startLoc": {
          "line": 92,
          "column": 16,
          "position": 616
        },
        "endLoc": {
          "line": 99,
          "column": 14,
          "position": 670
        }
      }
    },
    {
      "format": "c",
      "lines": 26,
      "fragment": " = 0;\n\t}\n\t\n\tint jack = JACK_enabled();\n\tint hdmi = HDMI_enabled();\n\tprintf(\"brightness: %i (hdmi: %i)\\nspeaker: %i (jack: %i)\\n\", settings->brightness, hdmi, settings->speaker, jack); fflush(stdout);\n\t\n\t// both of these set volume\n\tSetJack(jack);\n\tSetHDMI(hdmi);\n\t\n\tchar cmd[256];\n\tsprintf(cmd, \"amixer sset 'Playback Path' '%s' > /dev/null 2>&1\", GetJack() ? \"HP\" : \"SPK\");\n\tsystem(cmd);\n\n\tSetVolume(GetVolume());\n\tSetBrightness(GetBrightness());\n\t// system(\"echo $(< \" BRIGHTNESS_PATH \")\");\n}\nvoid QuitSettings(void) {",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my355\\libmsettings\\msettings.c",
        "start": 141,
        "end": 166,
        "startLoc": {
          "line": 141,
          "column": 2,
          "position": 1114
        },
        "endLoc": {
          "line": 166,
          "column": 17,
          "position": 1304
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\libmsettings\\msettings.c",
        "start": 97,
        "end": 123,
        "startLoc": {
          "line": 97,
          "column": 5,
          "position": 664
        },
        "endLoc": {
          "line": 123,
          "column": 30,
          "position": 856
        }
      }
    },
    {
      "format": "c",
      "lines": 27,
      "fragment": "\n\tint raw;\n\tswitch (value) {\n\t\t// TODO :revisit\n\t\tcase  0: raw =   1; break;\t// \n\t\tcase  1: raw =   6; break;\t// \n\t\tcase  2: raw =  10; break;\t// \n\t\tcase  3: raw =  16; break;\t// \n\t\tcase  4: raw =  32; break;\t// \n\t\tcase  5: raw =  48; break;\t// \n\t\tcase  6: raw =  64; break;\t// \n\t\tcase  7: raw =  96; break;\t// \n\t\tcase  8: raw = 128; break;\t// \n\t\tcase  9: raw = 192; break;\t// \n\t\tcase 10: raw = 255; break;\t// \n\t}\n\t\n\tSetRawBrightness(raw);\n\tsettings->brightness = value;\n\tSaveSettings();\n}\n\nint GetVolume(void) { // 0-20\n\tre",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my355\\libmsettings\\msettings.c",
        "start": 178,
        "end": 204,
        "startLoc": {
          "line": 178,
          "column": 2,
          "position": 1505
        },
        "endLoc": {
          "line": 204,
          "column": 7,
          "position": 1700
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\libmsettings\\msettings.c",
        "start": 135,
        "end": 158,
        "startLoc": {
          "line": 135,
          "column": 2,
          "position": 1035
        },
        "endLoc": {
          "line": 158,
          "column": 4,
          "position": 1234
        }
      }
    },
    {
      "format": "c",
      "lines": 27,
      "fragment": "e speaker (not headphone as that produces white noise)\n\t\tputs(\"mute\"); fflush(stdout);\n\t}\n\telse {\n\t\tsystem(\"amixer sset 'Playback Path' 'SPK' > /dev/null 2>&1\");\n\t\tputs(\"speaker\"); fflush(stdout);\n\t}\n\t\n\tchar cmd[256];\n\tsprintf(cmd, \"amixer sset 'SPK' %i%% > /dev/null 2>&1\", val);\n\tputs(cmd); fflush(stdout);\n\tsystem(cmd);\n}\n\n// monitored and set by thread in keymon\nint GetJack(void) {\n\t// printf(\"GetJack() %i\\n\", settings->jack); fflush(stdout);\n\treturn settings->jack;\n}\nvoid SetJack(int value) {\n\t// printf(\"SetJack(%i)\\n\", value); fflush(stdout);\n\t\n\t// char cmd[256];\n\t// sprintf(cmd, \"amixer cset name='Playback Path' '%s' &> /dev/nu",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my355\\libmsettings\\msettings.c",
        "start": 232,
        "end": 258,
        "startLoc": {
          "line": 232,
          "column": 2,
          "position": 1913
        },
        "endLoc": {
          "line": 258,
          "column": 2,
          "position": 2077
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\libmsettings\\msettings.c",
        "start": 175,
        "end": 203,
        "startLoc": {
          "line": 175,
          "column": 2,
          "position": 1381
        },
        "endLoc": {
          "line": 203,
          "column": 2,
          "position": 1520
        }
      }
    },
    {
      "format": "c",
      "lines": 22,
      "fragment": "lude <fcntl.h>\n#include <dirent.h>\n#include <linux/input.h>\n#include <pthread.h>\n\n#include <msettings.h>\n\n#include <sys/types.h>\n#include <sys/stat.h>\n#include <sys/ioctl.h>\n\n// #include \"defines.h\"\n\n#define VOLUME_MIN \t\t0\n#define VOLUME_MAX \t\t20\n#define BRIGHTNESS_MIN \t0\n#define BRIGHTNESS_MAX \t10\n\n// uses different codes from SDL\n#define CODE_MENU\t\t1\n#define CODE_PLUS\t\t115\n#define CODE_MINUS\t\t114\n\n//\tfor ev.value\n#define RELEASED\t0\n#define PRESSED\t\t1\n#define R",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my355\\keymon\\keymon.c",
        "start": 34,
        "end": 55,
        "startLoc": {
          "line": 34,
          "column": 1,
          "position": 36
        },
        "endLoc": {
          "line": 55,
          "column": 4,
          "position": 264
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\libmsettings\\msettings.c",
        "start": 50,
        "end": 65,
        "startLoc": {
          "line": 50,
          "column": 1,
          "position": 220
        },
        "endLoc": {
          "line": 65,
          "column": 5,
          "position": 438
        }
      }
    },
    {
      "format": "c",
      "lines": 8,
      "fragment": "ine REPEAT\t\t2\n\nint getInt(char* path) {\n\tint i = 0;\n\tFILE *file = fopen(path, \"r\");\n\tif (file!=NULL) {\n\t\tfscanf(file, \"%i\", &i);\n\t\tfclose(file);\n\t}\n\treturn i;\n}\nvoi",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my355\\keymon\\keymon.c",
        "start": 54,
        "end": 61,
        "startLoc": {
          "line": 54,
          "column": 1,
          "position": 262
        },
        "endLoc": {
          "line": 61,
          "column": 9,
          "position": 336
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\my355\\libmsettings\\msettings.c",
        "start": 76,
        "end": 88,
        "startLoc": {
          "line": 76,
          "column": 1,
          "position": 553
        },
        "endLoc": {
          "line": 88,
          "column": 13,
          "position": 632
        }
      }
    },
    {
      "format": "c",
      "lines": 10,
      "fragment": "le = fopen(path, \"r\");\n\tif (file) {\n\t\tfseek(file, 0L, SEEK_END);\n\t\tsize_t size = ftell(file);\n\t\tif (size>buffer_size-1) size = buffer_size - 1;\n\t\trewind(file);\n\t\tfread(buffer, sizeof(char), size, file);\n\t\tfclose",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my355\\keymon\\keymon.c",
        "start": 68,
        "end": 77,
        "startLoc": {
          "line": 68,
          "column": 1,
          "position": 363
        },
        "endLoc": {
          "line": 77,
          "column": 5,
          "position": 436
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\my355\\libmsettings\\msettings.c",
        "start": 88,
        "end": 65,
        "startLoc": {
          "line": 88,
          "column": 1,
          "position": 628
        },
        "endLoc": {
          "line": 65,
          "column": 7,
          "position": 278
        }
      }
    },
    {
      "format": "c",
      "lines": 13,
      "fragment": "m/card0-HDMI-A-1/status\"\n\nstatic int JACK_enabled(void) {\n\treturn !getInt(JACK_STATE_PATH);\n}\nstatic int HDMI_enabled(void) {\n\tchar value[64];\n\tgetFile(HDMI_STATE_PATH, value, 64",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my355\\keymon\\keymon.c",
        "start": 95,
        "end": 107,
        "startLoc": {
          "line": 95,
          "column": 2,
          "position": 574
        },
        "endLoc": {
          "line": 107,
          "column": 9,
          "position": 650
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\keymon\\keymon.c",
        "start": 66,
        "end": 71,
        "startLoc": {
          "line": 66,
          "column": 16,
          "position": 293
        },
        "endLoc": {
          "line": 71,
          "column": 8,
          "position": 300
        }
      }
    },
    {
      "format": "c",
      "lines": 12,
      "fragment": "JACK_STATE_PATH);\n}\nstatic int HDMI_enabled(void) {\n\tchar value[64];\n\tgetFile(HDMI_STATE_PATH, value, 64);\n\treturn exactMatch(value, \"connected",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my355\\keymon\\keymon.c",
        "start": 98,
        "end": 109,
        "startLoc": {
          "line": 98,
          "column": 9,
          "position": 600
        },
        "endLoc": {
          "line": 109,
          "column": 9,
          "position": 667
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rg35xx\\keymon\\keymon.c",
        "start": 55,
        "end": 66,
        "startLoc": {
          "line": 55,
          "column": 15,
          "position": 239
        },
        "endLoc": {
          "line": 66,
          "column": 5,
          "position": 306
        }
      }
    },
    {
      "format": "c",
      "lines": 99,
      "fragment": "Ports(void *arg) {\n\tint has_jack,had_jack;\n\thad_jack = had_jack = JACK_enabled();\n\tSetJack(has_jack);\n\n\tint has_hdmi,had_hdmi;\n\thas_hdmi = had_hdmi = HDMI_enabled();\n\tSetHDMI(has_hdmi);\n\t\n\twhile(1) {\n\t\tsleep(1);\n\n\t\thas_jack = JACK_enabled();\n\t\tif (had_jack!=has_jack) {\n\t\t\thad_jack = has_jack;\n\t\t\tSetJack(has_jack);\n\t\t}\n\t\t\n\t\thas_hdmi = HDMI_enabled();\n\t\tif (had_hdmi!=has_hdmi) {\n\t\t\thad_hdmi = has_hdmi;\n\t\t\tSetHDMI(has_hdmi);\n\t\t}\n\t}\n\t\n\treturn 0;\n}\n\nint main (int argc, char *argv[]) {\n\tInitSettings();\n\tpthread_create(&ports_pt, NULL, &watchPorts, NULL);\n\t\n\tinput_fd = open(\"/dev/input/event0\", O_RDONLY | O_NONBLOCK | O_CLOEXEC);\n\t\n\tuint32_t input;\n\tuint32_t val;\n\tuint32_t menu_pressed = 0;\n\t\n\tuint32_t up_pressed = 0;\n\tuint32_t up_just_pressed = 0;\n\tuint32_t up_repeat_at = 0;\n\t\n\tuint32_t down_pressed = 0;\n\tuint32_t down_just_pressed = 0;\n\tuint32_t down_repeat_at = 0;\n\t\n\tuint8_t ignore;\n\tuint32_t then;\n\tuint32_t now;\n\tstruct timeval tod;\n\t\n\tgettimeofday(&tod, NULL);\n\tthen = tod.tv_sec * 1000 + tod.tv_usec / 1000; // essential SDL_GetTicks()\n\tignore = 0;\n\t\n\twhile (1) {\n\t\tgettimeofday(&tod, NULL);\n\t\tnow = tod.tv_sec * 1000 + tod.tv_usec / 1000;\n\t\t// TODO: check if if necessary\n\t\tif (now-then>1000) ignore = 1; // ignore input that arrived during sleep\n\t\t\n\t\twhile(read(input_fd, &ev, sizeof(ev))==sizeof(ev)) {\n\t\t\tif (ignore) continue;\n\t\t\tval = ev.value;\n\n\t\t\tif (( ev.type != EV_KEY ) || ( val > REPEAT )) continue;\n\t\t\t// printf(\"code: %i (%i)\\n\", ev.code, val); fflush(stdout);\n\t\t\tswitch (ev.code) {\n\t\t\t\tcase CODE_MENU:\n\t\t\t\t\tmenu_pressed = val;\n\t\t\t\tbreak;\n\t\t\t\tbreak;\n\t\t\t\tcase CODE_PLUS:\n\t\t\t\t\tup_pressed = up_just_pressed = val;\n\t\t\t\t\tif (val) up_repeat_at = now + 300;\n\t\t\t\tbreak;\n\t\t\t\tcase CODE_MINUS:\n\t\t\t\t\tdown_pressed = down_just_pressed = val;\n\t\t\t\t\tif (val) down_repeat_at = now + 300;\n\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (ignore) {\n\t\t\tmenu_pressed = 0;\n\t\t\tup_pressed = up_just_pressed = 0;\n\t\t\tdown_pressed = down_just_pressed = 0;\n\t\t\tup_repeat_at = 0;\n\t\t\tdown_repeat_at = 0;\n\t\t}\n\t\t\n\t\tif (up_just_pressed || (up_pressed && now>=up_repeat_at)) {\n\t\t\tif (menu_pressed) {\n\t\t\t\t// printf(\"brightness up\\n\"); fflush(stdout);\n\t\t\t\tval = GetBrightness();\n\t\t\t\tif (val<BRIGHTNESS_MAX) SetBrightness(++val);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// printf(\"volume up\\n\"); fflush(stdout);\n\t\t\t\tval = GetVolume();\n\t\t\t\tif (val<VOLUME_MAX) SetVolume(++val);\n\t\t",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my355\\keymon\\keymon.c",
        "start": 109,
        "end": 207,
        "startLoc": {
          "line": 109,
          "column": 20,
          "position": 674
        },
        "endLoc": {
          "line": 207,
          "column": 2,
          "position": 1487
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\keymon\\keymon.c",
        "start": 87,
        "end": 163,
        "startLoc": {
          "line": 87,
          "column": 17,
          "position": 484
        },
        "endLoc": {
          "line": 163,
          "column": 2,
          "position": 1203
        }
      }
    },
    {
      "format": "c",
      "lines": 40,
      "fragment": "// my282\n#include <stdio.h>\n#include <unistd.h>\n#include <SDL2/SDL.h>\n#include <SDL2/SDL_image.h>\n\n#define FIXED_WIDTH\t\t640\n#define FIXED_HEIGHT\t480\n#define FIXED_BPP\t\t2\n#define FIXED_DEPTH\t\t(FIXED_BPP * 8)\n#define FIXED_PITCH\t\t(FIXED_WIDTH * FIXED_BPP)\n\n#define RGBA_MASK_565\t0xF800, 0x07E0, 0x001F, 0x0000\n\nint main(int argc , char* argv[]) {\n\tif (argc<2) {\n\t\tputs(\"Usage: show.elf image.png delay\");\n\t\treturn 0;\n\t}\n\t\n\tchar path[256];\n\tstrncpy(path,argv[1],256);\n\tif (access(path, F_OK)!=0) return 0; // nothing to show :(\n\t\n\tint delay = argc>2 ? atoi(argv[2]) : 2;\n\t\n\tSDL_Init(SDL_INIT_VIDEO);\n\tSDL_ShowCursor(0);\n\t\n\tint w = FIXED_WIDTH;\n\ti",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my282\\show\\show.c",
        "start": 1,
        "end": 40,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 40,
          "column": 13,
          "position": 265
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\show\\show.c",
        "start": 1,
        "end": 36,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 36,
          "column": 2,
          "position": 260
        }
      }
    },
    {
      "format": "c",
      "lines": 26,
      "fragment": "= FIXED_WIDTH;\n\tint h = FIXED_HEIGHT;\n\tint p = FIXED_PITCH;\n\tSDL_Window* window = SDL_CreateWindow(\"\", SDL_WINDOWPOS_UNDEFINED, SDL_WINDOWPOS_UNDEFINED, w,h, SDL_WINDOW_SHOWN);\n\t\n\tint rotate = 0;\n\tSDL_DisplayMode mode;\n\tSDL_GetCurrentDisplayMode(0, &mode);\n\tif (mode.h>mode.w) rotate = 3;\n\t\n\tSDL_Renderer* renderer = SDL_CreateRenderer(window,-1,SDL_RENDERER_ACCELERATED|SDL_RENDERER_PRESENTVSYNC);\n\tSDL_Texture* texture = SDL_CreateTexture(renderer,SDL_PIXELFORMAT_RGB565, SDL_TEXTUREACCESS_STREAMING, w,h);\n\tSDL_Surface* screen = SDL_CreateRGBSurfaceFrom(NULL, w,h, FIXED_DEPTH, p, RGBA_MASK_565);\n\t\n\tSDL_LockTexture(texture,NULL,&screen->pixels,&screen->pitch);\n\tSDL_FillRect(screen, NULL, 0);\n\tSDL_Surface* img = IMG_Load(path);\n\tSDL_BlitSurface(img, NULL, screen, &(SDL_Rect){(screen->w-img->w)/2,(screen->h-img->h)/2});\n\tSDL_FreeSurface(img);\n\tSDL_UnlockTexture(texture);\n\n\tif (rotate) SDL_RenderCopyEx(renderer,texture,NULL,&(SDL_Rect){0,w,w,h}",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my282\\show\\show.c",
        "start": 38,
        "end": 63,
        "startLoc": {
          "line": 38,
          "column": 2,
          "position": 260
        },
        "endLoc": {
          "line": 63,
          "column": 2,
          "position": 566
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\show\\show.c",
        "start": 38,
        "end": 63,
        "startLoc": {
          "line": 38,
          "column": 2,
          "position": 260
        },
        "endLoc": {
          "line": 63,
          "column": 2,
          "position": 566
        }
      }
    },
    {
      "format": "c",
      "lines": 48,
      "fragment": "// rgb30\n#include <stdio.h>\n#include <stdlib.h>\n#include <linux/fb.h>\n#include <sys/ioctl.h>\n#include <sys/mman.h>\n\n#include <fcntl.h>\n#include <unistd.h>\n#include <errno.h>\n#include <pthread.h>\n\n#include <msettings.h>\n#include",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my282\\platform\\platform.c",
        "start": 1,
        "end": 48,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 48,
          "column": 9,
          "position": 91
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 1,
        "end": 58,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 58,
          "column": 7,
          "position": 101
        }
      }
    },
    {
      "format": "c",
      "lines": 52,
      "fragment": "\t\t103\n#define RAW_DOWN\t108\n#define RAW_LEFT\t105\n#define RAW_RIGHT\t106\n#define RAW_A\t\t 57\n#define RAW_B\t\t 29\n#define RAW_X\t\t 42\n#define RAW_Y\t\t 56\n#define RAW_START\t 28\n#define RAW_SELECT\t 97\n#define RAW_MENU\t  1\n#define RAW_L1\t\t 18\n#define RAW_L2\t\t 15\n#define RAW_R1\t\t 20\n#define RAW_R2\t\t 14\n#define RAW_PLUS\t115\n#define RAW_MINUS\t114\n#define RAW_POWER\t116\n\n#define INPUT_COUNT 2\nstatic int inputs[INPUT_COUNT];\n\nvoid PLAT_initInput(void) {\n\tinputs[0] = open(\"/dev/input/event0\", O_RDONLY | O_NONBLOCK | O_CLOEXEC); // power\n\tinputs[1] = open(\"/dev/input/event3\", O_RDONLY | O_NONBLOCK | O_CLOEXEC); // controller\n\tStick_init(); // analog\n}\nvoid PLAT_quitInput(void) {\n\tStick_quit();\n\tfor (int i=0; i<INPUT_COUNT; i++) {\n\t\tclose(inputs[i]);\n\t}\n}\n\n// from <linux/input.h> which has BTN_ constants that conflict with platform.h\nstruct input_event {\n\tstruct timeval time;\n\t__u16 type;\n\t__u16 code;\n\t__s32 value;\n};\n#define EV_KEY\t\t\t0x01\n#define EV_ABS\t\t\t0x03\n\nvoid PLAT_pollInput(void) {\n\t// reset transient state\n\tpad.just_pressed = BTN_NONE;\n\tpad.just_released = BTN_NONE;\n\tpad.just_repeated = BTN_NONE;\n\n\tuint32_t tick = SDL_GetTicks();\n\tfor (int i=0; i<BTN_ID_COUNT; i++) {\n\t\tint btn = 1 << i;\n\t\tif ((pad.is_pressed & btn) && (tick",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my282\\platform\\platform.c",
        "start": 54,
        "end": 105,
        "startLoc": {
          "line": 54,
          "column": 2,
          "position": 146
        },
        "endLoc": {
          "line": 105,
          "column": 5,
          "position": 597
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 63,
        "end": 224,
        "startLoc": {
          "line": 63,
          "column": 2,
          "position": 187
        },
        "endLoc": {
          "line": 224,
          "column": 2,
          "position": 1170
        }
      }
    },
    {
      "format": "c",
      "lines": 12,
      "fragment": "&& (tick>=pad.repeat_at[i])) {\n\t\t\tpad.just_repeated |= btn; // set\n\t\t\tpad.repeat_at[i] += PAD_REPEAT_INTERVAL;\n\t\t}\n\t}\n\t\n\t// the actual poll\n\tint input;\n\tstatic struct input_event event;\n\tfor (int i=0; i<INPUT_COUNT; i++) {\n\t\tinput = inputs[i];\n\t\twhile (read(input, &event, sizeof(event))==sizeof(event)) {\n\t\t\tif (event.type!=EV_KEY && event.type!=EV_ABS) continue;\n\n\t\t\tint btn = BTN_NONE;\n\t\t\tint pressed = 0; // 0=up,1=down\n\t\t\tint id = -1;\n\t\t\tint type = event.type;\n\t\t\tint code = event.code;\n\t\t\tint value = event.value;\n\t\t\t\n\t\t\t// TODO: tmp, hardcoded, missing some buttons\n\t\t\tif (type==EV_KEY) {\n\t\t\t\tif (value>1) continue; // ignore repeats\n\t\t\t\n\t\t\t\tpressed = value;\n\t\t\t\t// LOG_info(\"key event: %i (%i)\\n\", code,pressed);\n\t\t\t\t\t if (code==RAW_UP) \t\t{ btn = BTN_DPAD_UP; \tid = BTN_ID_DPAD_UP; ",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my282\\platform\\platform.c",
        "start": 105,
        "end": 116,
        "startLoc": {
          "line": 105,
          "column": 7,
          "position": 594
        },
        "endLoc": {
          "line": 116,
          "column": 7,
          "position": 918
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 114,
        "end": 125,
        "startLoc": {
          "line": 114,
          "column": 7,
          "position": 644
        },
        "endLoc": {
          "line": 125,
          "column": 10,
          "position": 968
        }
      }
    },
    {
      "format": "c",
      "lines": 7,
      "fragment": "AD_RIGHT; }\n\t\t\t\telse if (code==RAW_A)\t\t{ btn = BTN_A; \t\t\tid = BTN_ID_A; }\n\t\t\t\telse if (code==RAW_B)\t\t{ btn = BTN_B; \t\t\tid = BTN_ID_B; }\n\t\t\t\telse if (code==RAW_X)\t\t{ btn = BTN_X; \t\t\tid = BTN_ID_X; }\n\t\t\t\telse if (code==RAW_Y)\t\t{ btn ",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my282\\platform\\platform.c",
        "start": 119,
        "end": 125,
        "startLoc": {
          "line": 119,
          "column": 10,
          "position": 1022
        },
        "endLoc": {
          "line": 125,
          "column": 3,
          "position": 1119
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 132,
        "end": 137,
        "startLoc": {
          "line": 132,
          "column": 10,
          "position": 1188
        },
        "endLoc": {
          "line": 137,
          "column": 5,
          "position": 1283
        }
      }
    },
    {
      "format": "c",
      "lines": 20,
      "fragment": "de==RAW_Y)\t\t{ btn = BTN_Y; \t\t\tid = BTN_ID_Y; }\n\t\t\t\telse if (code==RAW_START)\t{ btn = BTN_START; \t\tid = BTN_ID_START; }\n\t\t\t\telse if (code==RAW_SELECT)\t{ btn = BTN_SELECT; \tid = BTN_ID_SELECT; }\n\t\t\t\telse if (code==RAW_MENU)\t{ btn = BTN_MENU; \t\tid = BTN_ID_MENU; }\n\t\t\t\telse if (code==RAW_L1)\t\t{ btn = BTN_L1; \t\tid = BTN_ID_L1; }\n\t\t\t\telse if (code==RAW_L2)\t\t{ btn = BTN_L2; \t\tid = BTN_ID_L2; }\n\t\t\t\telse if (code==RAW_R1)",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my282\\platform\\platform.c",
        "start": 122,
        "end": 141,
        "startLoc": {
          "line": 122,
          "column": 13,
          "position": 1109
        },
        "endLoc": {
          "line": 141,
          "column": 10,
          "position": 1275
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\platform\\platform.c",
        "start": 337,
        "end": 164,
        "startLoc": {
          "line": 337,
          "column": 5,
          "position": 3673
        },
        "endLoc": {
          "line": 164,
          "column": 2,
          "position": 1670
        }
      }
    },
    {
      "format": "c",
      "lines": 10,
      "fragment": "\t\tid = BTN_ID_MINUS; }\n\t\t\t\telse if (code==RAW_POWER)\t{ btn = BTN_POWER; \t\tid = BTN_ID_POWER; }\n\t\t\t}\n\t\t\t\n\t\t\tif (btn==BTN_NONE) continue;\n\t\t\n\t\t\tif (!pressed) {\n\t\t\t\tpad.is_pressed\t\t&= ~btn; // unset\n\t\t\t\tpad.just_repeated\t&= ~btn; // unset\n\t\t\t\tpad.just_released\t|= btn; // set\n\t\t\t}\n\t",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my282\\platform\\platform.c",
        "start": 144,
        "end": 153,
        "startLoc": {
          "line": 144,
          "column": 1,
          "position": 1342
        },
        "endLoc": {
          "line": 153,
          "column": 7,
          "position": 1460
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 164,
        "end": 370,
        "startLoc": {
          "line": 164,
          "column": 1,
          "position": 1670
        },
        "endLoc": {
          "line": 370,
          "column": 36,
          "position": 4023
        }
      }
    },
    {
      "format": "c",
      "lines": 35,
      "fragment": "(pad.is_pressed & btn)==BTN_NONE) {\n\t\t\t\tpad.just_pressed\t|= btn; // set\n\t\t\t\tpad.just_repeated\t|= btn; // set\n\t\t\t\tpad.is_pressed\t\t|= btn; // set\n\t\t\t\tpad.repeat_at[id]\t= tick + PAD_REPEAT_DELAY;\n\t\t\t}\n\t\t}\n\t}\n\t\n\tStick_get(&(pad.laxis.x), &(pad.laxis.y));\n\tPAD_setAnalog(BTN_ID_ANALOG_LEFT, BTN_ID_ANALOG_RIGHT, pad.laxis.x, tick+PAD_REPEAT_DELAY);\n\tPAD_setAnalog(BTN_ID_ANALOG_UP,   BTN_ID_ANALOG_DOWN,  pad.laxis.y, tick+PAD_REPEAT_DELAY);\n}\n\nint PLAT_shouldWake(void) {\n\tint input;\n\tstatic struct input_event event;\n\tfor (int i=0; i<INPUT_COUNT; i+",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my282\\platform\\platform.c",
        "start": 155,
        "end": 189,
        "startLoc": {
          "line": 155,
          "column": 3,
          "position": 1469
        },
        "endLoc": {
          "line": 189,
          "column": 18,
          "position": 1638
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 173,
        "end": 410,
        "startLoc": {
          "line": 173,
          "column": 3,
          "position": 1791
        },
        "endLoc": {
          "line": 410,
          "column": 5,
          "position": 4230
        }
      }
    },
    {
      "format": "c",
      "lines": 54,
      "fragment": "dWake(void) {\n\tint input;\n\tstatic struct input_event event;\n\tfor (int i=0; i<INPUT_COUNT; i++) {\n\t\tinput = inputs[i];\n\t\twhile (read(input, &event, sizeof(event))==sizeof(event)) {\n\t\t\tif (event.type==EV_KEY && event.code==RAW_POWER && event.value==0) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t}\n\t}\n\treturn 0;\n}\n\n///////////////////////////////\n\n// based on rg35xxplus\n\nstatic struct VID_Context {\n\tSDL_Window* window;\n\tSDL_Renderer* renderer;\n\tSDL_Texture* texture;\n\tSDL_Texture* target;\n\tSDL_Texture* effect;\n\n\tSDL_Surface* buffer;\n\tSDL_Surface* screen;\n\t\n\tGFX_Renderer* blit; // yeesh\n\t\n\tint width;\n\tint height;\n\tint pitch;\n\tint sharpness;\n} vid;\n\nstatic int device_width;\nstatic int device_height;\nstatic int device_pitch;\nstatic int rotate = 0;\nSDL_Surface* PLAT_initVideo(void) {\n\t// LOG_info(\"PLAT_initVideo\\n\");\n\t\n\tSDL_InitSubSystem(SDL_INIT_VIDEO);\n\tSDL_ShowCursor(0);\n\t\n\t// SDL_version compiled;\n\t// SDL_version linked;\n\t// SDL_VERSION(&compiled);\n\t// SDL_GetVersion(&linked);\n\t// LOG_info(\"Compiled SDL version %d.%d.%d ...\\n\", compiled.major, compiled.minor, compiled.patch);\n\t// LOG_info(\"Linked SDL version %d.%d.%d.\\n\", linked.major, linked.minor, linked.patch);\n\t//\n\t// int num_displays = SDL_GetNumVideoDisplays();\n\t// LOG_info(\"SDL_GetNumVideoDisplays(): %i\\n\", num_displays);\n\t//\n\t// LOG_info(\"Available video drivers:\\n\");\n\t// for (int i=0; i<SDL_GetNumVideoDrivers(); i++) {\n\t// \tLOG_info(\"- %s\\n\", SDL_GetVideoDriver(i));\n\t// }\n\t// LOG_info(\"Current video driver: %s\\n\", SDL_GetCurrentVideoDriver());\n\t//\n\t// LOG_info(\"Available render drivers:\\n\");\n\t// for (int i=0; i<SDL_GetNumRenderDrivers(); i++) {\n\t// \tSDL_RendererInfo info;\n\t// \tSDL_GetRenderDriverInfo(i,&info);\n\t// \tLOG_info(\"- %s\\n\", info.name);\n\t// }\n\t//\n\t// LOG_info(\"Available display modes:\\n\");\n\t// SDL_DisplayMode mode;\n\t// for (int i=0; i<SDL_GetNumDisplayModes(0); i++) {\n\t// \tSDL_GetDisplayMode(0, i, &mode);\n\t// \tLOG_info(\"- %ix%i (%s)\\n\", mode.w,mode.h, SDL_GetPixelFormatName(mode.format));\n\t",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my282\\platform\\platform.c",
        "start": 185,
        "end": 238,
        "startLoc": {
          "line": 185,
          "column": 2,
          "position": 1620
        },
        "endLoc": {
          "line": 238,
          "column": 16,
          "position": 1839
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 202,
        "end": 255,
        "startLoc": {
          "line": 202,
          "column": 13,
          "position": 1931
        },
        "endLoc": {
          "line": 255,
          "column": 25,
          "position": 2150
        }
      }
    },
    {
      "format": "c",
      "lines": 302,
      "fragment": "o drivers:\\n\");\n\t// for (int i=0; i<SDL_GetNumAudioDrivers(); i++) {\n\t// \tLOG_info(\"- %s\\n\", SDL_GetAudioDriver(i));\n\t// }\n\t// LOG_info(\"Current audio driver: %s\\n\", SDL_GetCurrentAudioDriver()); // NOTE: hadn't been selected yet so will always be NULL!\n\n\t// SDL_SetHint(SDL_HINT_RENDER_VSYNC,\"0\"); // ignored?\n\n\tint w = FIXED_WIDTH;\n\tint h = FIXED_HEIGHT;\n\tint p = FIXED_PITCH;\n\tvid.window   = SDL_CreateWindow(\"\", SDL_WINDOWPOS_UNDEFINED, SDL_WINDOWPOS_UNDEFINED, w,h, SDL_WINDOW_SHOWN);\n\tLOG_info(\"window size: %ix%i\\n\", w,h);\n\t\n\tSDL_DisplayMode mode;\n\tSDL_GetCurrentDisplayMode(0, &mode);\n\tLOG_info(\"Current display mode: %ix%i (%s)\\n\", mode.w,mode.h, SDL_GetPixelFormatName(mode.format));\n\tif (mode.h>mode.w) rotate = 3;\n\tvid.renderer = SDL_CreateRenderer(vid.window,-1,SDL_RENDERER_ACCELERATED|SDL_RENDERER_PRESENTVSYNC);\n\t// SDL_RenderSetLogicalSize(vid.renderer, w,h); // TODO: wrong, but without and with the below it's even wrong-er\n\t\n\t// int renderer_width,renderer_height;\n\t// SDL_GetRendererOutputSize(vid.renderer, &renderer_width, &renderer_height);\n\t// LOG_info(\"output size: %ix%i\\n\", renderer_width, renderer_height);\n\t// if (renderer_width!=w) { // I think this can only be hdmi\n\t// \tfloat x_scale = (float)renderer_width / w;\n\t// \tfloat y_scale = (float)renderer_height / h;\n\t// \tSDL_SetWindowSize(vid.window, w / x_scale, h / y_scale);\n\t//\n\t// \tSDL_GetRendererOutputSize(vid.renderer, &renderer_width, &renderer_height);\n\t// \tLOG_info(\"adjusted size: %ix%i\\n\", renderer_width, renderer_height);\n\t// \tx_scale = (float)renderer_width / w;\n\t// \ty_scale = (float)renderer_height / h;\n\t// \tSDL_RenderSetScale(vid.renderer, x_scale,y_scale);\n\t//\n\t// \t// for some reason we need to clear and present\n\t// \t// after setting the window size or we'll miss\n\t// \t// the first frame\n\t// \tSDL_RenderClear(vid.renderer);\n\t// \tSDL_RenderPresent(vid.renderer);\n\t// }\n\t\n\t// SDL_RendererInfo info;\n\t// SDL_GetRendererInfo(vid.renderer, &info);\n\t// LOG_info(\"Current render driver: %s\\n\", info.name);\n\t\n\tSDL_SetHint(SDL_HINT_RENDER_SCALE_QUALITY,\"1\"); // linear\n\tvid.texture = SDL_CreateTexture(vid.renderer,SDL_PIXELFORMAT_RGB565, SDL_TEXTUREACCESS_STREAMING, w,h);\n\tvid.target\t= NULL; // only needed for non-native sizes\n\t\n\t// TODO: doesn't work here\n\t// SDL_SetTextureScaleMode(vid.texture, SDL_ScaleModeLinear); // we always start at device size so use linear for better upscaling over hdmi\n\t\n\t// SDL_ScaleMode scale_mode;\n\t// SDL_GetTextureScaleMode(vid.texture, &scale_mode);\n\t// LOG_info(\"texture scale mode: %i\\n\", scale_mode);\n\t\n\t// int format;\n\t// int access_;\n\t// SDL_QueryTexture(vid.texture, &format, &access_, NULL,NULL);\n\t// LOG_info(\"texture format: %s (streaming: %i)\\n\", SDL_GetPixelFormatName(format), access_==SDL_TEXTUREACCESS_STREAMING);\n\t\n\tvid.buffer\t= SDL_CreateRGBSurfaceFrom(NULL, w,h, FIXED_DEPTH, p, RGBA_MASK_565);\n\tvid.screen\t= SDL_CreateRGBSurface(SDL_SWSURFACE, w,h, FIXED_DEPTH, RGBA_MASK_565);\n\tvid.width\t= w;\n\tvid.height\t= h;\n\tvid.pitch\t= p;\n\t\n\tdevice_width\t= w;\n\tdevice_height\t= h;\n\tdevice_pitch\t= p;\n\t\n\tvid.sharpness = SHARPNESS_SOFT;\n\t\n\treturn vid.screen;\n}\n\nstatic void clearVideo(void) {\n\tSDL_FillRect(vid.screen, NULL, 0);\n\tfor (int i=0; i<3; i++) {\n\t\tSDL_RenderClear(vid.renderer);\n\t\tSDL_RenderPresent(vid.renderer);\n\t}\n}\n\nvoid PLAT_quitVideo(void) {\n\t// clearVideo();\n\n\tSDL_FreeSurface(vid.screen);\n\tSDL_FreeSurface(vid.buffer);\n\tif (vid.target) SDL_DestroyTexture(vid.target);\n\tif (vid.effect) SDL_DestroyTexture(vid.effect);\n\tSDL_DestroyTexture(vid.texture);\n\tSDL_DestroyRenderer(vid.renderer);\n\tSDL_DestroyWindow(vid.window);\n\t\n\t// system(\"cat /dev/zero > /dev/fb0 2>/dev/null\");\n\tSDL_Quit();\n}\n\nvoid PLAT_clearVideo(SDL_Surface* screen) {\n\tSDL_FillRect(screen, NULL, 0); // TODO: revisit\n}\nvoid PLAT_clearAll(void) {\n\tPLAT_clearVideo(vid.screen); // TODO: revist\n\tSDL_RenderClear(vid.renderer);\n}\n\nvoid PLAT_setVsync(int vsync) {\n\t// buh\n}\n\nstatic int hard_scale = 4; // TODO: base src size, eg. 160x144 can be 4\n\nstatic void resizeVideo(int w, int h, int p) {\n\tif (w==vid.width && h==vid.height && p==vid.pitch) return;\n\t\n\t// TODO: minarch disables crisp (and nn upscale before linear downscale) when native\n\t\n\tif (w>=device_width && h>=device_height) hard_scale = 1;\n\telse if (h>=160) hard_scale = 2; // limits gba and up to 2x (seems sufficient)\n\telse hard_scale = 4;\n\n\tLOG_info(\"resizeVideo(%i,%i,%i) hard_scale: %i crisp: %i\\n\",w,h,p, hard_scale,vid.sharpness==SHARPNESS_CRISP);\n\n\tSDL_FreeSurface(vid.buffer);\n\tSDL_DestroyTexture(vid.texture);\n\tif (vid.target) SDL_DestroyTexture(vid.target);\n\t\n\tSDL_SetHintWithPriority(SDL_HINT_RENDER_SCALE_QUALITY, vid.sharpness==SHARPNESS_SOFT?\"1\":\"0\", SDL_HINT_OVERRIDE);\n\tvid.texture = SDL_CreateTexture(vid.renderer,SDL_PIXELFORMAT_RGB565, SDL_TEXTUREACCESS_STREAMING, w,h);\n\t\n\tif (vid.sharpness==SHARPNESS_CRISP) {\n\t\tSDL_SetHintWithPriority(SDL_HINT_RENDER_SCALE_QUALITY, \"1\", SDL_HINT_OVERRIDE);\n\t\tvid.target = SDL_CreateTexture(vid.renderer,SDL_PIXELFORMAT_RGB565, SDL_TEXTUREACCESS_TARGET, w * hard_scale,h * hard_scale);\n\t}\n\telse {\n\t\tvid.target = NULL;\n\t}\n\n\tvid.buffer\t= SDL_CreateRGBSurfaceFrom(NULL, w,h, FIXED_DEPTH, p, RGBA_MASK_565);\n\n\tvid.width\t= w;\n\tvid.height\t= h;\n\tvid.pitch\t= p;\n}\n\nSDL_Surface* PLAT_resizeVideo(int w, int h, int p) {\n\tresizeVideo(w,h,p);\n\treturn vid.screen;\n}\n\nvoid PLAT_setVideoScaleClip(int x, int y, int width, int height) {\n\t// buh\n}\nvoid PLAT_setNearestNeighbor(int enabled) {\n\t// buh\n}\nvoid PLAT_setSharpness(int sharpness) {\n\tif (vid.sharpness==sharpness) return;\n\tint p = vid.pitch;\n\tvid.pitch = 0;\n\tvid.sharpness = sharpness;\n\tresizeVideo(vid.width,vid.height,p);\n}\n\nstatic struct FX_Context {\n\tint scale;\n\tint type;\n\tint color;\n\tint next_scale;\n\tint next_type;\n\tint next_color;\n\tint live_type;\n} effect = {\n\t.scale = 1,\n\t.next_scale = 1,\n\t.type = EFFECT_NONE,\n\t.next_type = EFFECT_NONE,\n\t.live_type = EFFECT_NONE,\n\t.color = 0,\n\t.next_color = 0,\n};\nstatic void rgb565_to_rgb888(uint32_t rgb565, uint8_t *r, uint8_t *g, uint8_t *b) {\n    // Extract the red component (5 bits)\n    uint8_t red = (rgb565 >> 11) & 0x1F;\n    // Extract the green component (6 bits)\n    uint8_t green = (rgb565 >> 5) & 0x3F;\n    // Extract the blue component (5 bits)\n    uint8_t blue = rgb565 & 0x1F;\n\n    // Scale the values to 8-bit range\n    *r = (red << 3) | (red >> 2);\n    *g = (green << 2) | (green >> 4);\n    *b = (blue << 3) | (blue >> 2);\n}\nstatic void updateEffect(void) {\n\tif (effect.next_scale==effect.scale && effect.next_type==effect.type && effect.next_color==effect.color) return; // unchanged\n\t\n\tint live_scale = effect.scale;\n\tint live_color = effect.color;\n\teffect.scale = effect.next_scale;\n\teffect.type = effect.next_type;\n\teffect.color = effect.next_color;\n\t\n\tif (effect.type==EFFECT_NONE) return; // disabled\n\tif (effect.type==effect.live_type && effect.scale==live_scale && effect.color==live_color) return; // already loaded\n\t\n\tchar* effect_path;\n\tint opacity = 128; // 1 - 1/2 = 50%\n\tif (effect.type==EFFECT_LINE) {\n\t\tif (effect.scale<3) {\n\t\t\teffect_path = RES_PATH \"/line-2.png\";\n\t\t}\n\t\telse if (effect.scale<4) {\n\t\t\teffect_path = RES_PATH \"/line-3.png\";\n\t\t}\n\t\telse if (effect.scale<5) {\n\t\t\teffect_path = RES_PATH \"/line-4.png\";\n\t\t}\n\t\telse if (effect.scale<6) {\n\t\t\teffect_path = RES_PATH \"/line-5.png\";\n\t\t}\n\t\telse if (effect.scale<8) {\n\t\t\teffect_path = RES_PATH \"/line-6.png\";\n\t\t}\n\t\telse {\n\t\t\teffect_path = RES_PATH \"/line-8.png\";\n\t\t}\n\t}\n\telse if (effect.type==EFFECT_GRID) {\n\t\tif (effect.scale<3) {\n\t\t\teffect_path = RES_PATH \"/grid-2.png\";\n\t\t\topacity = 64; // 1 - 3/4 = 25%\n\t\t}\n\t\telse if (effect.scale<4) {\n\t\t\teffect_path = RES_PATH \"/grid-3.png\";\n\t\t\topacity = 112; // 1 - 5/9 = ~44%\n\t\t}\n\t\telse if (effect.scale<5) {\n\t\t\teffect_path = RES_PATH \"/grid-4.png\";\n\t\t\topacity = 144; // 1 - 7/16 = ~56%\n\t\t}\n\t\telse if (effect.scale<6) {\n\t\t\teffect_path = RES_PATH \"/grid-5.png\";\n\t\t\topacity = 160; // 1 - 9/25 = ~64%\n\t\t}\n\t\telse if (effect.scale<8) {\n\t\t\teffect_path = RES_PATH \"/grid-6.png\";\n\t\t\topacity = 112; // 1 - 5/9 = ~44%\n\t\t}\n\t\telse if (effect.scale<11) {\n\t\t\teffect_path = RES_PATH \"/grid-8.png\";\n\t\t\topacity = 144; // 1 - 7/16 = ~56%\n\t\t}\n\t\telse {\n\t\t\teffect_path = RES_PATH \"/grid-11.png\";\n\t\t\topacity = 136; // 1 - 57/121 = ~52%\n\t\t}\n\t}\n\t\n\t// LOG_info(\"effect: %s opacity: %i\\n\", effect_path, opacity);\n\tSDL_Surface* tmp = IMG_Load(effect_path);\n\tif (tmp) {\n\t\tif (effect.type==EFFECT_GRID) {\n\t\t\tif (effect.color) {\n\t\t\t\t// LOG_info(\"dmg color grid...\\n\");\n\t\t\t\n\t\t\t\tuint8_t r,g,b;\n\t\t\t\trgb565_to_rgb888(effect.color,&r,&g,&b);\n\t\t\t\t// LOG_info(\"rgb %i,%i,%i\\n\",r,g,b);\n\t\t\t\t\n\t\t\t\tuint32_t* pixels = (uint32_t*)tmp->pixels;\n\t\t\t\tint width = tmp->w;\n\t\t\t\tint height = tmp->h;\n\t\t\t\tfor (int y = 0; y < height; ++y) {\n\t\t\t\t    for (int x = 0; x < width; ++x) {\n\t\t\t\t        uint32_t pixel = pixels[y * width + x];\n\t\t\t\t        uint8_t _,a;\n\t\t\t\t        SDL_GetRGBA(pixel, tmp->format, &_, &_, &_, &a);\n\t\t\t\t        if (a) pixels[y * width + x] = SDL_MapRGBA(tmp->format, r,g,b, a);\n\t\t\t\t    }\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (vid.effect) SDL_DestroyTexture(vid.effect);\n\t\tvid.effect = SDL_CreateTextureFromSurface(vid.renderer, tmp);\n\t\tSDL_SetTextureAlphaMod(vid.effect, opacity);\n\t\tSDL_FreeSurface(tmp);\n\t\teffect.live_type = effect.type;\n\t}\n\t}\nvoid PLAT_setEffect(int next_type) {\n\teffect.next_type = next_type;\n}\nvoid PLAT_setEffectColor(int next_color) {\n\teffect.next_",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my282\\platform\\platform.c",
        "start": 242,
        "end": 543,
        "startLoc": {
          "line": 242,
          "column": 2,
          "position": 1900
        },
        "endLoc": {
          "line": 543,
          "column": 2,
          "position": 4563
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 258,
        "end": 381,
        "startLoc": {
          "line": 258,
          "column": 2,
          "position": 2159
        },
        "endLoc": {
          "line": 381,
          "column": 14,
          "position": 3379
        }
      }
    },
    {
      "format": "c",
      "lines": 63,
      "fragment": "pe;\n}\nvoid PLAT_setEffectColor(int next_color) {\n\teffect.next_color = next_color;\n}\nvoid PLAT_vsync(int remaining) {\n\tif (remaining>0) SDL_Delay(remaining);\n}\n\nscaler_t PLAT_getScaler(GFX_Renderer* renderer) {\n\t// LOG_info(\"getScaler for scale: %i\\n\", renderer->scale);\n\teffect.next_scale = renderer->scale;\n\treturn scale1x1_c16;\n}\n\nvoid PLAT_blitRenderer(GFX_Renderer* renderer) {\n\tvid.blit = renderer;\n\tSDL_RenderClear(vid.renderer);\n\tresizeVideo(vid.blit->true_w,vid.blit->true_h,vid.blit->src_p);\n}\n\nvoid PLAT_flip(SDL_Surface* IGNORED, int ignored) {\n\tif (!vid.blit) {\n\t\tresizeVideo(device_width,device_height,FIXED_PITCH); // !!!???\n\t\tSDL_UpdateTexture(vid.texture,NULL,vid.screen->pixels,vid.screen->pitch);\n\t\tif (rotate) SDL_RenderCopyEx(vid.renderer,vid.texture,NULL,&(SDL_Rect){0,device_width,device_width,device_height},rotate*90,&(SDL_Point){0,0},SDL_FLIP_NONE);\n\t\telse SDL_RenderCopy(vid.renderer, vid.texture, NULL,NULL);\n\t\tSDL_RenderPresent(vid.renderer);\n\t\treturn;\n\t}\n\t\n\t// uint32_t then = SDL_GetTicks();\n\tSDL_UpdateTexture(vid.texture,NULL,vid.blit->src,vid.blit->src_p);\n\t// LOG_info(\"blit blocked for %ims (%i,%i)\\n\", SDL_GetTicks()-then,vid.buffer->w,vid.buffer->h);\n\t\n\tSDL_Texture* target = vid.texture;\n\tint x = vid.blit->src_x;\n\tint y = vid.blit->src_y;\n\tint w = vid.blit->src_w;\n\tint h = vid.blit->src_h;\n\tif (vid.sharpness==SHARPNESS_CRISP) {\n\t\tSDL_SetRenderTarget(vid.renderer,vid.target);\n\t\tSDL_RenderCopy(vid.renderer, vid.texture, NULL,NULL);\n\t\tSDL_SetRenderTarget(vid.renderer,NULL);\n\t\tx *= hard_scale;\n\t\ty *= hard_scale;\n\t\tw *= hard_scale;\n\t\th *= hard_scale;\n\t\ttarget = vid.target;\n\t}\n\t\n\tSDL_Rect* src_rect = &(SDL_Rect){x,y,w,h};\n\tSDL_Rect* dst_rect = &(SDL_Rect){0,0,device_width,device_height};\n\tif (vid.blit->aspect==0) { // native or cropped\n\t\t// LOG_info(\"src_rect %i,%i %ix%i\\n\",src_rect->x,src_rect->y,src_rect->w,src_rect->h);\n\n\t\tint w = vid.blit->src_w * vid.blit->scale;\n\t\tint h = vid.blit->src_h",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my282\\platform\\platform.c",
        "start": 543,
        "end": 605,
        "startLoc": {
          "line": 543,
          "column": 7,
          "position": 4544
        },
        "endLoc": {
          "line": 605,
          "column": 2,
          "position": 5258
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\platform\\platform.c",
        "start": 772,
        "end": 834,
        "startLoc": {
          "line": 772,
          "column": 8,
          "position": 7231
        },
        "endLoc": {
          "line": 834,
          "column": 3,
          "position": 7946
        }
      }
    },
    {
      "format": "c",
      "lines": 14,
      "fragment": "\n\n\t\tint w = vid.blit->src_w * vid.blit->scale;\n\t\tint h = vid.blit->src_h * vid.blit->scale;\n\t\tint x = (device_width - w) / 2;\n\t\tint y = (device_height - h) / 2;\n\t\tdst_rect->x = x;\n\t\tdst_rect->y = y;\n\t\tdst_rect->w = w;\n\t\tdst_rect->h = h;\n\t\t\n\t\t// LOG_info(\"dst_rect %i,%i %ix%i\\n\",dst_rect->x,dst_rect->y,dst_rect->w,dst_rect->h);\n\t}\n\telse if (vid.blit->aspect>0) { // aspect\n\t\tint h = device_height;\n\t\tint w = h * vid.blit->aspect;\n\t\tif (w>device_width) {\n\t\t\tdouble ratio = 1 / vid.blit->aspect;\n\t\t\tw = device_width;\n\t\t\th = w * ratio;\n\t\t}\n\t\tint x = (device_width - w) / 2;\n\t\tint y = (device_height - h) / 2;\n\t\t// d",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my282\\platform\\platform.c",
        "start": 602,
        "end": 615,
        "startLoc": {
          "line": 602,
          "column": 2,
          "position": 5223
        },
        "endLoc": {
          "line": 615,
          "column": 2,
          "position": 5379
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 441,
        "end": 844,
        "startLoc": {
          "line": 441,
          "column": 2,
          "position": 4042
        },
        "endLoc": {
          "line": 844,
          "column": 3,
          "position": 8072
        }
      }
    },
    {
      "format": "c",
      "lines": 56,
      "fragment": "/ 2;\n\t\t// dst_rect = &(SDL_Rect){x,y,w,h};\n\t\tdst_rect->x = x;\n\t\tdst_rect->y = y;\n\t\tdst_rect->w = w;\n\t\tdst_rect->h = h;\n\t}\n\t\n\tint ox,oy;\n\toy = (device_width-device_height)/2;\n\tox = -oy;\n\tif (rotate) SDL_RenderCopyEx(vid.renderer,target,src_rect,&(SDL_Rect){ox+dst_rect->x,oy+dst_rect->y,dst_rect->w,dst_rect->h},rotate*90,NULL,SDL_FLIP_NONE);\n\telse SDL_RenderCopy(vid.renderer, target, src_rect, dst_rect);\n\t\n\tupdateEffect();\n\tif (vid.blit && effect.type!=EFFECT_NONE && vid.effect) {\n\t\t// ox = effect.scale - (dst_rect->x % effect.scale);\n\t\t// oy = effect.scale - (dst_rect->y % effect.scale);\n\t\t// if (ox==effect.scale) ox = 0;\n\t\t// if (oy==effect.scale) oy = 0;\n \t\t// LOG_info(\"rotate: %i ox: %i oy: %i\\n\", rotate, ox,oy);\n\t\tif (rotate) SDL_RenderCopyEx(vid.renderer,vid.effect,&(SDL_Rect){0,0,dst_rect->w,dst_rect->h},&(SDL_Rect){ox+dst_rect->x,oy+dst_rect->y,dst_rect->w,dst_rect->h},rotate*90,NULL,SDL_FLIP_NONE);\n\t\telse SDL_RenderCopy(vid.renderer, vid.effect, &(SDL_Rect){0,0,dst_rect->w,dst_rect->h},dst_rect);\n\t}\n\t\n\t// uint32_t then = SDL_GetTicks();\n\tSDL_RenderPresent(vid.renderer);\n\t// LOG_info(\"SDL_RenderPresent blocked for %ims\\n\", SDL_GetTicks()-then);\n\tvid.blit = NULL;\n}\n\n///////////////////////////////\n\n// TODO: \n#define OVERLAY_WIDTH PILL_SIZE // unscaled\n#define OVERLAY_HEIGHT PILL_SIZE // unscaled\n#define OVERLAY_BPP 4\n#define OVERLAY_DEPTH 16\n#define OVERLAY_PITCH (OVERLAY_WIDTH * OVERLAY_BPP) // unscaled\n#define OVERLAY_RGBA_MASK 0x00ff0000,0x0000ff00,0x000000ff,0xff000000 // ARGB\nstatic struct OVL_Context {\n\tSDL_Surface* overlay;",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my282\\platform\\platform.c",
        "start": 615,
        "end": 670,
        "startLoc": {
          "line": 615,
          "column": 3,
          "position": 5375
        },
        "endLoc": {
          "line": 670,
          "column": 37,
          "position": 5834
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 450,
        "end": 505,
        "startLoc": {
          "line": 450,
          "column": 3,
          "position": 4182
        },
        "endLoc": {
          "line": 505,
          "column": 45,
          "position": 4642
        }
      }
    },
    {
      "format": "c",
      "lines": 12,
      "fragment": "PLAT_getBatteryStatus(int* is_charging, int* charge) {\n\tPLAT_getBatteryStatusFine(is_charging, charge);\n\n\t// worry less about battery and more about the game you're playing\n\t     if (*charge>80) *cha",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my282\\platform\\platform.c",
        "start": 687,
        "end": 698,
        "startLoc": {
          "line": 687,
          "column": 3,
          "position": 5916
        },
        "endLoc": {
          "line": 698,
          "column": 7,
          "position": 5977
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\my355\\platform\\platform.c",
        "start": 600,
        "end": 536,
        "startLoc": {
          "line": 600,
          "column": 3,
          "position": 5099
        },
        "endLoc": {
          "line": 536,
          "column": 9,
          "position": 4826
        }
      }
    },
    {
      "format": "c",
      "lines": 9,
      "fragment": "e = prefixMatch(\"up\", status);\n}\n\n#define LED_PATH \"/sys/class/leds/led1/brightness\"\nvoid PLAT_enableBacklight(int enable) {\n\tif (enable)",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my282\\platform\\platform.c",
        "start": 725,
        "end": 733,
        "startLoc": {
          "line": 725,
          "column": 5,
          "position": 6213
        },
        "endLoc": {
          "line": 733,
          "column": 12,
          "position": 6265
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\my355\\platform\\platform.c",
        "start": 644,
        "end": 598,
        "startLoc": {
          "line": 644,
          "column": 2,
          "position": 5369
        },
        "endLoc": {
          "line": 598,
          "column": 18,
          "position": 5595
        }
      }
    },
    {
      "format": "c",
      "lines": 13,
      "fragment": "libration.y_max) calibration.y_max = maxY;\n\t\tif (minY<calibration.y_min) calibration.y_min = minY;\n\t\tcalibration.y_mid = (calibration.y_min + calibration.y_max) / 2;\n\t}\n\n\tint value = 0;",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my282\\libmstick\\mstick.c",
        "start": 288,
        "end": 300,
        "startLoc": {
          "line": 288,
          "column": 6,
          "position": 2524
        },
        "endLoc": {
          "line": 300,
          "column": 19,
          "position": 2607
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\my282\\libmstick\\mstick.c",
        "start": 261,
        "end": 272,
        "startLoc": {
          "line": 261,
          "column": 6,
          "position": 2171
        },
        "endLoc": {
          "line": 272,
          "column": 22,
          "position": 2253
        }
      }
    },
    {
      "format": "c",
      "lines": 62,
      "fragment": "o.h>\n#include <stdlib.h>\n#include <unistd.h>\n#include <fcntl.h>\n#include <sys/mman.h>\n#include <linux/fb.h>\n#include <sys/ioctl.h>\n#include <errno.h>\n#include <sys/stat.h>\n#include <dlfcn.h>\n#include <string.h>\n\n#include \"msettings.h\"\n\n///////////////////////////////////////\n\n#define SETTINGS_VERSION 1\ntypedef struct Settings {\n\tint version; // future proofing\n\tint brightness;\n\tint headphones;\n\tint speaker;\n\tint unused[2]; // for future use\n\t// NOTE: doesn't really need to be persisted but still needs to be shared\n\tint jack; \n\tint hdmi; \n} Settings;\nstatic Settings DefaultSettings = {\n\t.version = SETTINGS_VERSION,\n\t.brightness = 2,\n\t.headphones = 4,\n\t.speaker = 8,\n\t.jack = 0,\n\t.hdmi = 0,\n};\nstatic Settings* settings;\n\n#define SHM_KEY \"/SharedSettings\"\nstatic char SettingsPath[256];\nstatic int shm_fd = -1;\nstatic int is_host = 0;\nstatic int shm_size = sizeof(Settings);\n\nvoid InitSettings(void) {\t\n\tsprintf(SettingsPath, \"%s/msettings.bin\", getenv(\"USERDATA_PATH\"));\n\t\n\tshm_fd = shm_open(SHM_KEY, O_RDWR | O_CREAT | O_EXCL, 0644); // see if it exists\n\tif (shm_fd==-1 && errno==EEXIST) { // already exists\n\t\tputs(\"Settings client\");\n\t\tshm_fd = shm_open(SHM_KEY, O_RDWR, 0644);\n\t\tsettings = mmap(NULL, shm_size, PROT_READ | PROT_WRITE, MAP_SHARED, shm_fd, 0);\n\t}\n\telse { // host\n\t\tputs(\"Settings host\"); // should always be keymon\n\t\tis_host = 1;\n\t\t// we created it so set initial size and populate\n\t\tftruncate(shm_fd, shm_size);\n\t\tsettings = mmap(NULL, shm_size, PROT_READ | PROT_WRITE, MAP_SHARED, shm_fd, 0);\n\t\t\n\t\tint fd = open(SettingsPath, O_RDONLY);\n\t\tif (f",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my282\\libmsettings\\msettings.c",
        "start": 15,
        "end": 76,
        "startLoc": {
          "line": 15,
          "column": 1,
          "position": 14
        },
        "endLoc": {
          "line": 76,
          "column": 7,
          "position": 506
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\libmsettings\\msettings.c",
        "start": 14,
        "end": 91,
        "startLoc": {
          "line": 14,
          "column": 1,
          "position": 13
        },
        "endLoc": {
          "line": 91,
          "column": 4,
          "position": 594
        }
      }
    },
    {
      "format": "c",
      "lines": 28,
      "fragment": "fing?\n\t\t\tclose(fd);\n\t\t}\n\t\telse {\n\t\t\t// load defaults\n\t\t\tmemcpy(settings, &DefaultSettings, shm_size);\n\t\t}\n\t\t\n\t\t// these shouldn't be persisted\n\t\t// settings->jack = 0;\n\t\t// settings->hdmi = 0;\n\t}\n\t\n\tprintf(\"brightness: %i \\nspeaker: %i\\n\", settings->brightness, settings->speaker); fflush(stdout);\n\t\n\tSetVolume(GetVolume());\n\tSetBrightness(GetBrightness());\n\t// system(\"echo $(< \" BRIGHTNESS_PATH \")\");\n}\nvoid QuitSettings(void) {\n\tmunmap(settings, shm_size);\n\tif (is_host) shm_unlink(SHM_KEY);\n}\nstatic inline void SaveSettings(void) {\n\tint fd = op",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my282\\libmsettings\\msettings.c",
        "start": 76,
        "end": 103,
        "startLoc": {
          "line": 76,
          "column": 7,
          "position": 525
        },
        "endLoc": {
          "line": 103,
          "column": 2,
          "position": 735
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\my355\\libmsettings\\msettings.c",
        "start": 139,
        "end": 121,
        "startLoc": {
          "line": 139,
          "column": 4,
          "position": 1104
        },
        "endLoc": {
          "line": 121,
          "column": 2,
          "position": 863
        }
      }
    },
    {
      "format": "c",
      "lines": 36,
      "fragment": "   5;\tbreak; \t// 1\n\t\tcase 3:  raw =   6;\tbreak; \t// 1\n\t\tcase 4:  raw =   8;\tbreak;\t// 2\n\t\tcase 5:  raw =  12;\tbreak;\t// 4\n\t\tcase 6:  raw =  16;\tbreak;\t// 4\n\t\tcase 7:  raw =  24;\tbreak;\t// 8\n\t\tcase 8:  raw =  72;\tbreak;\t// 48\n\t\tcase 9:  raw = 128;\tbreak;\t// 80\n\t\tcase 10: raw = 255;\tbreak;\t// *\n\t}\n\tSetRawBrightness(raw);\n\tsettings->brightness = value;\n\tSaveSettings();\n}\n\nint GetVolume(void) { // 0-20\n\treturn settings->jack ? settings->headphones : settings->speaker;\n}\nvoid SetVolume(int value) {\n\tif (settings->hdmi) return;\n\t\n\tif (settings->jack) settings->headphones = value;\n\telse settings->speaker = value;\n\t\n\tint raw = value * 5;\n\tSetRawVolume(raw);\n\tSaveSettings();\n}\n\n#define DISP_LCD_SET_BRIGHTNESS  0x102\nvoid SetRawBrightness(int val) { // 0 - 255\n\tif (settings->hdmi) return;\n\t\n\tprintf(\"SetRawBrightness(%i)\\n\", val); fflush(stdout)",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my282\\libmsettings\\msettings.c",
        "start": 114,
        "end": 149,
        "startLoc": {
          "line": 114,
          "column": 2,
          "position": 924
        },
        "endLoc": {
          "line": 149,
          "column": 54,
          "position": 1232
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\libmsettings\\msettings.c",
        "start": 135,
        "end": 168,
        "startLoc": {
          "line": 135,
          "column": 2,
          "position": 1035
        },
        "endLoc": {
          "line": 168,
          "column": 53,
          "position": 1349
        }
      }
    },
    {
      "format": "c",
      "lines": 6,
      "fragment": "\t\tclose(fd);\n\t}\n}\nvoid SetRawVolume(int val) { // 0 - 100\n\tprintf(\"SetRawVolume(%i)\\n\", val); fflush(stdout);\n\tchar cmd",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my282\\libmsettings\\msettings.c",
        "start": 158,
        "end": 163,
        "startLoc": {
          "line": 158,
          "column": 2,
          "position": 1282
        },
        "endLoc": {
          "line": 163,
          "column": 10,
          "position": 1330
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\trimuismart\\libmsettings\\msettings.c",
        "start": 153,
        "end": 161,
        "startLoc": {
          "line": 153,
          "column": 2,
          "position": 1178
        },
        "endLoc": {
          "line": 161,
          "column": 7,
          "position": 1228
        }
      }
    },
    {
      "format": "c",
      "lines": 30,
      "fragment": "e CODE_PLUS\t\t115\n#define CODE_MINUS\t\t114\n\n//\tfor ev.value\n#define RELEASED\t0\n#define PRESSED\t\t1\n#define REPEAT\t\t2\n\n#define INPUT_COUNT 2\nstatic int inputs[INPUT_COUNT];\nstatic struct input_event ev;\n\nint main (int argc, char *argv[]) {\n\tInitSettings();\n\t\n\t// TODO: will require two inputs\n\t// input_fd = open(\"/dev/input/event0\", O_RDONLY | O_NONBLOCK | O_CLOEXEC);\n\tinputs[0] = open(\"/dev/input/event0\", O_RDONLY | O_NONBLOCK | O_CLOEXEC);\n\tinputs[1] = open(\"/dev/input/event3\", O_RDONLY | O_NONBLOCK | O_CLOEXEC);\n\t\n\tuint32_t input;\n\tuint32_t val;\n\tuint32_t menu_pressed = 0;\n\t\n\tuint32_t up_pressed = 0;\n\tuint32_t up_just_pressed = 0;\n\tuint32_t up_repeat_at = 0;\n\t\n\tuint32_t down_",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my282\\keymon\\keymon.c",
        "start": 43,
        "end": 72,
        "startLoc": {
          "line": 43,
          "column": 20,
          "position": 127
        },
        "endLoc": {
          "line": 72,
          "column": 4,
          "position": 395
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\keymon\\keymon.c",
        "start": 87,
        "end": 86,
        "startLoc": {
          "line": 87,
          "column": 17,
          "position": 484
        },
        "endLoc": {
          "line": 86,
          "column": 6,
          "position": 507
        }
      }
    },
    {
      "format": "c",
      "lines": 71,
      "fragment": "n_just_pressed = 0;\n\tuint32_t down_repeat_at = 0;\n\t\n\tuint8_t ignore;\n\tuint32_t then;\n\tuint32_t now;\n\tstruct timeval tod;\n\t\n\tgettimeofday(&tod, NULL);\n\tthen = tod.tv_sec * 1000 + tod.tv_usec / 1000; // essential SDL_GetTicks()\n\tignore = 0;\n\t\n\twhile (1) {\n\t\tgettimeofday(&tod, NULL);\n\t\tnow = tod.tv_sec * 1000 + tod.tv_usec / 1000;\n\t\tif (now-then>1000) ignore = 1; // ignore input that arrived during sleep\n\t\t\n\t\tfor (int i=0; i<INPUT_COUNT; i++) {\n\t\t\tint input_fd = inputs[i];\n\t\t\twhile(read(input_fd, &ev, sizeof(ev))==sizeof(ev)) {\n\t\t\t\tif (ignore) continue;\n\t\t\t\tval = ev.value;\n\n\t\t\t\tif (( ev.type != EV_KEY ) || ( val > REPEAT )) continue;\n\t\t\t\t// printf(\"code: %i (%i)\\n\", ev.code, val); fflush(stdout);\n\t\t\t\tswitch (ev.code) {\n\t\t\t\t\tcase CODE_MENU:\n\t\t\t\t\t\tmenu_pressed = val;\n\t\t\t\t\tbreak;\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase CODE_PLUS:\n\t\t\t\t\t\tup_pressed = up_just_pressed = val;\n\t\t\t\t\t\tif (val) up_repeat_at = now + 300;\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase CODE_MINUS:\n\t\t\t\t\t\tdown_pressed = down_just_pressed = val;\n\t\t\t\t\t\tif (val) down_repeat_at = now + 300;\n\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (ignore) {\n\t\t\tmenu_pressed = 0;\n\t\t\tup_pressed = up_just_pressed = 0;\n\t\t\tdown_pressed = down_just_pressed = 0;\n\t\t\tup_repeat_at = 0;\n\t\t\tdown_repeat_at = 0;\n\t\t}\n\t\t\n\t\tif (up_just_pressed || (up_pressed && now>=up_repeat_at)) {\n\t\t\tif (menu_pressed) {\n\t\t\t\t// printf(\"brightness up\\n\"); fflush(stdout);\n\t\t\t\tval = GetBrightness();\n\t\t\t\tif (val<BRIGHTNESS_MAX) SetBrightness(++val);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// printf(\"volume up\\n\"); fflush(stdout);\n\t\t\t\tval = GetVolume();\n\t\t\t\tif (val<VOLUME_MAX) SetVolume(++val);\n\t\t\t}\n\t\t\t\n\t\t\tif (up_just_pressed) up_just_pressed = 0;\n\t\t\telse up_repeat_at += 100;\n\t\t}\n\t\t\n\t\tif (down_just_pressed || ",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\my282\\keymon\\keymon.c",
        "start": 73,
        "end": 143,
        "startLoc": {
          "line": 73,
          "column": 4,
          "position": 408
        },
        "endLoc": {
          "line": 143,
          "column": 2,
          "position": 975
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\keymon\\keymon.c",
        "start": 102,
        "end": 163,
        "startLoc": {
          "line": 102,
          "column": 3,
          "position": 573
        },
        "endLoc": {
          "line": 163,
          "column": 2,
          "position": 1203
        }
      }
    },
    {
      "format": "c",
      "lines": 13,
      "fragment": "<SDL/SDL.h>\n#include <SDL/SDL_image.h>\n\n#include <fcntl.h>\n#include <linux/fb.h>\n#include <sys/ioctl.h>\n#include <sys/mman.h>\n#include <unistd.h>\n\nint main(int argc , char* argv[]) {\n\tif (argc<2) {\n\t\tputs(\"Usage: show.elf image.png\");\n\t\treturn 0;\n\t}\n\t\n\tchar path[256];\n\tif (strchr(argv[1], '/')==NULL) sprintf(p",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\show\\show.c",
        "start": 11,
        "end": 23,
        "startLoc": {
          "line": 11,
          "column": 1,
          "position": 11
        },
        "endLoc": {
          "line": 23,
          "column": 4,
          "position": 145
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\trimuismart\\show\\show.c",
        "start": 13,
        "end": 25,
        "startLoc": {
          "line": 13,
          "column": 1,
          "position": 14
        },
        "endLoc": {
          "line": 25,
          "column": 7,
          "position": 148
        }
      }
    },
    {
      "format": "c",
      "lines": 6,
      "fragment": "(\"GFX_BLOCKING=1\");\n\t}\n\tSDL_GetVideoInfo();\n}\n\nSDL_Surface* PLAT_resizeVideo(int w, int h, int pitch) {\n\tvid.direct = w==FIXED_WIDTH && h==FIXED_HEIGHT && pitch==FIXED_PITCH;\n\tvid.width = w;\n\tvid.height = h;\n\tvid.pitch = pitch;\n\t\n\tif (vid.direct) memset(vid.video->pixels, 0, vid.pi",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\platform\\platform.c",
        "start": 262,
        "end": 267,
        "startLoc": {
          "line": 262,
          "column": 2,
          "position": 2306
        },
        "endLoc": {
          "line": 267,
          "column": 2,
          "position": 2407
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\platform\\platform.c",
        "start": 201,
        "end": 207,
        "startLoc": {
          "line": 201,
          "column": 2,
          "position": 1723
        },
        "endLoc": {
          "line": 207,
          "column": 7,
          "position": 1826
        }
      }
    },
    {
      "format": "c",
      "lines": 10,
      "fragment": "een->pixels = NULL;\n\t\tvid.screen->pixelsPa = NULL; // otherwise custom SDL will try to free it?\n\t\tSDL_FreeSurface(vid.screen);\n\t\t\n\t\tvid.screen = SDL_Cre",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\platform\\platform.c",
        "start": 269,
        "end": 278,
        "startLoc": {
          "line": 269,
          "column": 2,
          "position": 2426
        },
        "endLoc": {
          "line": 278,
          "column": 7,
          "position": 2481
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 207,
        "end": 305,
        "startLoc": {
          "line": 207,
          "column": 2,
          "position": 1691
        },
        "endLoc": {
          "line": 305,
          "column": 5,
          "position": 2673
        }
      }
    },
    {
      "format": "c",
      "lines": 16,
      "fragment": " SDL_CreateRGBSurfaceFrom(vid.buffer.vadd + ALIGN4K(vid.page*PAGE_SIZE),vid.width,vid.height,FIXED_DEPTH,vid.pitch,RGBA_MASK_AUTO);\n\t\tvid.screen->pixelsPa = vid.buffer.padd + ALIGN4K(vid.page*PAGE_SIZE);\n\t\tmemset(vid.screen->pixels, 0, vid.pitch * vid.height);\n\t}\n\t\n\treturn vid.direct ? vid.video : vid.screen;\n}\n\nvoid PLAT_setVideoScaleClip(int x, int y",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\platform\\platform.c",
        "start": 277,
        "end": 292,
        "startLoc": {
          "line": 277,
          "column": 1,
          "position": 2479
        },
        "endLoc": {
          "line": 292,
          "column": 10,
          "position": 2585
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rg35xx\\platform\\platform.c",
        "start": 380,
        "end": 396,
        "startLoc": {
          "line": 380,
          "column": 1,
          "position": 3563
        },
        "endLoc": {
          "line": 396,
          "column": 6,
          "position": 3670
        }
      }
    },
    {
      "format": "c",
      "lines": 41,
      "fragment": ") {\n\t// buh\n}\nvoid PLAT_setNearestNeighbor(int enabled) {\n\t// buh\n}\nstatic int next_effect = EFFECT_NONE;\nstatic int effect_type = EFFECT_NONE;\nvoid PLAT_setSharpness(int sharpness) {\n\t// force effect to reload\n\t// on scaling change\n\tif (effect_type>=EFFECT_NONE) next_effect = effect_type;\n\teffect_type = -1;\n}\n\nvoid PLAT_setEffect(int effect) {\n\tnext_effect = effect;\n}\n\nvoid PLAT_vsync(int remaining) {\n\tif (remaining>0) SDL_Delay(remaining);\n}\n\nscaler_t PLAT_getScaler(GFX_Renderer* renderer) {\n\tif (effect_type==EFFECT_LINE) {\n\t\tswitch (renderer->scale) {\n\t\t\tcase 4:  return scale4x_line;\n\t\t\tcase 3:  return scale3x_line;\n\t\t\tcase 2:  return scale2x_line;\n\t\t\tdefault: return scale1x_line;\n\t\t}\n\t}\n\telse if (effect_type==EFFECT_GRID) {\n\t\tswitch (renderer->scale) {\n\t\t\tcase 3:  return scale3x_grid;\n\t\t\tcase 2:  return scale2x_grid;\n\t\t}\n\t}\n\t\n\tswitch (renderer->scale) {\n\t\tcase 6:  return scale6x6_n16;\n\t\tcase 5:  return scale5x5_n16;\n\t\tcase 4:  return scale4x4_n16;\n\t\tcase 3:  return scale3x3_n16;\n\t\tcase 2:  return scale2x2_n16;\n\t\tdefault: return scale1x1_n16;\n\t}\n}\n\nvoid PLAT_blitRenderer(GFX_Renderer*",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\platform\\platform.c",
        "start": 292,
        "end": 332,
        "startLoc": {
          "line": 292,
          "column": 10,
          "position": 2593
        },
        "endLoc": {
          "line": 332,
          "column": 3,
          "position": 2968
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rg35xx\\platform\\platform.c",
        "start": 396,
        "end": 435,
        "startLoc": {
          "line": 396,
          "column": 2,
          "position": 3694
        },
        "endLoc": {
          "line": 435,
          "column": 4,
          "position": 4068
        }
      }
    },
    {
      "format": "c",
      "lines": 25,
      "fragment": ") GFX_BlitSurfaceExec(vid.screen, NULL, vid.video, NULL, 0,0,1); // TODO: handle aspect clipping\n\tSDL_Flip(vid.video);\n\t\n\t// swap backbuffer\n\tif (!vid.direct) {\n\t\tvid.page ^= 1;\n\t\tvid.screen->pixels = vid.buffer.vadd + ALIGN4K(vid.page*PAGE_SIZE);\n\t\tvid.screen->pixelsPa = vid.buffer.padd + ALIGN4K(vid.page*PAGE_SIZE);\n\t}\n\t\n\tif (vid.cleared) {\n\t\tPLAT_clearVideo(vid.screen);\n\t\tvid.cleared = 0;\n\t}\n}\n\n///////////////////////////////\n\n// TODO:\n#define OVERLAY_WIDTH PILL_SIZE // unscaled\n#",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\platform\\platform.c",
        "start": 351,
        "end": 375,
        "startLoc": {
          "line": 351,
          "column": 1,
          "position": 3142
        },
        "endLoc": {
          "line": 375,
          "column": 28,
          "position": 3267
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\trimuismart\\platform\\platform.c",
        "start": 399,
        "end": 485,
        "startLoc": {
          "line": 399,
          "column": 1,
          "position": 3736
        },
        "endLoc": {
          "line": 485,
          "column": 7,
          "position": 4448
        }
      }
    },
    {
      "format": "c",
      "lines": 7,
      "fragment": "(ret < 0) return -1;\n\treturn 0;\n}\n\n//\n//\tAXP223 read (plus)\n//\t\t00 .. C4/C5(USBDC connected) 00(dischargi",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\platform\\platform.c",
        "start": 423,
        "end": 429,
        "startLoc": {
          "line": 423,
          "column": 4,
          "position": 3592
        },
        "endLoc": {
          "line": 429,
          "column": 4,
          "position": 3644
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\platform\\platform.c",
        "start": 386,
        "end": 392,
        "startLoc": {
          "line": 386,
          "column": 2,
          "position": 3328
        },
        "endLoc": {
          "line": 392,
          "column": 4,
          "position": 3380
        }
      }
    },
    {
      "format": "c",
      "lines": 7,
      "fragment": "used by axp_test)\n//\t\t\tbit2: Indicating the Battery current direction 0: discharging, 1: charging\n//\t\t\tbit0: Indi",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\platform\\platform.c",
        "start": 438,
        "end": 444,
        "startLoc": {
          "line": 438,
          "column": 2,
          "position": 3758
        },
        "endLoc": {
          "line": 444,
          "column": 4,
          "position": 3819
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\platform\\platform.c",
        "start": 399,
        "end": 405,
        "startLoc": {
          "line": 399,
          "column": 2,
          "position": 3462
        },
        "endLoc": {
          "line": 405,
          "column": 2,
          "position": 3524
        }
      }
    },
    {
      "format": "c",
      "lines": 20,
      "fragment": "cating whether the boot source is ACIN or VBUS\n//\t\t01 .. 70(charging) 30(non-charging)\n//\t\t\tbit6: Charge indication 0:not charge or charge finished, 1: in charging\n//\t\tB9 .. (& 0x7F) battery percentage\n//\nint axp_read(unsigned char address) {\n\tstruct i2c_msg msg[2];\n\tstruct i2c_rdwr_ioctl_data packets;\n\tunsigned char val;\n\tint ret;\n\tint fd = open(AXPDEV, O_RDWR);\n\tioctl(fd, I2C_TIMEOUT, 5);\n\tioctl(fd, I2C_RETRIES, 1);\n\n\tmsg[0].addr = AXPID;\n\tmsg[0].flags = 0;\n\tmsg[0].len = 1;\n\tmsg[0].buf = &address;\n\tmsg[1].addr = AXPID",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\platform\\platform.c",
        "start": 444,
        "end": 463,
        "startLoc": {
          "line": 444,
          "column": 4,
          "position": 3820
        },
        "endLoc": {
          "line": 463,
          "column": 8,
          "position": 3996
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rg35xx\\platform\\platform.c",
        "start": 525,
        "end": 544,
        "startLoc": {
          "line": 525,
          "column": 7,
          "position": 5035
        },
        "endLoc": {
          "line": 544,
          "column": 7,
          "position": 5211
        }
      }
    },
    {
      "format": "c",
      "lines": 18,
      "fragment": "PLAT_getBatteryStatusFine(int* is_charging, int* charge)\n{\n\t*is_charging = is_plus ? (axp_read(0x00) & 0x4) > 0 : getInt(\"/sys/devices/gpiochip0/gpio/gpio59/value\");\n\t\n\t*charge = getInt(\"/tmp/battery\"); // 0-100?\n\n\t// TODO: tmp\n\t// *is_charging = 0;\n\t// *charge = PWR_LOW_CHARGE;\n}\n\nvoid PLAT_enableBacklight(int enable)",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\platform\\platform.c",
        "start": 485,
        "end": 502,
        "startLoc": {
          "line": 485,
          "column": 1,
          "position": 4161
        },
        "endLoc": {
          "line": 502,
          "column": 81,
          "position": 4247
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 689,
        "end": 708,
        "startLoc": {
          "line": 689,
          "column": 1,
          "position": 5973
        },
        "endLoc": {
          "line": 708,
          "column": 5,
          "position": 6061
        }
      }
    },
    {
      "format": "c",
      "lines": 16,
      "fragment": "n\", \"out\");\n\t\tputInt(\"/sys/class/gpio/gpio4/value\", 0);\n\t}\n}\nvoid PLAT_powerOff(void) {\n\tsleep(2);\n\n\tSetRawVolume(MUTE_VOLUME_RAW);\n\tPLAT_enableBacklight(0);\n\tSND_quit();\n\tVIB_quit();\n\tPWR_quit();\n\tGFX_quit();\n\t\n\tsystem(\"shutdown\");\n\twhile (1) pause(); // lolwat\n}\n\n///////////////////////////////\n\n// #define GOVERNOR_PATH \"/sys/devices/system/cpu/cpu0/cpufreq/scaling_governor\"\n// void PLAT_se",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\platform\\platform.c",
        "start": 511,
        "end": 526,
        "startLoc": {
          "line": 511,
          "column": 1,
          "position": 4264
        },
        "endLoc": {
          "line": 526,
          "column": 7,
          "position": 4406
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\trimuismart\\platform\\platform.c",
        "start": 510,
        "end": 588,
        "startLoc": {
          "line": 510,
          "column": 1,
          "position": 4527
        },
        "endLoc": {
          "line": 588,
          "column": 4,
          "position": 5506
        }
      }
    },
    {
      "format": "c",
      "lines": 7,
      "fragment": "PATH, \"performance\");\n// }\n\n// copy/paste of 35XX version now that we have our own overclock.elf\nvoid PLAT_setCPUSpeed(int speed) {\n\tint freq = 0;\n\tswitch (speed) {\n\t\tcase CPU_SPEED_MENU: \t\tfreq =  504000; break;\n\t\tcase CPU_SPEED_POWERSAVE:\tfreq = 1104000; break;\n\t\tcase CPU_SPEED_NORMAL: \t\tfreq = 1296000; break;\n\t\tcase CPU_SPEED_PERFORMANCE: freq = 1488000; break",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\platform\\platform.c",
        "start": 534,
        "end": 540,
        "startLoc": {
          "line": 534,
          "column": 8,
          "position": 4507
        },
        "endLoc": {
          "line": 540,
          "column": 10,
          "position": 4648
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\other\\screenshot\\main.c",
        "start": 24,
        "end": 39,
        "startLoc": {
          "line": 24,
          "column": 2,
          "position": 98
        },
        "endLoc": {
          "line": 39,
          "column": 2,
          "position": 247
        }
      }
    },
    {
      "format": "c",
      "lines": 9,
      "fragment": "LL_SIZE, PROT_READ|PROT_WRITE, MAP_SHARED, fd_mem, BASE_REG_MPLL_PA);\n\t\n\tif (argc<2) {\n\t\tprintf(\"Usage: %s <freq>\\n\", argv[0]);\n\t\tfor (int i=0; cpu_clocks[i]; i++) {\n\t\t\tprintf(\"  %8i\\n\", cpu_clocks",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\overclock\\overclock.c",
        "start": 120,
        "end": 128,
        "startLoc": {
          "line": 120,
          "column": 8,
          "position": 1077
        },
        "endLoc": {
          "line": 128,
          "column": 11,
          "position": 1183
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rg35xx\\overclock\\overclock.c",
        "start": 90,
        "end": 98,
        "startLoc": {
          "line": 90,
          "column": 8,
          "position": 649
        },
        "endLoc": {
          "line": 98,
          "column": 9,
          "position": 755
        }
      }
    },
    {
      "format": "c",
      "lines": 73,
      "fragment": "#include <fcntl.h>\n#include <sys/mman.h>\n#include <errno.h>\n#include <sys/stat.h>\n#include <dlfcn.h>\n#include <string.h>\n\n#include <mi_ao.h>\n#include <stdint.h>\n#include <sys/ioctl.h>\n#include <linux/i2c.h>\n#include <linux/i2c-dev.h>\n\n#include \"msettings.h\"\n\n///////////////////////////////////////\n\n//\tmmplus axp223 (via eggs)\n#define\tAXPDEV\t\"/dev/i2c-1\"\n#define\tAXPID\t(0x34)\n\n//\n//\tAXP223 write (plus)\n//\t\t32 .. bit7: Shutdown Control\n//\nint axp_write(unsigned char address, unsigned char val) {\n\tstruct i2c_msg msg[1];\n\tstruct i2c_rdwr_ioctl_data packets;\n\tunsigned char buf[2];\n\tint ret;\n\tint fd = open(AXPDEV, O_RDWR);\n\tioctl(fd, I2C_TIMEOUT, 5);\n\tioctl(fd, I2C_RETRIES, 1);\n\n\tbuf[0] = address;\n\tbuf[1] = val;\n\tmsg[0].addr = AXPID;\n\tmsg[0].flags = 0;\n\tmsg[0].len = 2;\n\tmsg[0].buf = buf;\n\n\tpackets.nmsgs = 1;\n\tpackets.msgs = &msg[0];\n\tret = ioctl(fd, I2C_RDWR, &packets);\n\n\tclose(fd);\n\tif (ret < 0) return -1;\n\treturn 0;\n}\n\n//\n//\tAXP223 read (plus)\n//\t\t00 .. C4/C5(USBDC connected) 00(discharging)\n//\t\t\tbit7: ACIN presence indication 0:ACIN not exist, 1:ACIN exists\n//\t\t\tbit6: Indicating whether ACIN is usable (used by axp_test)\n//\t\t\tbit4: Indicating whether VBUS is usable (used by axp_test)\n//\t\t\tbit2: Indicating the Battery current direction 0: discharging, 1: charging\n//\t\t\tbit0: Indicating whether the boot source is ACIN or VBUS\n//\t\t01 .. 70(charging) 30(non-charging)\n//\t\t\tbit6: Charge indication 0:not charge or charge finished, 1: in charging\n//\t\tB9 .. (& 0x7F) battery percentage\n//\nint axp_read(unsigned char address) {\n\tstruct i2c_msg msg[2];\n\tstruct i2c_rdwr_ioctl_data packets;\n\tunsigned char val;\n\tint ret;\n\tint fd = open(AXPDEV, O_RDWR);\n\tioctl(fd, I2C_TIMEOUT, 5);\n\tioctl(fd, I2C_RETRIES, 1",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\libmsettings\\msettings.c",
        "start": 21,
        "end": 93,
        "startLoc": {
          "line": 21,
          "column": 1,
          "position": 21
        },
        "endLoc": {
          "line": 93,
          "column": 40,
          "position": 579
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\platform\\platform.c",
        "start": 375,
        "end": 447,
        "startLoc": {
          "line": 375,
          "column": 1,
          "position": 3267
        },
        "endLoc": {
          "line": 447,
          "column": 32,
          "position": 3825
        }
      }
    },
    {
      "format": "c",
      "lines": 10,
      "fragment": "2C_RDWR, &packets);\n\n\tclose(fd);\n\tif(ret < 0) return -1;\n\treturn val;\n}\n\n///////////////////////////////////////\n\ntypedef struct Settings {\n\tint version; // fu",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\libmsettings\\msettings.c",
        "start": 105,
        "end": 114,
        "startLoc": {
          "line": 105,
          "column": 3,
          "position": 667
        },
        "endLoc": {
          "line": 114,
          "column": 7,
          "position": 729
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\libmsettings\\msettings.c",
        "start": 35,
        "end": 45,
        "startLoc": {
          "line": 35,
          "column": 2,
          "position": 148
        },
        "endLoc": {
          "line": 45,
          "column": 68,
          "position": 211
        }
      }
    },
    {
      "format": "c",
      "lines": 11,
      "fragment": "s;\nstatic Settings DefaultSettings = {\n\t.version = 1,\n\t.brightness = 3,\n\t.speaker = 20,\n};\nstatic Settings* settings;\n\n#define SHM_KEY \"/SharedSettings\"\nstatic char SettingsPath[256];\nstatic int shm_fd = -1;\nstatic int is_host = 0;\nstatic int shm_size = sizeof(Settings);\nstatic int is_plus = 0;\n\nvoid InitSettings(void) {\n\tis_plus = access(\"/customer/app/axp_test\", F_OK)==0;\n\t\n\tsprintf(SettingsPath, \"%s/msetti",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\libmsettings\\msettings.c",
        "start": 119,
        "end": 129,
        "startLoc": {
          "line": 119,
          "column": 2,
          "position": 769
        },
        "endLoc": {
          "line": 129,
          "column": 8,
          "position": 905
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\libmsettings\\msettings.c",
        "start": 61,
        "end": 54,
        "startLoc": {
          "line": 61,
          "column": 2,
          "position": 314
        },
        "endLoc": {
          "line": 54,
          "column": 10,
          "position": 354
        }
      }
    },
    {
      "format": "c",
      "lines": 9,
      "fragment": "/msettings.bin\", getenv(\"USERDATA_PATH\"));\n\t\n\tshm_fd = shm_open(SHM_KEY, O_RDWR | O_CREAT | O_EXCL, 0644); // see if it exists\n\tif (shm_fd==-1 && errno==EEXIST) { // already exists\n\t\tputs(\"Settings client\");\n\t\tshm_fd = shm_open(SHM_KEY, O_RDWR, 0644);\n\t\tsettings = mmap(NULL, shm_size, PROT_READ | PROT_WRITE, MAP_SHARED, s",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\libmsettings\\msettings.c",
        "start": 129,
        "end": 137,
        "startLoc": {
          "line": 129,
          "column": 3,
          "position": 905
        },
        "endLoc": {
          "line": 137,
          "column": 51,
          "position": 998
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\libmsettings\\msettings.c",
        "start": 71,
        "end": 79,
        "startLoc": {
          "line": 71,
          "column": 3,
          "position": 442
        },
        "endLoc": {
          "line": 79,
          "column": 52,
          "position": 535
        }
      }
    },
    {
      "format": "c",
      "lines": 22,
      "fragment": "_fd, 0);\n\t\t\n\t\tint fd = open(SettingsPath, O_RDONLY);\n\t\tif (fd>=0) {\n\t\t\tread(fd, settings, shm_size);\n\t\t\t// TODO: use settings->version for future proofing\n\t\t\tclose(fd);\n\t\t}\n\t\telse {\n\t\t\t// load defaults\n\t\t\tmemcpy(settings, &DefaultSettings, shm_size);\n\t\t}\n\t}\n\tprintf(\"brightness: %i\\nspeaker: %i\\n\", settings->brightness, settings->speaker);\n\n\tMI_AO_Enable(0);\n\tMI_AO_EnableChn(0,0);\n\tSetVolume(GetVolume());\n\tSetBrightness(GetBrightness());",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\libmsettings\\msettings.c",
        "start": 148,
        "end": 169,
        "startLoc": {
          "line": 148,
          "column": 2,
          "position": 1069
        },
        "endLoc": {
          "line": 169,
          "column": 17,
          "position": 1236
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rg35xx\\libmsettings\\msettings.c",
        "start": 75,
        "end": 120,
        "startLoc": {
          "line": 75,
          "column": 8,
          "position": 501
        },
        "endLoc": {
          "line": 120,
          "column": 4,
          "position": 799
        }
      }
    },
    {
      "format": "c",
      "lines": 11,
      "fragment": "uint64_t buf1[] = {sizeof(buf2), (uintptr_t)buf2};\n\t\tioctl(fd, MI_AO_SETMUTE, buf1);\n\t\tclose(fd);\n\t}\n}\n\nvoid SetRawVolume(int val) ",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\libmsettings\\msettings.c",
        "start": 218,
        "end": 228,
        "startLoc": {
          "line": 218,
          "column": 1,
          "position": 1640
        },
        "endLoc": {
          "line": 228,
          "column": 2,
          "position": 1703
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\trimuismart\\libmsettings\\msettings.c",
        "start": 155,
        "end": 165,
        "startLoc": {
          "line": 155,
          "column": 1,
          "position": 1196
        },
        "endLoc": {
          "line": 165,
          "column": 2,
          "position": 1259
        }
      }
    },
    {
      "format": "c",
      "lines": 73,
      "fragment": "e <linux/input.h>\n#include <linux/i2c.h>\n#include <linux/i2c-dev.h>\n\n#include <msettings.h>\n\n#include <sys/types.h>\n#include <sys/stat.h>\n#include <sys/ioctl.h>\n#include <pthread.h>\n\n//\tButton Defines\n#define\tBUTTON_MENU\t\tKEY_ESC\n#define\tBUTTON_POWER\tKEY_POWER\n#define\tBUTTON_SELECT\tKEY_RIGHTCTRL\n#define\tBUTTON_START\tKEY_ENTER\n#define\tBUTTON_L1\t\tKEY_E\n#define\tBUTTON_R1\t\tKEY_T\n#define\tBUTTON_L2\t\tKEY_TAB\n#define\tBUTTON_R2\t\tKEY_BACKSPACE\n#define BUTTON_PLUS\t\tKEY_VOLUMEUP\n#define BUTTON_MINUS\tKEY_VOLUMEDOWN\n\n//\tfor keyshm\n#define VOLUME\t\t0\n#define BRIGHTNESS\t1\n#define VOLMAX\t\t20\n#define BRIMAX\t\t10\n\n//\tfor ev.value\n#define RELEASED\t0\n#define PRESSED\t\t1\n#define REPEAT\t\t2\n\n//\tfor button_flag\n#define SELECT_BIT\t0\n#define START_BIT\t1\n#define SELECT\t\t(1<<SELECT_BIT)\n#define START\t\t(1<<START_BIT)\n\n//\tfor DEBUG\n//#define\tDEBUG\n#ifdef\tDEBUG\n#define ERROR(str)\tfprintf(stderr,str\"\\n\"); quit(EXIT_FAILURE)\n#else\n#define ERROR(str)\tquit(EXIT_FAILURE)\n#endif\n\n//\tmmplus axp223 (via eggs)\n#define\tAXPDEV\t\"/dev/i2c-1\"\n#define\tAXPID\t(0x34)\n\n//\n//\tAXP223 write (plus)\n//\t\t32 .. bit7: Shutdown Control\n//\nint axp_write(unsigned char address, unsigned char val) {\n\tstruct i2c_msg msg[1];\n\tstruct i2c_rdwr_ioctl_data packets;\n\tunsigned char buf[2];\n\tint ret;\n\tint fd = open(AXPDEV, O_RDWR);\n\tioctl(fd, I2C_TIMEOUT, 5);\n\tioctl(fd, I2C_RETRIES, 1);\n\n\tbuf[0] = address;\n\tbuf[1] = val;\n\tmsg[0].addr = AXPID;\n\tmsg[0].flags = 0;\n\tmsg[0].len = 2;\n\tmsg[0].buf = buf;\n\n\tpackets.nmsgs = 1;\n\tpackets.msgs = &msg[0];\n\tret = ioctl(fd, I2C_RDWR, &packets);\n\n\tclose(fd);\n\tif (ret < 0) return -1;\n\treturn 0;\n}\n\n//\n//\tAXP223 read (plus)\n//\t\t00 .. C4/C5(USBDC connected) 00(discharging)\n//\t\t\tbit7: ACIN presence indication ",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\keymon\\keymon.c",
        "start": 58,
        "end": 130,
        "startLoc": {
          "line": 58,
          "column": 1,
          "position": 64
        },
        "endLoc": {
          "line": 130,
          "column": 20,
          "position": 622
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\platform\\platform.c",
        "start": 375,
        "end": 447,
        "startLoc": {
          "line": 375,
          "column": 1,
          "position": 3267
        },
        "endLoc": {
          "line": 447,
          "column": 32,
          "position": 3825
        }
      }
    },
    {
      "format": "c",
      "lines": 8,
      "fragment": "    _IO(SARADC_IOC_MAGIC, 1)\n\nstatic SAR_ADC_CONFIG_READ  adc_config = {0,0};\nstatic int is_charging = 0;\nstatic int is_pl",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\keymon\\keymon.c",
        "start": 184,
        "end": 191,
        "startLoc": {
          "line": 184,
          "column": 43,
          "position": 1082
        },
        "endLoc": {
          "line": 191,
          "column": 8,
          "position": 1135
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\libmsettings\\msettings.c",
        "start": 52,
        "end": 48,
        "startLoc": {
          "line": 52,
          "column": 5,
          "position": 253
        },
        "endLoc": {
          "line": 48,
          "column": 2,
          "position": 150
        }
      }
    },
    {
      "format": "c",
      "lines": 12,
      "fragment": "~SELECT) | (val<<SELECT_BIT);\n\t\t\t// if (val) {\n\t\t\t// \tstatic int tick = 0;\n\t\t\t// \tchar cmd[256];\n\t\t\t//\n\t\t\t// \tsprintf(cmd, \"ps ax -o pid,nice,comm,args &> /mnt/SDCARD/%04i-nice.txt\", tick);\n\t\t\t// \tsystem(cmd);\n\t\t\t//\n\t\t\t// \tsprintf(cmd, \"top -b -n 1 > /mnt/SDCARD/%04i-top.txt\", tick++);\n\t\t\t// \tsystem(c",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\keymon\\keymon.c",
        "start": 306,
        "end": 317,
        "startLoc": {
          "line": 306,
          "column": 2,
          "position": 2167
        },
        "endLoc": {
          "line": 317,
          "column": 38,
          "position": 2268
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\keymon\\keymon.c",
        "start": 280,
        "end": 291,
        "startLoc": {
          "line": 280,
          "column": 2,
          "position": 1944
        },
        "endLoc": {
          "line": 291,
          "column": 42,
          "position": 2045
        }
      }
    },
    {
      "format": "c",
      "lines": 7,
      "fragment": "lude <linux/fb.h>\n#include <sys/ioctl.h>\n#include <sys/mman.h>\n#include <unistd.h>\n\nint main(int argc , char* argv[]) {\n\t// clear screen\n\tint fb0_fd = open(\"/dev/fb0\", O_RDWR);\n\tstruct fb_var_screeninfo vinfo;\n\tioctl(fb0_fd, FBIOGET_VSCREENINFO, &vinfo);\n\tint map_size = vinfo.xres * vinfo.yres * (vinfo.bits_per_pixel / 8); // ",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\blank\\blank.c",
        "start": 12,
        "end": 18,
        "startLoc": {
          "line": 12,
          "column": 2,
          "position": 33
        },
        "endLoc": {
          "line": 18,
          "column": 7,
          "position": 153
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\show\\show.c",
        "start": 23,
        "end": 28,
        "startLoc": {
          "line": 23,
          "column": 2,
          "position": 145
        },
        "endLoc": {
          "line": 28,
          "column": 16,
          "position": 264
        }
      }
    },
    {
      "format": "c",
      "lines": 73,
      "fragment": "DL.h>\n#include <SDL/SDL_image.h>\n\n#include <sys/ioctl.h>\n#include <fcntl.h>\n#include <unistd.h>\n#include <linux/fb.h>\n#include <sys/mman.h>\n#include <linux/input.h>\n#include <pthread.h>\n\n#include <linux/i2c.h>\n#include <linux/i2c-dev.h>\n#include <sys/ioctl.h>\n\n//\tmmplus axp223 (via eggs)\n#define\tAXPDEV\t\"/dev/i2c-1\"\n#define\tAXPID\t(0x34)\n\n//\n//\tAXP223 write (plus)\n//\t\t32 .. bit7: Shutdown Control\n//\nint axp_write(unsigned char address, unsigned char val) {\n\tstruct i2c_msg msg[1];\n\tstruct i2c_rdwr_ioctl_data packets;\n\tunsigned char buf[2];\n\tint ret;\n\tint fd = open(AXPDEV, O_RDWR);\n\tioctl(fd, I2C_TIMEOUT, 5);\n\tioctl(fd, I2C_RETRIES, 1);\n\n\tbuf[0] = address;\n\tbuf[1] = val;\n\tmsg[0].addr = AXPID;\n\tmsg[0].flags = 0;\n\tmsg[0].len = 2;\n\tmsg[0].buf = buf;\n\n\tpackets.nmsgs = 1;\n\tpackets.msgs = &msg[0];\n\tret = ioctl(fd, I2C_RDWR, &packets);\n\n\tclose(fd);\n\tif (ret < 0) return -1;\n\treturn 0;\n}\n\n//\n//\tAXP223 read (plus)\n//\t\t00 .. C4/C5(USBDC connected) 00(discharging)\n//\t\t\tbit7: ACIN presence indication 0:ACIN not exist, 1:ACIN exists\n//\t\t\tbit6: Indicating whether ACIN is usable (used by axp_test)\n//\t\t\tbit4: Indicating whether VBUS is usable (used by axp_test)\n//\t\t\tbit2: Indicating the Battery current direction 0: discharging, 1: charging\n//\t\t\tbit0: Indicating whether the boot source is ACIN or VBUS\n//\t\t01 .. 70(charging) 30(non-charging)\n//\t\t\tbit6: Charge indication 0:not charge or charge finished, 1: in charging\n//\t\tB9 .. (& 0x7F) battery percentage\n//\nint axp_read(unsigned char address) {\n\tstruct i2c_msg msg[2];\n\tstruct i2c_rdwr_ioctl_data packets;\n\tunsigned char val;\n\tint ret;\n\tint fd = open(AXPDEV, O_RDWR);\n\tioctl(fd, I2C_TIMEOUT, 5);\n\tioctl(fd, I2C_RETRIES, 1);\n\n\tm",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\batmon\\batmon.c",
        "start": 16,
        "end": 88,
        "startLoc": {
          "line": 16,
          "column": 1,
          "position": 15
        },
        "endLoc": {
          "line": 88,
          "column": 7,
          "position": 573
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\platform\\platform.c",
        "start": 375,
        "end": 447,
        "startLoc": {
          "line": 375,
          "column": 1,
          "position": 3267
        },
        "endLoc": {
          "line": 447,
          "column": 32,
          "position": 3825
        }
      }
    },
    {
      "format": "c",
      "lines": 12,
      "fragment": "c int screen_on = 0;\nstatic unsigned long screen_start;\nvoid screenOn(void) {\n\tscreen_start = SDL_GetTicks();\n\tif (!screen_on) system(\"echo 50 > /sys/class/pwm/pwmchip0/pwm0/duty_cycle\");\n\tscreen_on = 1;\n}\nvoid screenOff(void) {\n\tsystem(\"echo 0 > /s",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\batmon\\batmon.c",
        "start": 101,
        "end": 112,
        "startLoc": {
          "line": 101,
          "column": 1,
          "position": 684
        },
        "endLoc": {
          "line": 112,
          "column": 10,
          "position": 792
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\keymon\\keymon.c",
        "start": 180,
        "end": 48,
        "startLoc": {
          "line": 180,
          "column": 2,
          "position": 1025
        },
        "endLoc": {
          "line": 48,
          "column": 5,
          "position": 149
        }
      }
    },
    {
      "format": "c",
      "lines": 9,
      "fragment": "rg) {\n\tstruct input_event\tevent;\n\twhile (read(input_fd, &event, sizeof(event))==sizeof(event)) {\n\t\tif (event.type!=EV_KEY || event.value>1) continue;\n\t\tif (event.type==EV_KEY) screenOn();\n\t\tif (event.code==KEY_POWER) launch = 1;\n\t}\t\n}\n\nint main(void) {\n\tis_plus = access(\"/customer/app/axp_test\", F_OK)==0;\n\tint fb0_fd = open(\"/dev/fb0\", O_RDWR);\n\tstruct fb_var_screeninfo vinfo;\n\tioctl(fb0_fd, FBIOGET_VSCREENINFO, ",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\batmon\\batmon.c",
        "start": 134,
        "end": 142,
        "startLoc": {
          "line": 134,
          "column": 2,
          "position": 1004
        },
        "endLoc": {
          "line": 142,
          "column": 47,
          "position": 1139
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\show\\show.c",
        "start": 23,
        "end": 30,
        "startLoc": {
          "line": 23,
          "column": 2,
          "position": 145
        },
        "endLoc": {
          "line": 30,
          "column": 5,
          "position": 278
        }
      }
    },
    {
      "format": "c",
      "lines": 18,
      "fragment": "&vinfo);\n\tint map_size = vinfo.xres * vinfo.yres * (vinfo.bits_per_pixel / 8); // 640x480x4\n\tchar* fb0_map = (char*)mmap(0, map_size, PROT_READ | PROT_WRITE, MAP_SHARED, fb0_fd, 0);\n\t\n\tmemset(fb0_map, 0, map_size); // clear screen\n\t\n\tSDL_Surface* img = IMG_Load(\"/mnt/SDCARD/.system/res/charging-640-480.png\"); // 24-bit opaque png\n\t\n\tuint8_t* dst = (uint8_t*)fb0_map; // rgba\n\tuint8_t* src = (uint8",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\batmon\\batmon.c",
        "start": 142,
        "end": 159,
        "startLoc": {
          "line": 142,
          "column": 47,
          "position": 1140
        },
        "endLoc": {
          "line": 159,
          "column": 9,
          "position": 1369
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\miyoomini\\show\\show.c",
        "start": 30,
        "end": 47,
        "startLoc": {
          "line": 30,
          "column": 5,
          "position": 279
        },
        "endLoc": {
          "line": 47,
          "column": 7,
          "position": 508
        }
      }
    },
    {
      "format": "c",
      "lines": 41,
      "fragment": "include <stdlib.h>\n#include <linux/fb.h>\n#include <sys/ioctl.h>\n#include <sys/mman.h>\n\n#include <fcntl.h>\n#include <unistd.h>\n#include <errno.h>\n#include <pthread.h>\n\n#include <msettings.h>\n\n#include \"defines.h\"\n#include \"platform.h\"\n#include \"api.h",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\magicmini\\platform\\platform.c",
        "start": 22,
        "end": 62,
        "startLoc": {
          "line": 22,
          "column": 1,
          "position": 22
        },
        "endLoc": {
          "line": 62,
          "column": 20,
          "position": 116
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 21,
        "end": 49,
        "startLoc": {
          "line": 21,
          "column": 1,
          "position": 21
        },
        "endLoc": {
          "line": 49,
          "column": 20,
          "position": 103
        }
      }
    },
    {
      "format": "c",
      "lines": 18,
      "fragment": "546\n#define RAW_RIGHT\t547\n\n#define RAW_A\t\t308\n#define RAW_B\t\t305\n#define RAW_X\t\t307\n#define RAW_Y\t\t304\n\n#define RAW_START\t315\n#define RAW_SELECT\t314\n#define RAW_MENU\t704\n\n#define RAW_L1\t\t310\n#define RAW_L2\t\t313\n#define RAW_L3\t\t317\n#define RAW_R1\t\t311\n#define RAW_R2\t\t",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\magicmini\\platform\\platform.c",
        "start": 64,
        "end": 81,
        "startLoc": {
          "line": 64,
          "column": 1,
          "position": 160
        },
        "endLoc": {
          "line": 81,
          "column": 7,
          "position": 249
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 61,
        "end": 78,
        "startLoc": {
          "line": 61,
          "column": 1,
          "position": 175
        },
        "endLoc": {
          "line": 78,
          "column": 5,
          "position": 264
        }
      }
    },
    {
      "format": "c",
      "lines": 16,
      "fragment": "define RAW_LSY\t\t1\n#define RAW_LSX\t\t0\n#define RAW_RSY\t\t2\n#define RAW_RSX\t\t5\n\n#define RAW_MENU1\tRAW_L3\n#define RAW_MENU2\tRAW_R3\n\n#define INPUT_COUNT 3\nstatic int inputs[INPUT_COUNT];\n\nvoid PLAT_initInput(void) {\n\tinputs[0] = open(\"/dev/input/event0\", O_RDONLY | O_NONBLOCK | O_CLOEXEC); // power\n\tinputs[1] = open(\"/dev/input/event2\", O_RD",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\magicmini\\platform\\platform.c",
        "start": 82,
        "end": 97,
        "startLoc": {
          "line": 82,
          "column": 7,
          "position": 287
        },
        "endLoc": {
          "line": 97,
          "column": 5,
          "position": 427
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 149,
        "end": 163,
        "startLoc": {
          "line": 149,
          "column": 9,
          "position": 1526
        },
        "endLoc": {
          "line": 163,
          "column": 2,
          "position": 1668
        }
      }
    },
    {
      "format": "c",
      "lines": 16,
      "fragment": "O_RDONLY | O_NONBLOCK | O_CLOEXEC); // gamepad\n\tinputs[2] = open(\"/dev/input/event3\", O_RDONLY | O_NONBLOCK | O_CLOEXEC); // volume\n}\nvoid PLAT_quitInput(void) {\n\tfor (int i=0; i<INPUT_COUNT; i++) {\n\t\tclose(inputs[i]);\n\t}\n}\n\n// from <linux/input.h> which has BTN_ constants that conflict with platform.h\nstruct input_event {\n\tstruct timeval time;\n\t__u16 type;\n\t__u16 code;\n\t__s32 value;\n};\n#define EV_KEY\t\t\t0x01\n#define EV_ABS\t\t\t",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\magicmini\\platform\\platform.c",
        "start": 97,
        "end": 112,
        "startLoc": {
          "line": 97,
          "column": 1,
          "position": 427
        },
        "endLoc": {
          "line": 112,
          "column": 42,
          "position": 584
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 78,
        "end": 93,
        "startLoc": {
          "line": 78,
          "column": 1,
          "position": 264
        },
        "endLoc": {
          "line": 93,
          "column": 19,
          "position": 421
        }
      }
    },
    {
      "format": "c",
      "lines": 46,
      "fragment": "\tpad.just_pressed\t|= btn; // set\n\t\tpad.just_repeated\t|= btn; // set\n\t\tpad.is_pressed\t\t|= btn; // set\n\t\tpad.repeat_at[id]\t= tick + PAD_REPEAT_DELAY;\n\t}\n}\n\nvoid PLAT_pollInput(void) {\n\t// reset transient state\n\tpad.just_pressed = BTN_NONE;\n\tpad.just_released = BTN_NONE;\n\tpad.just_repeated = BTN_NONE;\n\n\tuint32_t tick = SDL_GetTicks();\n\tfor (int i=0; i<BTN_ID_COUNT; i++) {\n\t\tint btn = 1 << i;\n\t\tif ((pad.is_pressed & btn) && (tick>=pad.repeat_at[i])) {\n\t\t\tpad.just_repeated |= btn; // set\n\t\t\tpad.repeat_at[i] += PAD_REPEAT_INTERVAL;\n\t\t}\n\t}\n\t\n\t// gross hack for out of order hat events\n\t// doesn't work because we can catch it's\n\t// bad state update but it's own internal\n\t// state is broken so it never sends the\n\t// real release event\n\t// static time_t x_sec = 0;\n\t// static time_t y_sec = 0;\n\t// static suseconds_t x_usec = 0;\n\t// static suseconds_t y_usec = 0;\n\t\n\t// the actual poll\n\tint input;\n\tstatic struct input_event event;\n\tfor (int i=0; i<INPUT_COUNT; i++) {\n\t\tinput = inputs[i];\n\t\twhile (read(input, &event, sizeof(event))==sizeof(event)) {\n\t\t\tif (event.type!=EV_KEY && event.type!=EV_ABS) continue;\n\n\t\t\tint btn = BTN_NONE;\n\t\t\tint pressed = 0; // 0=up,1=down\n\t\t\tint id = -1;\n\t\t\tint type = event.type;\n\t\t\tint code = event.code;\n\t\t\tint value = event.value;\n\t\t\t\n\t\t\t// TODO: tmp, hardcoded, missing some buttons\n\t\t\tif (type==EV_KEY) {\n\t\t\t\tif (value>1) continue; // ignore repeats\n\t\t\t\n\t\t\t\tpressed = value;\n\t\t\t\t// LOG_info(\"key event: %i (%i)\\n\", code,pressed);\n\t\t\t\t\t if (code==RAW_UP) \t\t{ btn = BTN_DPAD_UP; \tid = BTN_ID_DPAD_UP; }\n\t \t\t\telse if (code==RAW_DOWN)\t{ btn = BTN_DPAD_DOWN; \tid = BTN_ID_DPAD_DOWN; }\n\t\t\t\telse if (code==RAW_LEFT)\t{ btn = BTN_DPAD_LEFT; \tid = BTN_ID_DPAD_LEFT; }\n\t\t\t\telse if (code==RAW_RIGHT)\t{ btn = BTN_DPAD_RIGHT; id = BTN_ID_DPAD_RIGHT; }\n\t\t\t\telse if (code==RAW_A)\t\t{ btn = BTN_A; \t\t\tid = BTN_ID_A; }\n\t\t\t\telse if (code==RAW_B)\t\t{ btn = BTN_B; \t\t\tid = BTN_ID_B; }\n\t\t\t\telse if (code==RAW_X)\t\t{ btn = BTN_X; \t\t\tid = BTN_ID_X; }\n\t\t\t\telse if (code==RAW_Y)\t\t{ btn = BTN_Y; \t\t\tid = BTN_ID_Y; }\n\t\t\t\telse if (code==RAW_START)\t{ btn = BTN_START; \t\tid = BTN_ID_START; }\n\t\t\t\telse if (code==RAW_SELECT)\t{ btn = BTN_SELECT; \tid = BTN_ID_SELECT; }\n\t\t\t\telse",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\magicmini\\platform\\platform.c",
        "start": 122,
        "end": 167,
        "startLoc": {
          "line": 122,
          "column": 2,
          "position": 613
        },
        "endLoc": {
          "line": 167,
          "column": 23,
          "position": 1481
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 93,
        "end": 138,
        "startLoc": {
          "line": 93,
          "column": 2,
          "position": 421
        },
        "endLoc": {
          "line": 138,
          "column": 27,
          "position": 1298
        }
      }
    },
    {
      "format": "c",
      "lines": 132,
      "fragment": "BTN_ID_R3; }\n\t\t\t\telse if (code==RAW_PLUS)\t{ btn = BTN_PLUS; \t\tid = BTN_ID_PLUS; }\n\t\t\t\telse if (code==RAW_MINUS)\t{ btn = BTN_MINUS; \t\tid = BTN_ID_MINUS; }\n\t\t\t\telse if (code==RAW_POWER)\t{ btn = BTN_POWER; \t\tid = BTN_ID_POWER; }\n\t\t\t}\n\t\t\telse if (type==EV_ABS) {\n\t\t\t\tLOG_info(\"abs event: %i (%i)\\n\", code,value);\n\t\t\t\t\t if (code==RAW_LSX) { pad.laxis.x = value; PAD_setAnalog(BTN_ID_ANALOG_LEFT, BTN_ID_ANALOG_RIGHT, pad.laxis.x, tick+PAD_REPEAT_DELAY); }\n\t\t\t\telse if (code==RAW_LSY) { pad.laxis.y = value; PAD_setAnalog(BTN_ID_ANALOG_UP,   BTN_ID_ANALOG_DOWN,  pad.laxis.y, tick+PAD_REPEAT_DELAY); }\n\t\t\t\telse if (code==RAW_RSX) pad.raxis.x = value;\n\t\t\t\telse if (code==RAW_RSY) pad.raxis.y = value;\n\t\t\t}\n\t\t\t\n\t\t\tif (btn==BTN_NONE) continue;\n\t\t\n\t\t\tupdateButton(btn, id, pressed, tick);\n\t\t\tif (btn==BTN_L3||btn==BTN_R3) updateButton(BTN_MENU, BTN_ID_MENU, pressed, tick);\n\t\t}\n\t}\n}\n\nint PLAT_shouldWake(void) {\n\t\n\tint input;\n\tstatic struct input_event event;\n\tfor (int i=0; i<INPUT_COUNT; i++) {\n\t\tinput = inputs[i];\n\t\twhile (read(input, &event, sizeof(event))==sizeof(event)) {\n\t\t\tif (event.type==EV_KEY && event.code==RAW_POWER && event.value==0) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t}\n\t}\n\treturn 0;\n}\n\n///////////////////////////////\n\n// based on rg35xxplus\n\nstatic struct VID_Context {\n\tSDL_Window* window;\n\tSDL_Renderer* renderer;\n\tSDL_Texture* texture;\n\tSDL_Texture* target;\n\tSDL_Texture* effect;\n\n\tSDL_Surface* buffer;\n\tSDL_Surface* screen;\n\t\n\tGFX_Renderer* blit; // yeesh\n\t\n\tint width;\n\tint height;\n\tint pitch;\n\tint sharpness;\n} vid;\n\nstatic int device_width;\nstatic int device_height;\nstatic int device_pitch;\nstatic int rotate = 0;\nSDL_Surface* PLAT_initVideo(void) {\n\t// LOG_info(\"PLAT_initVideo\\n\");\n\t\n\tSDL_InitSubSystem(SDL_INIT_VIDEO);\n\tSDL_ShowCursor(0);\n\t\n\t// SDL_version compiled;\n\t// SDL_version linked;\n\t// SDL_VERSION(&compiled);\n\t// SDL_GetVersion(&linked);\n\t// LOG_info(\"Compiled SDL version %d.%d.%d ...\\n\", compiled.major, compiled.minor, compiled.patch);\n\t// LOG_info(\"Linked SDL version %d.%d.%d.\\n\", linked.major, linked.minor, linked.patch);\n\t//\n\t// int num_displays = SDL_GetNumVideoDisplays();\n\t// LOG_info(\"SDL_GetNumVideoDisplays(): %i\\n\", num_displays);\n\t//\n\t// LOG_info(\"Available video drivers:\\n\");\n\t// for (int i=0; i<SDL_GetNumVideoDrivers(); i++) {\n\t// \tLOG_info(\"- %s\\n\", SDL_GetVideoDriver(i));\n\t// }\n\t// LOG_info(\"Current video driver: %s\\n\", SDL_GetCurrentVideoDriver());\n\t//\n\t// LOG_info(\"Available render drivers:\\n\");\n\t// for (int i=0; i<SDL_GetNumRenderDrivers(); i++) {\n\t// \tSDL_RendererInfo info;\n\t// \tSDL_GetRenderDriverInfo(i,&info);\n\t// \tLOG_info(\"- %s\\n\", info.name);\n\t// }\n\t//\n\t// LOG_info(\"Available display modes:\\n\");\n\t// SDL_DisplayMode mode;\n\t// for (int i=0; i<SDL_GetNumDisplayModes(0); i++) {\n\t// \tSDL_GetDisplayMode(0, i, &mode);\n\t// \tLOG_info(\"- %ix%i (%s)\\n\", mode.w,mode.h, SDL_GetPixelFormatName(mode.format));\n\t// }\n\t// SDL_GetCurrentDisplayMode(0, &mode);\n\t// LOG_info(\"Current display mode: %ix%i (%s)\\n\", mode.w,mode.h, SDL_GetPixelFormatName(mode.format));\n\n\t// LOG_info(\"Available audio drivers:\\n\");\n\t// for (int i=0; i<SDL_GetNumAudioDrivers(); i++) {\n\t// \tLOG_info(\"- %s\\n\", SDL_GetAudioDriver(i));\n\t// }\n\t// LOG_info(\"Current audio driver: %s\\n\", SDL_GetCurrentAudioDriver()); // NOTE: hadn't been selected yet so will always be NULL!\n\n\t// SDL_SetHint(SDL_HINT_RENDER_VSYNC,\"0\"); // ignored?\n\n\tint w = FIXED_WIDTH;\n\tint h = FIXED_HEIGHT;\n\tint p = FIXED_PITCH;\n\tvid.window   = SDL_CreateWindow(\"\", SDL_WINDOWPOS_UNDEFINED, SDL_WINDOWPOS_UNDEFINED, w,h, SDL_WINDOW_SHOWN);\n\tLOG_info(\"window size: %ix%i\\n\", w,h);\n\t\n\tSDL_DisplayMode mode;\n\tSDL_GetCurrentDisplayMode(0, &mode);\n\tLOG_info(\"Current display mode: %ix%i (%s)\\n\", mode.w,mode.h, SDL_GetPixelFormatName(mode.format));\n\tif (mode.h>mode.w) rotate = 3;\n\tvid.renderer = SDL_CreateRenderer(vid.window,-1,SDL_RENDERER_ACCELERATED|SDL_RENDERER_PRESENTVSYNC);\n\t// SDL_RenderSetLogicalSize(vid.renderer, w,h); // TODO: wrong, but without and with the below it's even wrong-er\n\t\n\t// int renderer_width,renderer_height;\n\t// SDL_GetRendererOutputSize(vid.renderer, &renderer_width, &renderer_height);\n\t// LOG_info(\"output size: %ix%i\\n\", renderer_width, renderer_height);\n\t// if (renderer_width!=w) { // I think this can only be hdmi\n\t// \tfloat x_scale = (float)renderer_width / w;\n\t// \tfloat y_scale = (float)renderer_height / h;\n\t// \tSDL_SetWindowSize(vid.win",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\magicmini\\platform\\platform.c",
        "start": 178,
        "end": 309,
        "startLoc": {
          "line": 178,
          "column": 3,
          "position": 1690
        },
        "endLoc": {
          "line": 309,
          "column": 24,
          "position": 2391
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 162,
        "end": 288,
        "startLoc": {
          "line": 162,
          "column": 3,
          "position": 1665
        },
        "endLoc": {
          "line": 288,
          "column": 4,
          "position": 2295
        }
      }
    },
    {
      "format": "c",
      "lines": 86,
      "fragment": "//\n\t// \tSDL_GetRendererOutputSize(vid.renderer, &renderer_width, &renderer_height);\n\t// \tLOG_info(\"adjusted size: %ix%i\\n\", renderer_width, renderer_height);\n\t// \tx_scale = (float)renderer_width / w;\n\t// \ty_scale = (float)renderer_height / h;\n\t// \tSDL_RenderSetScale(vid.renderer, x_scale,y_scale);\n\t//\n\t// \t// for some reason we need to clear and present\n\t// \t// after setting the window size or we'll miss\n\t// \t// the first frame\n\t// \tSDL_RenderClear(vid.renderer);\n\t// \tSDL_RenderPresent(vid.renderer);\n\t// }\n\t\n\t// SDL_RendererInfo info;\n\t// SDL_GetRendererInfo(vid.renderer, &info);\n\t// LOG_info(\"Current render driver: %s\\n\", info.name);\n\t\n\tSDL_SetHint(SDL_HINT_RENDER_SCALE_QUALITY,\"1\"); // linear\n\tvid.texture = SDL_CreateTexture(vid.renderer,SDL_PIXELFORMAT_RGB565, SDL_TEXTUREACCESS_STREAMING, w,h);\n\tSDL_SetTextureBlendMode(vid.texture, SDL_BLENDMODE_BLEND);\n\tvid.target\t= NULL; // only needed for non-native sizes\n\t\n\t// TODO: doesn't work here\n\t// SDL_SetTextureScaleMode(vid.texture, SDL_ScaleModeLinear); // we always start at device size so use linear for better upscaling over hdmi\n\t\n\t// SDL_ScaleMode scale_mode;\n\t// SDL_GetTextureScaleMode(vid.texture, &scale_mode);\n\t// LOG_info(\"texture scale mode: %i\\n\", scale_mode);\n\t\n\t// int format;\n\t// int access_;\n\t// SDL_QueryTexture(vid.texture, &format, &access_, NULL,NULL);\n\t// LOG_info(\"texture format: %s (streaming: %i)\\n\", SDL_GetPixelFormatName(format), access_==SDL_TEXTUREACCESS_STREAMING);\n\t\n\tvid.buffer\t= SDL_CreateRGBSurfaceFrom(NULL, w,h, FIXED_DEPTH, p, RGBA_MASK_565);\n\tvid.screen\t= SDL_CreateRGBSurface(SDL_SWSURFACE, w,h, FIXED_DEPTH, RGBA_MASK_565);\n\tvid.width\t= w;\n\tvid.height\t= h;\n\tvid.pitch\t= p;\n\t\n\tdevice_width\t= w;\n\tdevice_height\t= h;\n\tdevice_pitch\t= p;\n\t\n\tvid.sharpness = SHARPNESS_SOFT;\n\t\n\treturn vid.screen;\n}\n\nstatic void clearVideo(void) {\n\tSDL_FillRect(vid.screen, NULL, 0);\n\tfor (int i=0; i<3; i++) {\n\t\tSDL_RenderClear(vid.renderer);\n\t\tSDL_RenderPresent(vid.renderer);\n\t}\n}\n\nvoid PLAT_quitVideo(void) {\n\t// clearVideo();\n\n\tSDL_FreeSurface(vid.screen);\n\tSDL_FreeSurface(vid.buffer);\n\tif (vid.target) SDL_DestroyTexture(vid.target);\n\tif (vid.effect) SDL_DestroyTexture(vid.effect);\n\tSDL_DestroyTexture(vid.texture);\n\tSDL_DestroyRenderer(vid.renderer);\n\tSDL_DestroyWindow(vid.window);\n\t\n\n\t// system(\"cat /dev/zero > /dev/fb0 2>/dev/null\");\n\tSDL_Quit();\n}\n\nvoid PLAT_clearVideo(SDL_Surface* screen) {\n\tSDL_FillRect(screen, NULL, 0); // TODO: revisit\n}\nvoid PLAT_clearAll(void) {\n\tPLAT_clearVideo(vid.screen); // TODO: revist\n\tSDL_RenderClear(vid.renderer);\n}\n\nvoid PLAT_setVsync(int vsync) {\n\t// buh\n}\n\nstatic int hard_scale = 4; // TODO: b",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\magicmini\\platform\\platform.c",
        "start": 309,
        "end": 394,
        "startLoc": {
          "line": 309,
          "column": 20,
          "position": 2399
        },
        "endLoc": {
          "line": 394,
          "column": 24,
          "position": 3072
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 287,
        "end": 190,
        "startLoc": {
          "line": 287,
          "column": 2,
          "position": 2291
        },
        "endLoc": {
          "line": 190,
          "column": 3,
          "position": 1514
        }
      }
    },
    {
      "format": "c",
      "lines": 6,
      "fragment": "4\n\nstatic void resizeVideo(int w, int h, int p) {\n\tif (w==vid.width && h==vid.height && p==vid.pitch) return;\n\t\n\t// TODO: minarch disables crisp (and nn upscale before linear downscale) when native\n\t\n\tif (w>=device_width && h>=device_height) hard_scale = 1;\n\telse if (h>=160) har",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\magicmini\\platform\\platform.c",
        "start": 394,
        "end": 399,
        "startLoc": {
          "line": 394,
          "column": 20,
          "position": 3080
        },
        "endLoc": {
          "line": 399,
          "column": 24,
          "position": 3145
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 188,
        "end": 193,
        "startLoc": {
          "line": 188,
          "column": 2,
          "position": 1508
        },
        "endLoc": {
          "line": 193,
          "column": 2,
          "position": 1573
        }
      }
    },
    {
      "format": "c",
      "lines": 41,
      "fragment": "p to 2x (seems sufficient)\n\telse hard_scale = 4;\n\n\tLOG_info(\"resizeVideo(%i,%i,%i) hard_scale: %i crisp: %i\\n\",w,h,p, hard_scale,vid.sharpness==SHARPNESS_CRISP);\n\n\tSDL_FreeSurface(vid.buffer);\n\tSDL_DestroyTexture(vid.texture);\n\tif (vid.target) SDL_DestroyTexture(vid.target);\n\t\n\tSDL_SetHintWithPriority(SDL_HINT_RENDER_SCALE_QUALITY, vid.sharpness==SHARPNESS_SOFT?\"1\":\"0\", SDL_HINT_OVERRIDE);\n\tvid.texture = SDL_CreateTexture(vid.renderer,SDL_PIXELFORMAT_RGB565, SDL_TEXTUREACCESS_STREAMING, w,h);\n\tSDL_SetTextureBlendMode(vid.texture, SDL_BLENDMODE_BLEND);\n\t\n\tif (vid.sharpness==SHARPNESS_CRISP) {\n\t\tSDL_SetHintWithPriority(SDL_HINT_RENDER_SCALE_QUALITY, \"1\", SDL_HINT_OVERRIDE);\n\t\tvid.target = SDL_CreateTexture(vid.",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\magicmini\\platform\\platform.c",
        "start": 399,
        "end": 439,
        "startLoc": {
          "line": 399,
          "column": 20,
          "position": 3153
        },
        "endLoc": {
          "line": 439,
          "column": 4,
          "position": 3456
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 192,
        "end": 232,
        "startLoc": {
          "line": 192,
          "column": 11,
          "position": 1569
        },
        "endLoc": {
          "line": 232,
          "column": 2,
          "position": 1871
        }
      }
    },
    {
      "format": "c",
      "lines": 116,
      "fragment": ",SDL_PIXELFORMAT_RGB565, SDL_TEXTUREACCESS_TARGET, w * hard_scale,h * hard_scale);\n\t\tSDL_SetTextureBlendMode(vid.target, SDL_BLENDMODE_BLEND);\n\t}\n\telse {\n\t\tvid.target = NULL;\n\t}\n\n\tvid.buffer\t= SDL_CreateRGBSurfaceFrom(NULL, w,h, FIXED_DEPTH, p, RGBA_MASK_565);\n\n\tvid.width\t= w;\n\tvid.height\t= h;\n\tvid.pitch\t= p;\n}\n\nSDL_Surface* PLAT_resizeVideo(int w, int h, int p) {\n\tresizeVideo(w,h,p);\n\treturn vid.screen;\n}\n\nvoid PLAT_setVideoScaleClip(int x, int y, int width, int height) {\n\t// buh\n}\nvoid PLAT_setNearestNeighbor(int enabled) {\n\t// buh\n}\nvoid PLAT_setSharpness(int sharpness) {\n\tif (vid.sharpness==sharpness) return;\n\tint p = vid.pitch;\n\tvid.pitch = 0;\n\tvid.sharpness = sharpness;\n\tresizeVideo(vid.width,vid.height,p);\n}\n\nstatic struct FX_Context {\n\tint scale;\n\tint type;\n\tint color;\n\tint next_scale;\n\tint next_type;\n\tint next_color;\n\tint live_type;\n\tint opacity;\n} effect = {\n\t.scale = 1,\n\t.next_scale = 1,\n\t.type = EFFECT_NONE,\n\t.next_type = EFFECT_NONE,\n\t.live_type = EFFECT_NONE,\n\t.color = 0,\n\t.next_color = 0,\n};\nstatic void rgb565_to_rgb888(uint32_t rgb565, uint8_t *r, uint8_t *g, uint8_t *b) {\n    // Extract the red component (5 bits)\n    uint8_t red = (rgb565 >> 11) & 0x1F;\n    // Extract the green component (6 bits)\n    uint8_t green = (rgb565 >> 5) & 0x3F;\n    // Extract the blue component (5 bits)\n    uint8_t blue = rgb565 & 0x1F;\n\n    // Scale the values to 8-bit range\n    *r = (red << 3) | (red >> 2);\n    *g = (green << 2) | (green >> 4);\n    *b = (blue << 3) | (blue >> 2);\n}\nstatic void updateEffect(void) {\n\tif (effect.next_scale==effect.scale && effect.next_type==effect.type && effect.next_color==effect.color) return; // unchanged\n\t\n\tint live_scale = effect.scale;\n\tint live_color = effect.color;\n\teffect.scale = effect.next_scale;\n\teffect.type = effect.next_type;\n\teffect.color = effect.next_color;\n\t\n\tif (effect.type==EFFECT_NONE) return; // disabled\n\tif (effect.type==effect.live_type && effect.scale==live_scale && effect.color==live_color) return; // already loaded\n\t\n\tchar* effect_path;\n\tint opacity = 128; // 1 - 1/2 = 50%\n\tif (effect.type==EFFECT_LINE) {\n\t\tif (effect.scale<3) {\n\t\t\teffect_path = RES_PATH \"/line-2.png\";\n\t\t}\n\t\telse if (effect.scale<4) {\n\t\t\teffect_path = RES_PATH \"/line-3.png\";\n\t\t}\n\t\telse if (effect.scale<5) {\n\t\t\teffect_path = RES_PATH \"/line-4.png\";\n\t\t}\n\t\telse if (effect.scale<6) {\n\t\t\teffect_path = RES_PATH \"/line-5.png\";\n\t\t}\n\t\telse if (effect.scale<8) {\n\t\t\teffect_path = RES_PATH \"/line-6.png\";\n\t\t}\n\t\telse {\n\t\t\teffect_path = RES_PATH \"/line-8.png\";\n\t\t}\n\t}\n\telse if (effect.type==EFFECT_GRID) {\n\t\tif (effect.scale<3) {\n\t\t\teffect_path = RES_PATH \"/grid-2.png\";\n\t\t\topacity = 64; // 1 - 3/4 = 25%\n\t\t}\n\t\telse if (effect.scale<4) {\n\t\t\teffect_path = RES_PATH \"/grid-3.png\";\n\t\t\topacity = 112; // 1 - 5/9 = ~44%\n\t\t}\n\t\telse if (effect.scale<5) {\n\t\t\teffect_path = RES_PATH \"/grid-4.png\";\n\t\t\topacity = 144; // 1 - 7/16 = ~56%\n\t\t}\n\t\telse if (effect.scale<6) {\n\t\t\teffect_path = RES_PATH \"/grid-5.png\";\n\t\t\topacity = 160; // 1 - 9/25 = ~64%\n\t\t}\n\t\telse if (effect.scale<8) {\n\t\t\teffect_path = RES_PATH \"/grid-6.png\";\n\t\t\topacity = 112; // 1 - 5/9 = ~44%\n\t\t}\n\t\telse if (effect.scale<11) {\n\t\t\teffect_path = RES_PATH \"/grid-8.png\";\n\t\t\topacity = 144; // 1 - 7/16 = ~56%\n\t\t}\n\t\telse {\n\t\t\teffect_path = RES_PATH \"/grid-11.png\";\n\t\t\topacity = 136; // 1 - 57/121 = ~52%\n\t\t}\n\t}\n\t\n\t// LOG_info(\"effect: %s ",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\magicmini\\platform\\platform.c",
        "start": 439,
        "end": 554,
        "startLoc": {
          "line": 439,
          "column": 8,
          "position": 3459
        },
        "endLoc": {
          "line": 554,
          "column": 24,
          "position": 4668
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 231,
        "end": 528,
        "startLoc": {
          "line": 231,
          "column": 10,
          "position": 1869
        },
        "endLoc": {
          "line": 528,
          "column": 23,
          "position": 4529
        }
      }
    },
    {
      "format": "c",
      "lines": 29,
      "fragment": "G_Load(effect_path);\n\tif (tmp) {\n\t\tif (effect.type==EFFECT_GRID) {\n\t\t\tif (effect.color) {\n\t\t\t\t// LOG_info(\"dmg color grid...\\n\");\n\t\t\t\n\t\t\t\tuint8_t r,g,b;\n\t\t\t\trgb565_to_rgb888(effect.color,&r,&g,&b);\n\t\t\t\t// LOG_info(\"rgb %i,%i,%i\\n\",r,g,b);\n\t\t\t\t\n\t\t\t\tuint32_t* pixels = (uint32_t*)tmp->pixels;\n\t\t\t\tint width = tmp->w;\n\t\t\t\tint height = tmp->h;\n\t\t\t\tfor (int y = 0; y < height; ++y) {\n\t\t\t\t    for (int x = 0; x < width; ++x) {\n\t\t\t\t        uint32_t pixel = pixels[y * width + x];\n\t\t\t\t        uint8_t _,a;\n\t\t\t\t        SDL_GetRGBA(pixel, tmp->format, &_, &_, &_, &a);\n\t\t\t\t        if (a) pixels[y * width + x] = SDL_MapRGBA(tmp->format, r,g,b, a);\n\t\t\t\t    }\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (vid.effect) SD",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\magicmini\\platform\\platform.c",
        "start": 555,
        "end": 583,
        "startLoc": {
          "line": 555,
          "column": 8,
          "position": 4687
        },
        "endLoc": {
          "line": 583,
          "column": 7,
          "position": 4893
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 348,
        "end": 376,
        "startLoc": {
          "line": 348,
          "column": 2,
          "position": 3082
        },
        "endLoc": {
          "line": 376,
          "column": 5,
          "position": 3288
        }
      }
    },
    {
      "format": "c",
      "lines": 18,
      "fragment": "_info(\"getScaler for scale: %i\\n\", renderer->scale);\n\teffect.next_scale = renderer->scale;\n\treturn scale1x1_c16;\n}\n\nvoid PLAT_blitRenderer(GFX_Renderer* renderer) {\n\tvid.blit = renderer;\n\tSDL_RenderClear(vid.renderer);\n\tresizeVideo(vid.blit->true_w,vid.blit->true_h,vid.blit->src_p);\n}\n\nstatic uint8_t combine_alpha(uint8_t a, uint8_t b) {\n    return (a * b + 255) / 255;\n}\nvoid PLAT_flip(SDL_Surface* IGNORED, int ignored) {\n\tint alpha = GetBrightness();\n\tif (alpha<5) alpha = 255 - (192 - (alpha * 192) / 5);\n\telse alpha = 255;\n\n\tif (!vid.blit) {\n\t\tresizeVideo(device_width,device_",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\magicmini\\platform\\platform.c",
        "start": 595,
        "end": 612,
        "startLoc": {
          "line": 595,
          "column": 5,
          "position": 5107
        },
        "endLoc": {
          "line": 612,
          "column": 23,
          "position": 5278
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 381,
        "end": 398,
        "startLoc": {
          "line": 381,
          "column": 2,
          "position": 3401
        },
        "endLoc": {
          "line": 398,
          "column": 15,
          "position": 3572
        }
      }
    },
    {
      "format": "c",
      "lines": 47,
      "fragment": "H); // !!!???\n\t\tSDL_UpdateTexture(vid.texture,NULL,vid.screen->pixels,vid.screen->pitch);\n\t\tSDL_SetTextureAlphaMod(vid.texture, alpha);\n\t\tif (rotate) SDL_RenderCopyEx(vid.renderer,vid.texture,NULL,&(SDL_Rect){0,device_width,device_width,device_height},rotate*90,NULL,SDL_FLIP_NONE);\n\t\telse SDL_RenderCopy(vid.renderer, vid.texture, NULL,NULL);\n\t\tSDL_RenderPresent(vid.renderer);\n\t\treturn;\n\t}\n\t\n\t// uint32_t then = SDL_GetTicks();\n\tSDL_UpdateTexture(vid.texture,NULL,vid.blit->src,vid.blit->src_p);\n\t// LOG_info(\"blit blocked for %ims (%i,%i)\\n\", SDL_GetTicks()-then,vid.buffer->w,vid.buffer->h);\n\t\n\tSDL_Texture* target = vid.texture;\n\tint x = vid.blit->src_x;\n\tint y = vid.blit->src_y;\n\tint w = vid.blit->src_w;\n\tint h = vid.blit->src_h;\n\tif (vid.sharpness==SHARPNESS_CRISP) {\n\t\tSDL_SetRenderTarget(vid.renderer,vid.target);\n\t\tSDL_SetTextureAlphaMod(vid.texture, 255);\n\t\tSDL_RenderCopy(vid.renderer, vid.texture, NULL,NULL);\n\t\tSDL_SetRenderTarget(vid.renderer,NULL);\n\t\tx *= hard_scale;\n\t\ty *= hard_scale;\n\t\tw *= hard_scale;\n\t\th *= hard_scale;\n\t\ttarget = vid.target;\n\t}\n\t\n\tSDL_Rect* src_rect = &(SDL_Rect){x,y,w,h};\n\tSDL_Rect* dst_rect = &(SDL_Rect){0,0,device_width,device_height};\n\tif (vid.blit->aspect==0) { // native or cropped\n\t\t// LOG_info(\"src_rect %i,%i %i",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\magicmini\\platform\\platform.c",
        "start": 612,
        "end": 658,
        "startLoc": {
          "line": 612,
          "column": 4,
          "position": 5286
        },
        "endLoc": {
          "line": 658,
          "column": 23,
          "position": 5788
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 397,
        "end": 834,
        "startLoc": {
          "line": 397,
          "column": 7,
          "position": 3568
        },
        "endLoc": {
          "line": 834,
          "column": 3,
          "position": 7941
        }
      }
    },
    {
      "format": "c",
      "lines": 7,
      "fragment": "->x,src_rect->y,src_rect->w,src_rect->h);\n\n\t\tint w = vid.blit->src_w * vid.blit->scale;\n\t\tint h = vid.blit->src_h * vid.blit->scale;\n\t\tint x = (device_width - w) / 2;\n\t\tint y = (device_height - h) / 2;\n\t\tdst_rect->x = x;\n\t\tdst_rect->y = y;\n\t\tdst_rect->w = w;\n\t\tdst_rect->h = h;\n\t\t\n\t\t// LOG_info(\"dst_rect ",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\magicmini\\platform\\platform.c",
        "start": 658,
        "end": 664,
        "startLoc": {
          "line": 658,
          "column": 2,
          "position": 5795
        },
        "endLoc": {
          "line": 664,
          "column": 3,
          "position": 5904
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 443,
        "end": 449,
        "startLoc": {
          "line": 443,
          "column": 3,
          "position": 4070
        },
        "endLoc": {
          "line": 449,
          "column": 97,
          "position": 4179
        }
      }
    },
    {
      "format": "c",
      "lines": 57,
      "fragment": "arget,src_rect,&(SDL_Rect){ox+dst_rect->x,oy+dst_rect->y,dst_rect->w,dst_rect->h},rotate*90,NULL,SDL_FLIP_NONE);\n\telse SDL_RenderCopy(vid.renderer, target, src_rect, dst_rect);\n\t\n\tupdateEffect();\n\tif (vid.blit && effect.type!=EFFECT_NONE && vid.effect) {\n\t\tox = effect.scale - (dst_rect->x % effect.scale);\n\t\toy = effect.scale - (dst_rect->y % effect.scale);\n\t\tif (ox==effect.scale) ox = 0;\n\t\tif (oy==effect.scale) oy = 0;\n\t\tint opacity = combine_alpha(alpha, effect.opacity);\n\t\t// LOG_info(\"alpha: %i opacity: %i combined: %i\\n percent: %f\", alpha, effect.opacity, opacity, (float)opacity/255);\n\t\tSDL_SetTextureAlphaMod(vid.effect, opacity);\n\t\tif (rotate) SDL_RenderCopyEx(vid.renderer,vid.effect,dst_rect,&(SDL_Rect){oy,ox+device_width,device_width,device_height},rotate*90,&(SDL_Point){0,0},SDL_FLIP_NONE);\n\t\telse SDL_RenderCopy(vid.renderer, vid.effect, dst_rect,dst_rect);\n\t}\n\t\n\t// uint32_t then = SDL_GetTicks();\n\tSDL_RenderPresent(vid.renderer);\n\t// LOG_info(\"SDL_RenderPresent blocked for %ims\\n\", SDL_GetTicks()-then);\n\tvid.blit = NULL;\n}\n\n///////////////////////////////\n\n// TODO: \n#define OVERLAY_WIDTH PILL_SIZE // unscaled\n#define OVERLAY_HEIGHT PILL_SIZE // unscaled\n#define OVERLAY_BPP 4\n#define OVERLAY_DEPTH 16\n#define OVERLAY_PITCH (OVERLAY_WIDTH * OVERLAY_BPP) // unscaled\n#defi",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\magicmini\\platform\\platform.c",
        "start": 672,
        "end": 728,
        "startLoc": {
          "line": 672,
          "column": 9,
          "position": 6089
        },
        "endLoc": {
          "line": 728,
          "column": 12,
          "position": 6453
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 451,
        "end": 679,
        "startLoc": {
          "line": 451,
          "column": 2,
          "position": 4284
        },
        "endLoc": {
          "line": 679,
          "column": 2,
          "position": 5890
        }
      }
    },
    {
      "format": "c",
      "lines": 14,
      "fragment": " {\n\tovl.overlay = SDL_CreateRGBSurface(SDL_SWSURFACE, SCALE2(OVERLAY_WIDTH,OVERLAY_HEIGHT),OVERLAY_DEPTH,OVERLAY_RGBA_MASK);\n\treturn ovl.overlay;\n}\nvoid PLAT_quitOverlay(void) {\n\tif (ovl.overlay) SDL_FreeSurface(ovl.overlay);\n}\nvoid PLAT_enableOverlay(int enable) {\n\n}\n\n///////////////////////////////\n\nstatic int online = 0;\nvoid PLAT_getBatteryStatus(int* ",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\magicmini\\platform\\platform.c",
        "start": 733,
        "end": 746,
        "startLoc": {
          "line": 733,
          "column": 2,
          "position": 6466
        },
        "endLoc": {
          "line": 746,
          "column": 15,
          "position": 6527
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\my282\\platform\\platform.c",
        "start": 672,
        "end": 684,
        "startLoc": {
          "line": 672,
          "column": 2,
          "position": 5840
        },
        "endLoc": {
          "line": 684,
          "column": 9,
          "position": 5900
        }
      }
    },
    {
      "format": "c",
      "lines": 11,
      "fragment": "playing\n\t     if (*charge>80) *charge = 100;\n\telse if (*charge>60) *charge =  80;\n\telse if (*charge>40) *charge =  60;\n\telse if (*charge>20) *charge =  40;\n\telse if (*charge>10) *charge =  20;\n\t",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\magicmini\\platform\\platform.c",
        "start": 751,
        "end": 761,
        "startLoc": {
          "line": 751,
          "column": 15,
          "position": 6562
        },
        "endLoc": {
          "line": 761,
          "column": 25,
          "position": 6613
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 526,
        "end": 536,
        "startLoc": {
          "line": 526,
          "column": 11,
          "position": 4776
        },
        "endLoc": {
          "line": 536,
          "column": 9,
          "position": 4826
        }
      }
    },
    {
      "format": "c",
      "lines": 15,
      "fragment": "se           \t\t *charge =  10;\n}\n\nvoid PLAT_getBatteryStatusFine(int* is_charging, int* charge)\n{\n\t// *is_charging = 0;\n\t// *charge = PWR_LOW_CHARGE;\n\t// ret",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\magicmini\\platform\\platform.c",
        "start": 762,
        "end": 776,
        "startLoc": {
          "line": 762,
          "column": 2,
          "position": 6616
        },
        "endLoc": {
          "line": 776,
          "column": 7,
          "position": 6677
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\my282\\platform\\platform.c",
        "start": 699,
        "end": 710,
        "startLoc": {
          "line": 699,
          "column": 2,
          "position": 5986
        },
        "endLoc": {
          "line": 710,
          "column": 4,
          "position": 6044
        }
      }
    },
    {
      "format": "c",
      "lines": 16,
      "fragment": "atteryStatusFine(int* is_charging, int* charge)\n{\n\t// *is_charging = 0;\n\t// *charge = PWR_LOW_CHARGE;\n\t// return;\n\t\n\t*is_charging = getInt(\"/sys/class/power_supply/ac/online\");\n\t\n\t// fallback\n\t// char state[256];\n\t// getFile(\"/sys/class/power_supply/battery/status\", state, 256);\n\t// *is_charging = prefixMatch(\"C",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\magicmini\\platform\\platform.c",
        "start": 765,
        "end": 780,
        "startLoc": {
          "line": 765,
          "column": 2,
          "position": 6636
        },
        "endLoc": {
          "line": 780,
          "column": 8,
          "position": 6743
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\trimuismart\\platform\\platform.c",
        "start": 503,
        "end": 558,
        "startLoc": {
          "line": 503,
          "column": 16,
          "position": 4510
        },
        "endLoc": {
          "line": 558,
          "column": 8,
          "position": 4987
        }
      }
    },
    {
      "format": "c",
      "lines": 89,
      "fragment": "o.h>\n#include <stdlib.h>\n#include <unistd.h>\n#include <fcntl.h>\n#include <sys/mman.h>\n#include <linux/fb.h>\n#include <sys/ioctl.h>\n#include <errno.h>\n#include <sys/stat.h>\n#include <dlfcn.h>\n#include <string.h>\n\n#include \"msettings.h\"\n\n///////////////////////////////////////\n\n#define SETTINGS_VERSION 1\ntypedef struct Settings {\n\tint version; // future proofing\n\tint brightness;\n\tint headphones;\n\tint speaker;\n\tint unused[2]; // for future use\n\t// NOTE: doesn't really need to be persisted but still needs to be shared\n\tint jack; \n\tint hdmi; \n} Settings;\nstatic Settings DefaultSettings = {\n\t.version = SETTINGS_VERSION,\n\t.brightness = 2,\n\t.headphones = 4,\n\t.speaker = 8,\n\t.jack = 0,\n\t.hdmi = 0,\n};\nstatic Settings* settings;\n\n#define SHM_KEY \"/SharedSettings\"\nstatic char SettingsPath[256];\nstatic int shm_fd = -1;\nstatic int is_host = 0;\nstatic int shm_size = sizeof(Settings);\n\nvoid InitSettings(void) {\t\n\tsprintf(SettingsPath, \"%s/msettings.bin\", getenv(\"USERDATA_PATH\"));\n\t\n\tshm_fd = shm_open(SHM_KEY, O_RDWR | O_CREAT | O_EXCL, 0644); // see if it exists\n\tif (shm_fd==-1 && errno==EEXIST) { // already exists\n\t\tputs(\"Settings client\");\n\t\tshm_fd = shm_open(SHM_KEY, O_RDWR, 0644);\n\t\tsettings = mmap(NULL, shm_size, PROT_READ | PROT_WRITE, MAP_SHARED, shm_fd, 0);\n\t}\n\telse { // host\n\t\tputs(\"Settings host\"); // should always be keymon\n\t\tis_host = 1;\n\t\t// we created it so set initial size and populate\n\t\tftruncate(shm_fd, shm_size);\n\t\tsettings = mmap(NULL, shm_size, PROT_READ | PROT_WRITE, MAP_SHARED, shm_fd, 0);\n\t\t\n\t\tint fd = open(SettingsPath, O_RDONLY);\n\t\tif (fd>=0) {\n\t\t\tread(fd, settings, shm_size);\n\t\t\t// TODO: use settings->version for future proofing?\n\t\t\tclose(fd);\n\t\t}\n\t\telse {\n\t\t\t// load defaults\n\t\t\tmemcpy(settings, &DefaultSettings, shm_size);\n\t\t}\n\t\t\n\t\t// these shouldn't be persisted\n\t\t// settings->jack = 0;\n\t\t// settings->hdmi = 0;\n\t}\n\t\n\tprintf(\"brightness: %i \\nspeaker: %i\\n\", settings->brightness, settings->speaker); fflush(stdout);\n\t\n\tSetVolume(GetVolume());\n\tSetBrightness(GetBrightness());\n\t// system(\"echo $(< \" BRIGHTNESS_PATH \")\");\n}\nvoid QuitSettings(void) {\n\tmunmap(settings, shm_size);\n\tif (is_host) shm_unlink(SHM_KEY);\n}\nstatic inline void SaveSettings(void) {\n\tint fd = op",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\magicmini\\libmsettings\\msettings.c",
        "start": 15,
        "end": 103,
        "startLoc": {
          "line": 15,
          "column": 1,
          "position": 14
        },
        "endLoc": {
          "line": 103,
          "column": 2,
          "position": 735
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\libmsettings\\msettings.c",
        "start": 14,
        "end": 121,
        "startLoc": {
          "line": 14,
          "column": 1,
          "position": 13
        },
        "endLoc": {
          "line": 121,
          "column": 2,
          "position": 863
        }
      }
    },
    {
      "format": "c",
      "lines": 22,
      "fragment": "ak;\n\t\tcase 1:  raw =   2;\tbreak;\n\t\tcase 2:  raw =   4;\tbreak;\n\t\tcase 3:  raw =   6;\tbreak;\n\t\tcase 4:  raw =   9;\tbreak;\n\t\tcase 5:  raw =  12;\tbreak;\n\t\tcase 6:  raw =  16;\tbreak;\n\t\tcase 7:  raw =  20;\tbreak;\n\t\tcase 8:  raw =  24;\tbreak;\n\t\tcase 9:  raw =  28; break;\n\t\tcase 10: raw =  32;\tbreak;\n\t}\n\tSetRawBrightness(raw);\n\tsettings->brightness = value;\n\tSaveSettings();\n}\n\nint GetVolume(void) { // 0-20\n\treturn settings->jack",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\magicmini\\libmsettings\\msettings.c",
        "start": 114,
        "end": 135,
        "startLoc": {
          "line": 114,
          "column": 2,
          "position": 902
        },
        "endLoc": {
          "line": 135,
          "column": 8,
          "position": 1062
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\libmsettings\\msettings.c",
        "start": 135,
        "end": 155,
        "startLoc": {
          "line": 135,
          "column": 2,
          "position": 1035
        },
        "endLoc": {
          "line": 155,
          "column": 11,
          "position": 1194
        }
      }
    },
    {
      "format": "c",
      "lines": 18,
      "fragment": "t val) { // 0-32\n\tif (settings->hdmi) return;\n\t\n\tprintf(\"SetRawBrightness(%i)\\n\", val); fflush(stdout);\n\t// return;\n\n\tchar cmd[256];\n\tsprintf(cmd, \"echo %i > \" BRIGHTNESS_PATH, val);\n\tsystem(cmd);\n}\nvoid SetRawVolume(int val) { // 0 - 100\n\tprintf(\"SetRawVolume(%i)\\n\", val); fflush(stdout);\n\t// return;\n\n\tchar cmd[256];\n\t",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\magicmini\\libmsettings\\msettings.c",
        "start": 150,
        "end": 167,
        "startLoc": {
          "line": 150,
          "column": 50,
          "position": 1180
        },
        "endLoc": {
          "line": 167,
          "column": 2,
          "position": 1308
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\my282\\libmsettings\\msettings.c",
        "start": 149,
        "end": 166,
        "startLoc": {
          "line": 149,
          "column": 54,
          "position": 1233
        },
        "endLoc": {
          "line": 166,
          "column": 2,
          "position": 1361
        }
      }
    },
    {
      "format": "c",
      "lines": 15,
      "fragment": "clude <string.h>\n#include <fcntl.h>\n#include <dirent.h>\n#include <linux/input.h>\n\n#include <msettings.h>\n\n#include <sys/types.h>\n#include <sys/stat.h>\n#include <sys/ioctl.h>\n\n// #include \"defines.h\"\n\n#define VOLUME_MIN \t\t0\n#define VOLUME_MAX \t\t20\n#define BRIGHTNESS_MIN \t0\n#define BRIGHT",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\magicmini\\keymon\\keymon.c",
        "start": 28,
        "end": 42,
        "startLoc": {
          "line": 28,
          "column": 1,
          "position": 29
        },
        "endLoc": {
          "line": 42,
          "column": 20,
          "position": 100
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\my282\\keymon\\keymon.c",
        "start": 28,
        "end": 42,
        "startLoc": {
          "line": 28,
          "column": 1,
          "position": 30
        },
        "endLoc": {
          "line": 42,
          "column": 20,
          "position": 101
        }
      }
    },
    {
      "format": "c",
      "lines": 99,
      "fragment": "RELEASED\t0\n#define PRESSED\t\t1\n#define REPEAT\t\t2\n\n#define INPUT_COUNT 2\nstatic int inputs[INPUT_COUNT];\nstatic struct input_event ev;\n\nint main (int argc, char *argv[]) {\n\tInitSettings();\n\t\n\t// TODO: will require two inputs\n\t// input_fd = open(\"/dev/input/event0\", O_RDONLY | O_NONBLOCK | O_CLOEXEC);\n\tinputs[0] = open(\"/dev/input/event2\", O_RDONLY | O_NONBLOCK | O_CLOEXEC); // gamepad/menu\n\tinputs[1] = open(\"/dev/input/event3\", O_RDONLY | O_NONBLOCK | O_CLOEXEC); // volume\n\t\n\tuint32_t input;\n\tuint32_t val;\n\tuint32_t menu_pressed = 0;\n\t\n\tuint32_t up_pressed = 0;\n\tuint32_t up_just_pressed = 0;\n\tuint32_t up_repeat_at = 0;\n\t\n\tuint32_t down_pressed = 0;\n\tuint32_t down_just_pressed = 0;\n\tuint32_t down_repeat_at = 0;\n\t\n\tuint8_t ignore;\n\tuint32_t then;\n\tuint32_t now;\n\tstruct timeval tod;\n\t\n\tgettimeofday(&tod, NULL);\n\tthen = tod.tv_sec * 1000 + tod.tv_usec / 1000; // essential SDL_GetTicks()\n\tignore = 0;\n\t\n\twhile (1) {\n\t\tgettimeofday(&tod, NULL);\n\t\tnow = tod.tv_sec * 1000 + tod.tv_usec / 1000;\n\t\tif (now-then>1000) ignore = 1; // ignore input that arrived during sleep\n\t\t\n\t\tfor (int i=0; i<INPUT_COUNT; i++) {\n\t\t\tint input_fd = inputs[i];\n\t\t\twhile(read(input_fd, &ev, sizeof(ev))==sizeof(ev)) {\n\t\t\t\tif (ignore) continue;\n\t\t\t\tval = ev.value;\n\n\t\t\t\tif (( ev.type != EV_KEY ) || ( val > REPEAT )) continue;\n\t\t\t\t// printf(\"code: %i (%i)\\n\", ev.code, val); fflush(stdout);\n\t\t\t\tswitch (ev.code) {\n\t\t\t\t\tcase CODE_MENU:\n\t\t\t\t\t\tmenu_pressed = val;\n\t\t\t\t\tbreak;\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase CODE_PLUS:\n\t\t\t\t\t\tup_pressed = up_just_pressed = val;\n\t\t\t\t\t\tif (val) up_repeat_at = now + 300;\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase CODE_MINUS:\n\t\t\t\t\t\tdown_pressed = down_just_pressed = val;\n\t\t\t\t\t\tif (val) down_repeat_at = now + 300;\n\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (ignore) {\n\t\t\tmenu_pressed = 0;\n\t\t\tup_pressed = up_just_pressed = 0;\n\t\t\tdown_pressed = down_just_pressed = 0;\n\t\t\tup_repeat_at = 0;\n\t\t\tdown_repeat_at = 0;\n\t\t}\n\t\t\n\t\tif (up_just_pressed || (up_pressed && now>=up_repeat_at)) {\n\t\t\tif (menu_pressed) {\n\t\t\t\t// printf(\"brightness up\\n\"); fflush(stdout);\n\t\t\t\tval = GetBrightness();\n\t\t\t\tif (val<BRIGHTNESS_MAX) SetBrightness(++val);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// printf(\"volume up\\n\"); fflush(stdout);\n\t\t\t\tval = GetVolume();\n\t\t\t\tif (val<VOLUME_MAX) SetVolume(++val);\n\t\t\t}\n\t\t\t\n\t\t\tif (up_just_pressed) up_just_pressed = 0;\n\t\t\telse up_repeat_at += 100;\n\t\t}\n\t\t\n\t\tif (down_just_pressed ||",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\magicmini\\keymon\\keymon.c",
        "start": 45,
        "end": 143,
        "startLoc": {
          "line": 45,
          "column": 2,
          "position": 147
        },
        "endLoc": {
          "line": 143,
          "column": 2,
          "position": 978
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\keymon\\keymon.c",
        "start": 59,
        "end": 163,
        "startLoc": {
          "line": 59,
          "column": 2,
          "position": 256
        },
        "endLoc": {
          "line": 163,
          "column": 2,
          "position": 1203
        }
      }
    },
    {
      "format": "c",
      "lines": 6,
      "fragment": "clude <errno.h>\n\n#include <msettings.h>\n\n#include \"defines.h\"\n#include \"platform.h\"\n#include \"api.h\"\n#include \"utils.h\"\n\n#include \"scaler.h\"\n\n/////",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\m17\\platform\\platform.c",
        "start": 48,
        "end": 53,
        "startLoc": {
          "line": 48,
          "column": 4,
          "position": 72
        },
        "endLoc": {
          "line": 53,
          "column": 2,
          "position": 138
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rg35xx\\keymon\\keymon.c",
        "start": 66,
        "end": 87,
        "startLoc": {
          "line": 66,
          "column": 3,
          "position": 311
        },
        "endLoc": {
          "line": 87,
          "column": 7,
          "position": 474
        }
      }
    },
    {
      "format": "c",
      "lines": 53,
      "fragment": "///////////////////////////\n\n#define RAW_UP\t\t103\n#define RAW_DOWN\t108\n#define RAW_LEFT\t105\n#define RAW_RIGHT\t106\n#define RAW_A\t\t48\n#define RAW_B\t\t30\n#define RAW_X\t\t21\n#define RAW_Y\t\t45\n#define RAW_START\t28\n#define RAW_SELECT\t54\n#define RAW_MENU\t115\n#define RAW_L1\t\t38\n#define RAW_L2\t\t44\n#define RAW_R1\t\t19\n#define RAW_R2\t\t46\n#define RAW_PLUS\t115\n#define RAW_MINUS\t114\n\n#define RAW_MENU1\tRAW_PLUS\n#define RAW_MENU2\tRAW_MINUS\n\n#define INPUT_COUNT 4\nstatic int inputs[INPUT_COUNT];\n\nvoid PLAT_initInput(void) {\n\tchar path[256];\n\tfor (int i=0; i<INPUT_COUNT; i++) {\n\t\tsprintf(path, \"/dev/input/event%i\", i);\n\t\tinputs[i] = open(path, O_RDONLY | O_NONBLOCK | O_CLOEXEC);\n\t}\n}\nvoid PLAT_quitInput(void) {\n\tfor (int i=0; i<INPUT_COUNT; i++) {\n\t\tclose(inputs[i]);\n\t}\n}\n\n// from <linux/input.h> which has BTN_ constants that conflict with platform.h\nstruct input_event {\n\tstruct timeval time;\n\t__u16 type;\n\t__u16 code;\n\t__s32 value;\n};\n#define EV_KEY\t\t\t0x01\n#define EV_ABS\t\t\t0x03\n\nvoid PLAT_pollInput(void) {\n\t// reset transient state\n\tpad.just_pressed = BTN_NONE;\n\tpad.just_released = BTN_NONE;\n\tpad.just_repeated = BTN_NONE;\n\n\tuint32_t tick = SDL_GetTicks();\n\tfor (int i=0; i<BTN_ID_COUNT; i++) {\n\t\tint btn = 1 << i;\n\t\tif ((pad.is_pressed & btn) && (tick>=pad.repeat_at",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\m17\\platform\\platform.c",
        "start": 53,
        "end": 105,
        "startLoc": {
          "line": 53,
          "column": 1,
          "position": 138
        },
        "endLoc": {
          "line": 105,
          "column": 63,
          "position": 595
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 61,
        "end": 113,
        "startLoc": {
          "line": 61,
          "column": 1,
          "position": 175
        },
        "endLoc": {
          "line": 113,
          "column": 9,
          "position": 632
        }
      }
    },
    {
      "format": "c",
      "lines": 18,
      "fragment": "\n\t\t\tpad.just_repeated |= btn; // set\n\t\t\tpad.repeat_at[i] += PAD_REPEAT_INTERVAL;\n\t\t}\n\t}\n\t\n\t// the actual poll\n\tint input;\n\tstatic struct input_event event;\n\tfor (int i=0; i<INPUT_COUNT; i++) {\n\t\tinput = inputs[i];\n\t\twhile (read(input, &event, sizeof(event))==sizeof(event)) {\n\t\t\tif (event.type!=EV_KEY && event.type!=EV_ABS) continue;\n\n\t\t\tint btn = BTN_NONE;\n\t\t\tint pressed = 0; // 0=up,1=down\n\t\t\tint id = -1;\n\t\t\tint type = event.type;\n\t\t\tint code = event.code;\n\t\t\tint value = event.value;\n\t\t\t\n\t\t\t// TODO: tmp, hardcoded, missing some buttons\n\t\t\tif (type==EV_KEY) {\n\t\t\t\tif (value>1) continue; // ignore repeats\n\t\t\t\t\n\t\t\t\tpressed = value;\n\t\t\t\t// LOG_info(\"key event: %i (%i)\\n\", code,pressed); // no L3/R3\n\t\t\t\t\t if (code==RAW_UP) \t\t{ btn = BTN_DPAD_UP; \t\tid = BTN_ID_DPAD_UP; }\n\t \t\t\telse if (code==RAW_DOWN)\t{ btn = BTN_DPAD_DOWN; \t\tid = BTN_ID_DPAD_DOWN; }\n\t\t\t\telse if (code==RAW_LEFT)\t{ btn = BTN_DPAD_LEFT; \t\tid = BTN_ID_DPAD_LEFT; }\n\t\t\t\telse if (code==RAW_RIGHT)\t{ btn = BTN_DPAD_RIGHT; \tid = BTN_ID_DPAD_RIGHT; }\n\t\t\t\telse if (code==RAW_A)\t\t{ btn = BTN_A; \t\t\t\tid = BTN_ID_A; }\n\t\t\t\telse if (code==RAW_B)\t\t{ btn = BTN_B; \t\t\t\tid = BTN_ID_B; }\n\t\t\t\telse if (code==RAW_X)\t\t{ btn = BTN_X",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\m17\\platform\\platform.c",
        "start": 106,
        "end": 123,
        "startLoc": {
          "line": 106,
          "column": 7,
          "position": 598
        },
        "endLoc": {
          "line": 123,
          "column": 2,
          "position": 1089
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 114,
        "end": 132,
        "startLoc": {
          "line": 114,
          "column": 7,
          "position": 644
        },
        "endLoc": {
          "line": 132,
          "column": 5,
          "position": 1164
        }
      }
    },
    {
      "format": "c",
      "lines": 27,
      "fragment": "TN_ID_MENU; }\n\t\t\t\telse if (code==RAW_MENU2)\t{ btn = BTN_MENU; \t\t\tid = BTN_ID_MENU; }\n\t\t\t\telse if (code==RAW_L1)\t\t{ btn = BTN_L1; \t\t\tid = BTN_ID_L1; }\n\t\t\t\telse if (code==RAW_L2)\t\t{ btn = BTN_L2; \t\t\tid = BTN_ID_L2; }\n\t\t\t\telse if (code==RAW_R1)\t\t{ btn = BTN_R1; \t\t\tid = BTN_ID_R1; }\n\t\t\t\telse if (code==RAW_R2)\t\t{ btn = BTN_R2; \t\t\tid = BTN_ID_R2; }\n\t\t\t}\n\t\t\telse if (type==EV_ABS) {\n\t\t\t\t// LOG_info(\"axis: %i (%i)\\n\",code,value);\n\t\t\t\t// else if (code==RAW_LSX) pad.laxis.x = (value * 32767) / 4096;\n\t\t\t\t// else if (code==RAW_LSY) pad.laxis.y = (value * 32767) / 4096;\n\t\t\t\t// else if (code==RAW_RSX) pad.raxis.x = (value * 32767) / 4096;\n\t\t\t\t// else if (code==RAW_RSY) pad.raxis.y = (",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\m17\\platform\\platform.c",
        "start": 131,
        "end": 157,
        "startLoc": {
          "line": 131,
          "column": 5,
          "position": 1122
        },
        "endLoc": {
          "line": 157,
          "column": 2,
          "position": 1390
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 146,
        "end": 172,
        "startLoc": {
          "line": 146,
          "column": 5,
          "position": 1502
        },
        "endLoc": {
          "line": 172,
          "column": 6,
          "position": 1770
        }
      }
    },
    {
      "format": "c",
      "lines": 17,
      "fragment": "renderer = SDL_CreateRenderer(vid.window,-1,SDL_RENDERER_ACCELERATED|SDL_RENDERER_PRESENTVSYNC);\n\t// SDL_RenderSetVSync(vid.renderer, 0); // added SDL 2.0.18, m17 has 2.0.7\n\t\n\t// SDL_RendererInfo info;\n\t// SDL_GetRendererInfo(vid.renderer, &info);\n\t// LOG_info(\"Current re",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\m17\\platform\\platform.c",
        "start": 245,
        "end": 261,
        "startLoc": {
          "line": 245,
          "column": 2,
          "position": 1901
        },
        "endLoc": {
          "line": 261,
          "column": 11,
          "position": 2013
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 310,
        "end": 326,
        "startLoc": {
          "line": 310,
          "column": 2,
          "position": 2443
        },
        "endLoc": {
          "line": 326,
          "column": 17,
          "position": 2555
        }
      }
    },
    {
      "format": "c",
      "lines": 12,
      "fragment": "erInfo info;\n\t// SDL_GetRendererInfo(vid.renderer, &info);\n\t// LOG_info(\"Current render driver: %s\\n\", info.name);\n\t\n\tvid.texture = SDL_CreateTexture(vid.renderer,SDL_PIXELFORMAT_RGB565, SDL_TEXTUREACCESS_STREAMING, ",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\m17\\platform\\platform.c",
        "start": 255,
        "end": 266,
        "startLoc": {
          "line": 255,
          "column": 9,
          "position": 1985
        },
        "endLoc": {
          "line": 266,
          "column": 19,
          "position": 2055
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 137,
        "end": 149,
        "startLoc": {
          "line": 137,
          "column": 5,
          "position": 1086
        },
        "endLoc": {
          "line": 149,
          "column": 3,
          "position": 1158
        }
      }
    },
    {
      "format": "c",
      "lines": 14,
      "fragment": "TUREACCESS_STREAMING, w,h);\n\tvid.target\t= NULL; // only needed for non-native sizes\n\t\n\tvid.buffer\t= SDL_CreateRGBSurfaceFrom(NULL, w,h, FIXED_DEPTH, p, RGBA_MASK_565);\n\tvid.screen\t= SDL_CreateRGBSurface(SDL_SWSURFACE, w,h, FIXED_DEPTH, RGBA_MASK_565); // is this necessary any more?\n\tvid.width\t= w;\n\tvid.",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\m17\\platform\\platform.c",
        "start": 265,
        "end": 278,
        "startLoc": {
          "line": 265,
          "column": 7,
          "position": 2051
        },
        "endLoc": {
          "line": 278,
          "column": 11,
          "position": 2137
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 149,
        "end": 162,
        "startLoc": {
          "line": 149,
          "column": 7,
          "position": 1171
        },
        "endLoc": {
          "line": 162,
          "column": 16,
          "position": 1257
        }
      }
    },
    {
      "format": "c",
      "lines": 26,
      "fragment": "yWindow(vid.window);\n\tSDL_Quit();\n\n\tsystem(\"cat /dev/zero > /dev/fb0 2>/dev/null\");\n}\n\nvoid PLAT_clearVideo(SDL_Surface* screen) {\n\tSDL_FillRect(screen, NULL, 0); // TODO: revisit\n}\nvoid PLAT_clearAll(void) {\n\tclearVideo();\n}\n\nvoid PLAT_setVsync(int vsync) {\n\t\n}\n\nstatic int hard_scale = 4; // TODO: base src size, eg. 160x144 can be 4 o\n\nstatic void resizeVideo(int w, int h, int p) {\n\tif (w==vid.width && h==vid.height && p==vid.pitch) return;\n\t\n\tif (w>=FIXED_WIDTH && h>=FIXED_HEIGHT) {\n\t\thard_scale = 1;\n\t}\n\telse if (h>=160) {\n\t\thard_scale = 2;\n\t}\n\telse {\n\t\thard_scale = 4;\n\t}\n\n\t// TODO: figure out how to ignore minarch upscale requests\n\tLOG_info(\"resizeVideo(%i,%i,%i) hard_scale: %i\\n\",w,h,p, hard_scale);\n\n\tSDL_FreeSurface(vid.buffer);\n\tSDL_DestroyTexture(vid.texture);\n\tif (vid.target) SDL_DestroyTexture(vid.target);\n\t\n\tSDL_SetHintWithPriority(SDL_HINT_RENDER_SCALE_QUALITY, v",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\m17\\platform\\platform.c",
        "start": 301,
        "end": 326,
        "startLoc": {
          "line": 301,
          "column": 11,
          "position": 2315
        },
        "endLoc": {
          "line": 326,
          "column": 72,
          "position": 2569
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 181,
        "end": 206,
        "startLoc": {
          "line": 181,
          "column": 16,
          "position": 1424
        },
        "endLoc": {
          "line": 206,
          "column": 12,
          "position": 1678
        }
      }
    },
    {
      "format": "c",
      "lines": 18,
      "fragment": ".sharpness==SHARPNESS_SOFT?\"1\":\"0\", SDL_HINT_OVERRIDE);\n\tvid.texture = SDL_CreateTexture(vid.renderer,SDL_PIXELFORMAT_RGB565, SDL_TEXTUREACCESS_STREAMING, w,h);\n\t\n\tif (vid.sharpness==SHARPNESS_CRISP) {\n\t\tSDL_SetHintWithPriority(SDL_HINT_RENDER_SCALE_QUALITY, \"1\", SDL_HINT_OVERRIDE);\n\t\tvid.target\t= SDL_CreateTexture(vid.renderer,SDL_PIXELFORMAT_RGB565, SDL_TEXTUREACCESS_T",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\m17\\platform\\platform.c",
        "start": 327,
        "end": 344,
        "startLoc": {
          "line": 327,
          "column": 2,
          "position": 2572
        },
        "endLoc": {
          "line": 344,
          "column": 5,
          "position": 2714
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 206,
        "end": 224,
        "startLoc": {
          "line": 206,
          "column": 2,
          "position": 1678
        },
        "endLoc": {
          "line": 224,
          "column": 7,
          "position": 1821
        }
      }
    },
    {
      "format": "c",
      "lines": 12,
      "fragment": " h;\n\tvid.pitch\t= p;\n}\n\nSDL_Surface* PLAT_resizeVideo(int w, int h, int p) {\n\t// LOG_info(\"Current audio driver: %s\\n\", SDL_GetCurrentAudioDriver());\n\tresizeVideo(w,h,p);\n\treturn vid.screen;\n}\n\nvoid PLAT_setVideoScaleClip(int x, int y, int width, int height) {\n\t// buh\n}\nv",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\m17\\platform\\platform.c",
        "start": 353,
        "end": 364,
        "startLoc": {
          "line": 353,
          "column": 13,
          "position": 2776
        },
        "endLoc": {
          "line": 364,
          "column": 12,
          "position": 2870
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 367,
        "end": 379,
        "startLoc": {
          "line": 367,
          "column": 13,
          "position": 3226
        },
        "endLoc": {
          "line": 379,
          "column": 13,
          "position": 3322
        }
      }
    },
    {
      "format": "c",
      "lines": 8,
      "fragment": "?\n\t\tSDL_LockTexture(vid.texture,NULL,&vid.buffer->pixels,&vid.buffer->pitch);\n\t\tSDL_BlitSurface(vid.screen, NULL, vid.buffer, NULL);\n\t\tSDL_UnlockTexture(vid.texture);\n\t\tSDL_RenderCopy(vid.renderer, vid.texture, NULL,NULL);\n\t\tSDL_RenderPresent",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\m17\\platform\\platform.c",
        "start": 382,
        "end": 389,
        "startLoc": {
          "line": 382,
          "column": 8,
          "position": 3091
        },
        "endLoc": {
          "line": 389,
          "column": 2,
          "position": 3178
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 393,
        "end": 400,
        "startLoc": {
          "line": 393,
          "column": 6,
          "position": 3515
        },
        "endLoc": {
          "line": 400,
          "column": 2,
          "position": 3602
        }
      }
    },
    {
      "format": "c",
      "lines": 30,
      "fragment": "t* src_rect = &(SDL_Rect){0,0,w,h};\n\tSDL_Rect* dst_rect = NULL;\n\tif (vid.blit->aspect==0) { // native or cropped\n\t\tint w = vid.blit->src_w * vid.blit->scale;\n\t\tint h = vid.blit->src_h * vid.blit->scale;\n\t\tint x = (FIXED_WIDTH - w) / 2;\n\t\tint y = (FIXED_HEIGHT - h) / 2;\n\t\tdst_rect = &(SDL_Rect){x,y,w,h};\n\t}\n\telse if (vid.blit->aspect>0) { // aspect\n\t\tint h = FIXED_HEIGHT;\n\t\tint w = h * vid.blit->aspect;\n\t\tif (w>FIXED_WIDTH) {\n\t\t\tdouble ratio = 1 / vid.blit->aspect;\n\t\t\tw = FIXED_WIDTH;\n\t\t\th = w * ratio;\n\t\t}",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\m17\\platform\\platform.c",
        "start": 417,
        "end": 446,
        "startLoc": {
          "line": 417,
          "column": 2,
          "position": 3558
        },
        "endLoc": {
          "line": 446,
          "column": 5,
          "position": 3697
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 456,
        "end": 485,
        "startLoc": {
          "line": 456,
          "column": 2,
          "position": 4309
        },
        "endLoc": {
          "line": 485,
          "column": 7,
          "position": 4448
        }
      }
    },
    {
      "format": "c",
      "lines": 11,
      "fragment": "efine OVERLAY_HEIGHT PILL_SIZE // unscaled\n#define OVERLAY_BPP 4\n#define OVERLAY_DEPTH 16\n#define OVERLAY_PITCH (OVERLAY_WIDTH * OVERLAY_BPP) // unscaled\n#define OVERLAY_RGBA_MASK 0x00ff000",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\m17\\platform\\platform.c",
        "start": 454,
        "end": 464,
        "startLoc": {
          "line": 454,
          "column": 2,
          "position": 3810
        },
        "endLoc": {
          "line": 464,
          "column": 5,
          "position": 3866
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 494,
        "end": 505,
        "startLoc": {
          "line": 494,
          "column": 7,
          "position": 4577
        },
        "endLoc": {
          "line": 505,
          "column": 2,
          "position": 4635
        }
      }
    },
    {
      "format": "c",
      "lines": 17,
      "fragment": " =  10;\n}\n\nvoid PLAT_getBatteryStatusFine(int* is_charging, int* charge)\n{\n\t// *is_charging = 0;\n\t// *charge = PWR_LOW_CHARGE;\n\t// return;\n\t\n\tchar state[256];\n\t\n\t// works with old model\n\tgetFile(\"/sys/class/udc/10180000.usb/state\", state, 256);\n\t*is_charging = strncmp(\"not attached\",state,strle",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\m17\\platform\\platform.c",
        "start": 490,
        "end": 506,
        "startLoc": {
          "line": 490,
          "column": 2,
          "position": 4021
        },
        "endLoc": {
          "line": 506,
          "column": 66,
          "position": 4100
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 532,
        "end": 511,
        "startLoc": {
          "line": 532,
          "column": 2,
          "position": 4804
        },
        "endLoc": {
          "line": 511,
          "column": 4,
          "position": 4539
        }
      }
    },
    {
      "format": "c",
      "lines": 12,
      "fragment": "(\"not attached\")); // I don't understand how this works, if it's a match it would equal 0 which is false...\n\t\n\t// nothing works with new model :sob:\n\t// getFile(\"/sys/class/",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\m17\\platform\\platform.c",
        "start": 507,
        "end": 518,
        "startLoc": {
          "line": 507,
          "column": 1,
          "position": 4102
        },
        "endLoc": {
          "line": 518,
          "column": 6,
          "position": 4166
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\trimuismart\\platform\\platform.c",
        "start": 522,
        "end": 533,
        "startLoc": {
          "line": 522,
          "column": 1,
          "position": 4656
        },
        "endLoc": {
          "line": 533,
          "column": 15,
          "position": 4720
        }
      }
    },
    {
      "format": "c",
      "lines": 67,
      "fragment": "fcn.h>\n#include <string.h>\n\n#include \"msettings.h\"\n\n///////////////////////////////////////\n\n#define SETTINGS_VERSION 2\ntypedef struct Settings {\n\tint version; // future proofing\n\tint brightness;\n\tint headphones;\n\tint speaker;\n\tint unused[3]; // for future use\n\t// NOTE: doesn't really need to be persisted but still needs to be shared\n\tint jack; \n} Settings;\nstatic Settings DefaultSettings = {\n\t.version = SETTINGS_VERSION,\n\t.brightness = 2,\n\t.headphones = 4,\n\t.speaker = 8,\n\t.jack = 0,\n};\nstatic Settings* settings;\n\n#define SHM_KEY \"/SharedSettings\"\nstatic char SettingsPath[256];\nstatic int shm_fd = -1;\nstatic int is_host = 0;\nstatic int shm_size = sizeof(Settings);\n\n// #define BACKLIGHT_PATH \"/sys/class/backlight/backlight/bl_power\"\n// #define BRIGHTNESS_PATH \"/sys/class/backlight/backlight/brightness\"\n// #define JACK_STATE_PATH \"/sys/bus/platform/devices/singleadc-joypad/hp\"\n// #define HDMI_STATE_PATH \"/sys/class/extcon/hdmi/cable.0/state\"\n\nint getInt(char* path) {\n\tint i = 0;\n\tFILE *file = fopen(path, \"r\");\n\tif (file!=NULL) {\n\t\tfscanf(file, \"%i\", &i);\n\t\tfclose(file);\n\t}\n\treturn i;\n}\n\n\nvoid InitSettings(void) {\t\n\tsprintf(SettingsPath, \"%s/msettings.bin\", getenv(\"USERDATA_PATH\"));\n\t\n\tshm_fd = shm_open(SHM_KEY, O_RDWR | O_CREAT | O_EXCL, 0644); // see if it exists\n\tif (shm_fd==-1 && errno==EEXIST) { // already exists\n\t\t// puts(\"Settings client\");\n\t\tshm_fd = shm_open(SHM_KEY, O_RDWR, 0644);\n\t\tsettings = mmap(NULL, shm_size, PROT_READ | PROT_WRITE, MAP_SHARED, shm_fd, 0);\n\t}\n\telse { // host\n\t\t// puts(\"Settings host\"); // keymon\n\t\tis_host = 1;\n\t\t// we created it so set initial size and populate\n\t\tftruncate(shm_fd, shm_size);\n\t\tsettings = mmap(NULL, shm_size, PROT_READ | PROT_WRITE, MAP_SHARED, shm_fd, 0);\n\t\t\n\t\tint fd = open(SettingsPath, O_RDONLY);\n\t\tif (fd>=0) {\n\t\t\tread(fd, settings, shm_size);\n\t\t\t// TODO: use settings->version for future proofing?\n\t\t\t",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\m17\\libmsettings\\msettings.c",
        "start": 22,
        "end": 88,
        "startLoc": {
          "line": 22,
          "column": 2,
          "position": 57
        },
        "endLoc": {
          "line": 88,
          "column": 86,
          "position": 570
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\libmsettings\\msettings.c",
        "start": 25,
        "end": 91,
        "startLoc": {
          "line": 25,
          "column": 2,
          "position": 66
        },
        "endLoc": {
          "line": 91,
          "column": 4,
          "position": 594
        }
      }
    },
    {
      "format": "c",
      "lines": 24,
      "fragment": ", shm_size);\n\t\t}\n\t\t\n\t\t// these shouldn't be persisted\n\t\t// settings->jack = 0;\n\t\t// settings->hdmi = 0;\n\t}\n\t// printf(\"brightness: %i\\nspeaker: %i \\n\", settings->brightness, settings->speaker);\n\t\n\t// SetJack(getInt(JACK_STATE_PATH));\n\t// SetHDMI(getInt(HDMI_STATE_PATH));\n\tSetVolume(GetVolume());\n\tSetBrightness(GetBrightness());\n}\nvoid QuitSettings(void) {\n\tmunmap(settings, shm_size);\n\tif (is_host) shm_unlink(SHM_KEY);\n}\nstatic inline void SaveSettings(void) {\n\tin",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\m17\\libmsettings\\msettings.c",
        "start": 92,
        "end": 115,
        "startLoc": {
          "line": 92,
          "column": 2,
          "position": 581
        },
        "endLoc": {
          "line": 115,
          "column": 5,
          "position": 768
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\libmsettings\\msettings.c",
        "start": 99,
        "end": 99,
        "startLoc": {
          "line": 99,
          "column": 2,
          "position": 634
        },
        "endLoc": {
          "line": 99,
          "column": 3,
          "position": 692
        }
      }
    },
    {
      "format": "c",
      "lines": 12,
      "fragment": "8000; break;\n\t\tcase 1: raw=7500; break;\n\t\tcase 2: raw=7000; break;\n\t\tcase 3: raw=6500; break; \n\t\tcase 4: raw=6000; break;\n\t\tcase 5: raw=5000; break;\n\t\tcase 6: raw=4000; break;\n\t\tcase 7: raw=3000; break;\n\t\tcase 8: raw=2000; break;\n\t\tcase 9: raw=1",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\m17\\libmsettings\\msettings.c",
        "start": 125,
        "end": 136,
        "startLoc": {
          "line": 125,
          "column": 2,
          "position": 910
        },
        "endLoc": {
          "line": 136,
          "column": 31,
          "position": 989
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\magicmini\\libmsettings\\msettings.c",
        "start": 113,
        "end": 124,
        "startLoc": {
          "line": 113,
          "column": 3,
          "position": 896
        },
        "endLoc": {
          "line": 124,
          "column": 3,
          "position": 969
        }
      }
    },
    {
      "format": "c",
      "lines": 9,
      "fragment": " break;\n\t\tcase 10: raw=0; break;\n\t}\n\tSetRawBrightness(raw);\n\tsettings->brightness = value;\n\tSaveSettings();\n}\n\nint GetVolume(void) { // 0-20\n\treturn settings->jack ? settings->headphones : settings->spea",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\m17\\libmsettings\\msettings.c",
        "start": 138,
        "end": 146,
        "startLoc": {
          "line": 138,
          "column": 2,
          "position": 994
        },
        "endLoc": {
          "line": 146,
          "column": 25,
          "position": 1065
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\libmsettings\\msettings.c",
        "start": 147,
        "end": 155,
        "startLoc": {
          "line": 147,
          "column": 2,
          "position": 1122
        },
        "endLoc": {
          "line": 155,
          "column": 11,
          "position": 1194
        }
      }
    },
    {
      "format": "c",
      "lines": 8,
      "fragment": "\n\telse settings->speaker = value;\n\n\tint raw = value * 5;\n\tSetRawVolume(raw);\n\tSaveSettings();\n}\n\nvoid SetRawBrightne",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\m17\\libmsettings\\msettings.c",
        "start": 149,
        "end": 156,
        "startLoc": {
          "line": 149,
          "column": 16,
          "position": 1096
        },
        "endLoc": {
          "line": 156,
          "column": 7,
          "position": 1150
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\libmsettings\\msettings.c",
        "start": 159,
        "end": 166,
        "startLoc": {
          "line": 159,
          "column": 16,
          "position": 1223
        },
        "endLoc": {
          "line": 166,
          "column": 54,
          "position": 1277
        }
      }
    },
    {
      "format": "c",
      "lines": 8,
      "fragment": "lue * 5;\n\tSetRawVolume(raw);\n\tSaveSettings();\n}\n\nvoid SetRawBrightness(int val) { // 8000-0 (>8000 == off)\n\t// if (settings->hdmi) return;\n\tprintf(\"SetRawBrightness(%i)\\n\", val); fflush(stdout);\n\tint fd = o",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\m17\\libmsettings\\msettings.c",
        "start": 151,
        "end": 158,
        "startLoc": {
          "line": 151,
          "column": 4,
          "position": 1121
        },
        "endLoc": {
          "line": 158,
          "column": 64,
          "position": 1180
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\libmsettings\\msettings.c",
        "start": 161,
        "end": 168,
        "startLoc": {
          "line": 161,
          "column": 6,
          "position": 1290
        },
        "endLoc": {
          "line": 168,
          "column": 53,
          "position": 1349
        }
      }
    },
    {
      "format": "c",
      "lines": 11,
      "fragment": "pen(\"/dev/gpio-pwm\", O_WRONLY);\n\tif (fd>=0) {\n\t\tdprintf(fd,\"%d\",val);\n\t\tclose(fd);\n\t}\n}\nvoid SetRawVolume(int val) { // 0 - 100\n\tprintf(\"SetRawVolume(%i)\\n\", val); fflush(stdou",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\m17\\libmsettings\\msettings.c",
        "start": 158,
        "end": 168,
        "startLoc": {
          "line": 158,
          "column": 64,
          "position": 1181
        },
        "endLoc": {
          "line": 168,
          "column": 7,
          "position": 1233
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\libmsettings\\msettings.c",
        "start": 168,
        "end": 178,
        "startLoc": {
          "line": 168,
          "column": 44,
          "position": 1295
        },
        "endLoc": {
          "line": 178,
          "column": 51,
          "position": 1347
        }
      }
    },
    {
      "format": "c",
      "lines": 29,
      "fragment": "tf(fd,\"%d\",val);\n\t\tclose(fd);\n\t}\n}\nvoid SetRawVolume(int val) { // 0 - 100\n\tprintf(\"SetRawVolume(%i)\\n\", val); fflush(stdout);\n\tchar cmd[256];\n\tsprintf(cmd, \"amixer cset name='Master Playback Volume' %i%%,0 &> /dev/null\", val);\n\t// puts(cmd); fflush(stdout);\n\tsystem(cmd);\n}\n\n// monitored and set by thread in keymon\nint GetJack(void) {\n\treturn settings->jack;\n}\nvoid SetJack(int value) {\n\tprintf(\"SetJack(%i)\\n\", value); fflush(stdout);\n\n\tsettings->jack = value;\n\tSetVolume(GetVolume());\n}\n\nint GetHDMI(void) {\t\n\t// printf(\"GetHDMI() %i\\n\", settings->hdmi); fflush(stdout);\n\t// return settings->hdmi;\n\treturn 0;\n}\nvoid SetHDMI(int value) {\n\t// printf",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\m17\\libmsettings\\msettings.c",
        "start": 161,
        "end": 189,
        "startLoc": {
          "line": 161,
          "column": 1,
          "position": 1197
        },
        "endLoc": {
          "line": 189,
          "column": 2,
          "position": 1339
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\libmsettings\\msettings.c",
        "start": 202,
        "end": 231,
        "startLoc": {
          "line": 202,
          "column": 1,
          "position": 1473
        },
        "endLoc": {
          "line": 231,
          "column": 9,
          "position": 1617
        }
      }
    },
    {
      "format": "c",
      "lines": 31,
      "fragment": ".h>\n#include <pthread.h>\n\n#include <msettings.h>\n\n#include <sys/types.h>\n#include <sys/stat.h>\n#include <sys/ioctl.h>\n\n// #include \"defines.h\"\n\n#define VOLUME_MIN \t\t0\n#define VOLUME_MAX \t\t20\n#define BRIGHTNESS_MIN \t0\n#define BRIGHTNESS_MAX \t10\n\n#define CODE_PLUS\t\t115\n#define CODE_MINUS\t\t114\n\n#define CODE_SELECT\t\t 54\n#define CODE_START\t\t 28\n#define CODE_L1\t\t \t 38\n#define CODE_R1\t\t \t 19\n\n#define RELEASED\t0\n#define PRESSED\t\t1\n\n#define INPUT_COUNT 4\nstatic int inputs[INPUT_COUNT];\nstatic struct input_event ev;\n\nstatic pthread_t ports_pt;\n#define JAC",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\m17\\keymon\\keymon.c",
        "start": 42,
        "end": 72,
        "startLoc": {
          "line": 42,
          "column": 1,
          "position": 66
        },
        "endLoc": {
          "line": 72,
          "column": 7,
          "position": 290
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\libmsettings\\msettings.c",
        "start": 50,
        "end": 63,
        "startLoc": {
          "line": 50,
          "column": 1,
          "position": 220
        },
        "endLoc": {
          "line": 63,
          "column": 13,
          "position": 280
        }
      }
    },
    {
      "format": "c",
      "lines": 13,
      "fragment": "static struct input_event ev;\n\nstatic pthread_t ports_pt;\n#define JACK_STATE_PATH \"/sys/devices/virtual/switch/h2w/state\" // 0 or 2\n\nint getInt(char* path) {\n\tint i = 0;\n\tFILE *file = f",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\m17\\keymon\\keymon.c",
        "start": 64,
        "end": 76,
        "startLoc": {
          "line": 64,
          "column": 15,
          "position": 249
        },
        "endLoc": {
          "line": 76,
          "column": 4,
          "position": 333
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\keymon\\keymon.c",
        "start": 69,
        "end": 82,
        "startLoc": {
          "line": 69,
          "column": 9,
          "position": 319
        },
        "endLoc": {
          "line": 82,
          "column": 3,
          "position": 404
        }
      }
    },
    {
      "format": "c",
      "lines": 7,
      "fragment": "ILE *file = fopen(path, \"r\");\n\tif (file!=NULL) {\n\t\tfscanf(file, \"%i\", &i);\n\t\tfclose(file);\n\t}\n\treturn i;\n}\n\nstatic void* watchPorts(void *arg) {\n\tint has_headphones,had_headphones;\n\t\n\thas_headphones = had_headphones = getInt(JACK_STA",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\m17\\keymon\\keymon.c",
        "start": 76,
        "end": 82,
        "startLoc": {
          "line": 76,
          "column": 2,
          "position": 329
        },
        "endLoc": {
          "line": 82,
          "column": 72,
          "position": 403
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\m17\\platform\\platform.c",
        "start": 48,
        "end": 87,
        "startLoc": {
          "line": 48,
          "column": 2,
          "position": 67
        },
        "endLoc": {
          "line": 87,
          "column": 7,
          "position": 474
        }
      }
    },
    {
      "format": "c",
      "lines": 21,
      "fragment": "_PATH);\n\tSetJack(has_headphones);\n\t\n\twhile(1) {\n\t\tsleep(1);\n\t\t\n\t\thas_headphones = getInt(JACK_STATE_PATH);\n\t\tif (had_headphones!=has_headphones) {\n\t\t\thad_headphones = has_headphones;\n\t\t\tSetJack(has_headphones);\n\t\t}\n\t}\n\t\n\treturn 0;\n}\n\nint main (int argc, char *argv[]) {\n\tprintf(\"keymon\\n\"); fflush(stdout);\n\tInitSettings();\n\tpthread_create(&ports_pt, NULL, &watchPorts, NULL);\n\t\n\tchar path[256];\n\tfor (int i",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\m17\\keymon\\keymon.c",
        "start": 83,
        "end": 103,
        "startLoc": {
          "line": 83,
          "column": 2,
          "position": 406
        },
        "endLoc": {
          "line": 103,
          "column": 4,
          "position": 566
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\trimuismart\\keymon\\keymon.c",
        "start": 30,
        "end": 50,
        "startLoc": {
          "line": 30,
          "column": 2,
          "position": 95
        },
        "endLoc": {
          "line": 50,
          "column": 6,
          "position": 255
        }
      }
    },
    {
      "format": "c",
      "lines": 9,
      "fragment": "for (int i=0; i<INPUT_COUNT; i++) {\n\t\tsprintf(path, \"/dev/input/event%i\", i);\n\t\tinputs[i] = open(path, O_RDONLY | O_NONBLOCK | O_CLOEXEC);\n\t}\n\t\n\t// TODO: make sure manually handlin",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\m17\\keymon\\keymon.c",
        "start": 101,
        "end": 109,
        "startLoc": {
          "line": 101,
          "column": 5,
          "position": 561
        },
        "endLoc": {
          "line": 109,
          "column": 3,
          "position": 646
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\platform\\platform.c",
        "start": 362,
        "end": 88,
        "startLoc": {
          "line": 362,
          "column": 2,
          "position": 3913
        },
        "endLoc": {
          "line": 88,
          "column": 7,
          "position": 547
        }
      }
    },
    {
      "format": "c",
      "lines": 19,
      "fragment": ");\n\t}\n\t\n\t// TODO: make sure manually handling repeat is necessary on this device\n\tuint32_t input;\n\tuint32_t val;\n\tuint32_t start_pressed = 0;\n\tuint32_t select_pressed = 0;\n\t\n\tuint32_t up_pressed = 0;\n\tuint32_t up_just_pressed = 0;\n\tuint32_t up_repeat_at = 0;\n\t\n\tuint32_t down_pressed = 0;\n\tuint32_t down_just_pressed = 0;\n\tuint32_t down_repeat_at = 0;\n\t\n\tuint32_t now;\n\tstruct timeval tod;\n\t\n\twhile (1) {\n\t\tgettimeofday(&tod, NULL);\n\t\tnow = tod.tv_sec * 1000 + tod.tv_usec / 1000;\n\t",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\m17\\keymon\\keymon.c",
        "start": 108,
        "end": 126,
        "startLoc": {
          "line": 108,
          "column": 6,
          "position": 622
        },
        "endLoc": {
          "line": 126,
          "column": 5,
          "position": 797
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\trimuismart\\keymon\\keymon.c",
        "start": 50,
        "end": 69,
        "startLoc": {
          "line": 50,
          "column": 9,
          "position": 260
        },
        "endLoc": {
          "line": 69,
          "column": 8,
          "position": 437
        }
      }
    },
    {
      "format": "c",
      "lines": 34,
      "fragment": ".type != EV_KEY ) continue;\n\t\t\t\tval = ev.value;\n\t\t\t\tswitch (ev.code) {\n\t\t\t\t\tcase CODE_START:\n\t\t\t\t\t\tstart_pressed = val;\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase CODE_SELECT:\n\t\t\t\t\t\tselect_pressed = val;\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase CODE_R1:\n\t\t\t\t\t\tup_pressed = up_just_pressed = val;\n\t\t\t\t\t\tif (val) up_repeat_at = now + 300;\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase CODE_L1:\n\t\t\t\t\t\tdown_pressed = down_just_pressed = val;\n\t\t\t\t\t\tif (val) down_repeat_at = now + 300;\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase CODE_PLUS:\n\t\t\t\t\tcase CODE_MINUS:\n\t\t\t\t\t\tsystem(\"echo 0 > /sys/devices/platform/0gpio-keys/scaled\");\n\t\t\t\t\t\tSetVolume(GetVolume());\n\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (up_just_pressed || (up_pressed && now>=up_repeat_at)) {\n\t\t\tif (start_pressed) {\n\t\t\t\tval = GetBrightness();\n\t\t\t\tif (val<BRIGHTNE",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\m17\\keymon\\keymon.c",
        "start": 134,
        "end": 167,
        "startLoc": {
          "line": 134,
          "column": 4,
          "position": 840
        },
        "endLoc": {
          "line": 167,
          "column": 2,
          "position": 1121
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\trimuismart\\keymon\\keymon.c",
        "start": 71,
        "end": 104,
        "startLoc": {
          "line": 71,
          "column": 4,
          "position": 445
        },
        "endLoc": {
          "line": 104,
          "column": 2,
          "position": 726
        }
      }
    },
    {
      "format": "c",
      "lines": 18,
      "fragment": "LAT_clearVideo(SDL_Surface* IGNORED) {\n\tmemset(vid.screen->pixels, 0, FIXED_SIZE);\n}\nvoid PLAT_clearAll(void) {\n\tPLAT_clearVideo(vid.screen);\n}\n\nvoid PLAT_setVsync(int vsync) {\n\t// buh\n}\n\nSDL_Surface* PLAT_resizeVideo(int w, int h, int pitch) {\n\tPLAT_clearVideo(vid.screen);\n\treturn vid.",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\gkdpixel\\platform\\platform.c",
        "start": 65,
        "end": 82,
        "startLoc": {
          "line": 65,
          "column": 7,
          "position": 281
        },
        "endLoc": {
          "line": 82,
          "column": 3,
          "position": 386
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\platform\\platform.c",
        "start": 206,
        "end": 312,
        "startLoc": {
          "line": 206,
          "column": 2,
          "position": 1685
        },
        "endLoc": {
          "line": 312,
          "column": 6,
          "position": 2717
        }
      }
    },
    {
      "format": "c",
      "lines": 7,
      "fragment": "le_240x160_320x213(void* __restrict src_, void* __restrict dst_, uint32_t src_w, uint32_t src_h, uint32_t src_pitch, uint32_t dst_w, uint32_t dst_h,",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\gkdpixel\\platform\\platform.c",
        "start": 303,
        "end": 309,
        "startLoc": {
          "line": 303,
          "column": 2,
          "position": 2569
        },
        "endLoc": {
          "line": 309,
          "column": 12,
          "position": 2630
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\gkdpixel\\platform\\platform.c",
        "start": 241,
        "end": 246,
        "startLoc": {
          "line": 241,
          "column": 3,
          "position": 1425
        },
        "endLoc": {
          "line": 246,
          "column": 9,
          "position": 1484
        }
      }
    },
    {
      "format": "c",
      "lines": 6,
      "fragment": "32_t dst_h, uint32_t dst_pitch) {\n\tuint16_t* src = src_;\n\tuint16_t* dst = dst_;\n\t\n\tconst uint32_t src_skip = src_pitch - src_w * FIXED_BPP;\n\tconst uint32_t dst_skip = dst_pitch - dst_w * F",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\gkdpixel\\platform\\platform.c",
        "start": 309,
        "end": 314,
        "startLoc": {
          "line": 309,
          "column": 4,
          "position": 2630
        },
        "endLoc": {
          "line": 314,
          "column": 17,
          "position": 2709
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\gkdpixel\\platform\\platform.c",
        "start": 249,
        "end": 254,
        "startLoc": {
          "line": 249,
          "column": 4,
          "position": 1492
        },
        "endLoc": {
          "line": 254,
          "column": 9,
          "position": 1572
        }
      }
    },
    {
      "format": "c",
      "lines": 7,
      "fragment": "_skip = dst_pitch - dst_w * FIXED_BPP;\n\t\n\t// upscale 3x3 pixel chunks to 4x4\n\tfor (uint_fast16_t chunk_y=0; chunk_y<src_h/3; chunk_y++) {\n\t\tfor (uint_fast16_t chunk_x=0; chunk_x<src",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\gkdpixel\\platform\\platform.c",
        "start": 312,
        "end": 318,
        "startLoc": {
          "line": 312,
          "column": 4,
          "position": 2700
        },
        "endLoc": {
          "line": 318,
          "column": 13,
          "position": 2770
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\gkdpixel\\platform\\platform.c",
        "start": 260,
        "end": 266,
        "startLoc": {
          "line": 260,
          "column": 2,
          "position": 1734
        },
        "endLoc": {
          "line": 266,
          "column": 9,
          "position": 1803
        }
      }
    },
    {
      "format": "c",
      "lines": 6,
      "fragment": "t r = (chunk_x==src_w/3-1) ? 4 : 6;\n\n\t\t\t// a b c\n\t\t\t// e f g\n\t\t\t// i j k\n\t\t\t\n\t\t\t// read src\n\t\t\tuint16_t aaa = (*(uint16_t*)((uint8_t*)src              ));\n\t\t\tuint16_t ",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\gkdpixel\\platform\\platform.c",
        "start": 320,
        "end": 325,
        "startLoc": {
          "line": 320,
          "column": 4,
          "position": 2776
        },
        "endLoc": {
          "line": 325,
          "column": 4,
          "position": 2861
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\gkdpixel\\platform\\platform.c",
        "start": 275,
        "end": 280,
        "startLoc": {
          "line": 275,
          "column": 4,
          "position": 1927
        },
        "endLoc": {
          "line": 280,
          "column": 30,
          "position": 2015
        }
      }
    },
    {
      "format": "c",
      "lines": 8,
      "fragment": "  +4));\n\n\t\t\tuint16_t eee = (*(uint16_t*)((uint8_t*)src+src_pitch    ));\n\t\t\tuint16_t fff = (*(uint16_t*)((uint8_t*)src+src_pitch  +2));\n\t\t\tuint16_t ggg = (*(uint16_t*)((uint8_t*)src+src_pitch  +4));\n\n\t\t\tuint16_t iii = (*(uint16_t*)((uint8_t*)src+src_pitch*2  ));\n\t\t\tuint16_t jjj = (*(uint16_t*)((uint8_t*)src+src_pitch*2+2));\n\t\t\tuint16_t kkk = (*(uint16_t",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\gkdpixel\\platform\\platform.c",
        "start": 331,
        "end": 338,
        "startLoc": {
          "line": 331,
          "column": 22,
          "position": 2898
        },
        "endLoc": {
          "line": 338,
          "column": 35,
          "position": 3014
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\gkdpixel\\platform\\platform.c",
        "start": 233,
        "end": 240,
        "startLoc": {
          "line": 233,
          "column": 22,
          "position": 1287
        },
        "endLoc": {
          "line": 240,
          "column": 35,
          "position": 1403
        }
      }
    },
    {
      "format": "c",
      "lines": 6,
      "fragment": ": SUBPIXEL_2_1(bbb,ccc);\n\n\t\t\tuint16_t eff = likely(eee==fff) ? eee : SUBPIXEL_1_2(eee,fff);\n\t\t\tuint16_t ffg = likely(fff==ggg) ? fff : SUBPIXEL_2_1(fff,ggg);\n\n\t\t\tuint16_t ijj = likely(iii==jjj) ? iii : SUBPIXEL_",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\gkdpixel\\platform\\platform.c",
        "start": 345,
        "end": 350,
        "startLoc": {
          "line": 345,
          "column": 4,
          "position": 3076
        },
        "endLoc": {
          "line": 350,
          "column": 4,
          "position": 3158
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\gkdpixel\\platform\\platform.c",
        "start": 249,
        "end": 254,
        "startLoc": {
          "line": 249,
          "column": 4,
          "position": 1492
        },
        "endLoc": {
          "line": 254,
          "column": 4,
          "position": 1574
        }
      }
    },
    {
      "format": "c",
      "lines": 14,
      "fragment": "uint8_t*)dst+dst_pitch  +6) = likely(bcc==eff) ? bcc : AVERAGE_2_1(bcc,eff);\n\t\t\t*(uint16_t*)((uint8_t*)dst+dst_pitch  +8) = likely(ccc==fff) ? ccc : AVERAGE_2_1(ccc,fff);\n\n\t\t\t*(uint16_t*)((uint8_t*)dst+dst_pitch*2  ) = ddd;\n\t\t\t*(uint16_t*)((uint8_t*)dst+dst_pitch*2+2) = dde;\n\t\t\t*(uint16_t*)((uint8_t*)dst+dst_pitch*2+4) = eee;\n\t\t\t*(uint16_t*)((uint8_t*)dst+dst_pitch*2+6) = eff;\n\t\t\t*(uint16_t*)((uint8_t*)dst+dst_pitch*2+8) = fff;\n\t\t\t\n\t\t\t*(uint16_t*)((uint8_t*)dst+dst_pitch*3  ) = likely(ddd==ggg) ? ddd : AVERAGE_2_1(ggg,ddd);\n\t\t\t*(uint16_t*)((uint8_t*)dst+dst_pitch*3+2) = likely(dde==ggh) ? dde : AVERAGE_2_1(ggh,dde)",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\gkdpixel\\platform\\platform.c",
        "start": 462,
        "end": 475,
        "startLoc": {
          "line": 462,
          "column": 2,
          "position": 5246
        },
        "endLoc": {
          "line": 475,
          "column": 12,
          "position": 5487
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\gkdpixel\\platform\\platform.c",
        "start": 442,
        "end": 455,
        "startLoc": {
          "line": 442,
          "column": 2,
          "position": 4865
        },
        "endLoc": {
          "line": 455,
          "column": 2,
          "position": 5106
        }
      }
    },
    {
      "format": "c",
      "lines": 13,
      "fragment": "*)((uint8_t*)dst+dst_pitch*4+4) = hhh;\n\t\t\t*(uint16_t*)((uint8_t*)dst+dst_pitch*4+6) = hii;\n\t\t\t*(uint16_t*)((uint8_t*)dst+dst_pitch*4+8) = iii;\n\t\t\t\n\t\t\tsrc += 3; // skip 3 columns\n\t\t\tdst += 5; // skip 5 columns\n\t\t}\n\t\tsrc = (uint16_t*)((uint8_t*)src + src_skip + (3-1) * src_pitch); // skip 3 rows\n\t\tdst = (uint16_t*)((uint8_t*)dst + dst_skip + (5-1) * dst_pitch); // skip 5 rows\n\t}\n}\n\nstatic inline void scale_256x224_320x238(void* __restrict src_, void* __restrict dst_, uint32_t src_w, uint32_t src_h, uint32_t src_pitch, uint32_t dst_w, uint32_t dst_h, uint32_t dst_pitch) {\n\tuint16_t* src = src_",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\gkdpixel\\platform\\platform.c",
        "start": 489,
        "end": 501,
        "startLoc": {
          "line": 489,
          "column": 4,
          "position": 5666
        },
        "endLoc": {
          "line": 501,
          "column": 2,
          "position": 5900
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\gkdpixel\\platform\\platform.c",
        "start": 443,
        "end": 475,
        "startLoc": {
          "line": 443,
          "column": 5,
          "position": 4874
        },
        "endLoc": {
          "line": 475,
          "column": 5,
          "position": 5489
        }
      }
    },
    {
      "format": "c",
      "lines": 26,
      "fragment": "_y<src_h; chunk_y+=16) {\n\t\tfor (uint_fast16_t chunk_x=0; chunk_x<src_w; chunk_x+=4) {\n\t\t\t\n\t\t\t// TODO: this is probably a terrible idea\n\t\t\tuint_fast16_t row;\n\t\t\tuint16_t a,b,c,d,e; // previous rows columns\n\t\t\tfor (row=0; row<3; row++) {\n\t\t\t\t// read src\n\t\t\t\tuint16_t aaaa = (*(uint16_t*)((uint8_t*)src+src_pitch*row ));\n\t\t\t\tuint16_t bbbb = (*(uint16_t*)((uint8_t*)src+src_pitch*row+2));\n\t\t\t\tuint16_t cccc = (*(uint16_t*)((uint8_t*)src+src_pitch*row+4));\n\t\t\t\tuint16_t dddd = (*(uint16_t*)((uint8_t*)src+src_pitch*row+6));\n\t\t\t\t\n\t\t\t\t// blend columns\n\t\t\t\tuint16_t abbb = likely(aaaa==bbbb) ? aaaa : SUBPIXEL_1_3(aaaa,bbbb);\n\t\t\t\tuint16_t bbcc = likely(bbbb==cccc) ? bbbb : SUBPIXEL_1_1(bbbb,cccc);\n\t\t\t\tuint16_t cccd = likely(cccc==dddd) ? cccc : SUBPIXEL_3_1(cccc,dddd);\n\t\t\t\t\n\t\t\t\t// write dst\n\t\t\t\t*(uint16_t*)((uint8_t*)dst+dst_pitch*row  ) = a = aaaa;\n\t\t\t\t*(uint16_t*)((uint8_t*)dst+dst_pitch*row+2) = b = abbb;\n\t\t\t\t*(uint16_t*)((uint8_t*)dst+dst_pitch*row+4) = c = bbcc;\n\t\t\t\t*(uint16_t*)((uint8_t*)dst+dst_pitch*row+6) = ",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\gkdpixel\\platform\\platform.c",
        "start": 514,
        "end": 539,
        "startLoc": {
          "line": 514,
          "column": 3,
          "position": 6085
        },
        "endLoc": {
          "line": 539,
          "column": 2,
          "position": 6500
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\gkdpixel\\platform\\platform.c",
        "start": 442,
        "end": 514,
        "startLoc": {
          "line": 442,
          "column": 2,
          "position": 4865
        },
        "endLoc": {
          "line": 514,
          "column": 4,
          "position": 6074
        }
      }
    },
    {
      "format": "c",
      "lines": 13,
      "fragment": "(uint8_t*)dst+dst_pitch*row+8) = e = dddd;\n\t\t\t}\n\t\t\t\n\t\t\tfor (row=3; row<8; row++) {\n\t\t\t\t// read src\n\t\t\t\tuint16_t aaaa = (*(uint16_t*)((uint8_t*)src+src_pitch*row ));\n\t\t\t\tuint16_t bbbb = (*(uint16_t*)((uint8_t*)src+src_pitch*row+2));\n\t\t\t\tuint16_t cccc = (*(uint16_t*)((uint8_t*)src+src_pitch*row+4));\n\t\t\t\tuint16_t dddd = (*(uint16_t*)((uint8_t*)src+src_pitch*row+6));\n\t\t\t\t\n\t\t\t\t// blend columns\n\t\t\t\tuint16_t abbb = likely(aaaa==bbbb) ? aaaa : SUBPIXEL_1_3(aaaa,bbbb);\n\t\t\t\tuint16_t bbcc = likely(bbbb==cccc) ? bbbb : SUBPIXEL_1_1(bbbb,cccc);\n\t\t\t\tuint16_",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\gkdpixel\\platform\\platform.c",
        "start": 541,
        "end": 553,
        "startLoc": {
          "line": 541,
          "column": 3,
          "position": 6516
        },
        "endLoc": {
          "line": 553,
          "column": 2,
          "position": 6734
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\gkdpixel\\platform\\platform.c",
        "start": 442,
        "end": 454,
        "startLoc": {
          "line": 442,
          "column": 2,
          "position": 4865
        },
        "endLoc": {
          "line": 454,
          "column": 13,
          "position": 5083
        }
      }
    },
    {
      "format": "c",
      "lines": 26,
      "fragment": "aaaa : SUBPIXEL_1_3(aaaa,bbbb);\n\t\t\t\tuint16_t bbcc = likely(bbbb==cccc) ? bbbb : SUBPIXEL_1_1(bbbb,cccc);\n\t\t\t\tuint16_t cccd = likely(cccc==dddd) ? cccc : SUBPIXEL_3_1(cccc,dddd);\n\t\t\t\t\n\t\t\t\t// write dst\n\t\t\t\t*(uint16_t*)((uint8_t*)dst+dst_pitch*row  ) = AVERAGE_3_1(a,aaaa);\n\t\t\t\t*(uint16_t*)((uint8_t*)dst+dst_pitch*row+2) = AVERAGE_3_1(b,abbb);\n\t\t\t\t*(uint16_t*)((uint8_t*)dst+dst_pitch*row+4) = AVERAGE_3_1(c,bbcc);\n\t\t\t\t*(uint16_t*)((uint8_t*)dst+dst_pitch*row+6) = AVERAGE_3_1(d,cc",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\gkdpixel\\platform\\platform.c",
        "start": 600,
        "end": 625,
        "startLoc": {
          "line": 600,
          "column": 2,
          "position": 7387
        },
        "endLoc": {
          "line": 625,
          "column": 7,
          "position": 7516
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\trimuismart\\platform\\platform.c",
        "start": 393,
        "end": 481,
        "startLoc": {
          "line": 393,
          "column": 5,
          "position": 3726
        },
        "endLoc": {
          "line": 481,
          "column": 2,
          "position": 4442
        }
      }
    },
    {
      "format": "c",
      "lines": 20,
      "fragment": "d);\n\t\t\t\t*(uint16_t*)((uint8_t*)dst+dst_pitch*row+8) = AVERAGE_3_1(e,dddd);\n\t\t\t\t\n\t\t\t\t// store src row\n\t\t\t\ta = aaaa;\n\t\t\t\tb = abbb;\n\t\t\t\tc = bbcc;\n\t\t\t\td = cccd;\n\t\t\t\te = dddd;\n\t\t\t}\n\t\t\t\n\t\t\tfor (row=13; row<16; row++) {\n\t\t\t\t// read src\n\t\t\t\tuint16_t aaaa = (*(uint16_t*)((uint8_t*)src+src_pitch*row ));\n\t\t\t\tuint16_t bbbb = (*(uint16_t*)((uint8_t*)src+src_pitch*row+2));\n\t\t\t\tuint16_t cccc = (*(uint16_t*)((uint8_t*)src+src_pitch*row+4));\n\t\t\t\tuint16_t dddd = (*(uint16_t*)((uint8_t*)src+src_pitch*row+6));\n\t\t\t\t\n\t\t\t\t// blend columns\n\t\t\t\tuint16_t abbb = likely(aaaa==bbbb)",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\gkdpixel\\platform\\platform.c",
        "start": 626,
        "end": 645,
        "startLoc": {
          "line": 626,
          "column": 1,
          "position": 7518
        },
        "endLoc": {
          "line": 645,
          "column": 37,
          "position": 7695
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rg35xx\\platform\\platform.c",
        "start": 526,
        "end": 544,
        "startLoc": {
          "line": 526,
          "column": 1,
          "position": 5037
        },
        "endLoc": {
          "line": 544,
          "column": 49,
          "position": 5213
        }
      }
    },
    {
      "format": "c",
      "lines": 21,
      "fragment": ")dst+dst_pitch*(row+1)+2) = abbb;\n\t\t\t\t*(uint16_t*)((uint8_t*)dst+dst_pitch*(row+1)+4) = bbcc;\n\t\t\t\t*(uint16_t*)((uint8_t*)dst+dst_pitch*(row+1)+6) = cccd;\n\t\t\t\t*(uint16_t*)((uint8_t*)dst+dst_pitch*(row+1)+8) = dddd;\n\t\t\t}\n\t\t\t\n\t\t\tsrc += 4; // skip 4 columns\n\t\t\tdst += 5; //",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\gkdpixel\\platform\\platform.c",
        "start": 652,
        "end": 672,
        "startLoc": {
          "line": 652,
          "column": 2,
          "position": 7750
        },
        "endLoc": {
          "line": 672,
          "column": 7,
          "position": 7844
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\platform\\platform.c",
        "start": 688,
        "end": 511,
        "startLoc": {
          "line": 688,
          "column": 19,
          "position": 5970
        },
        "endLoc": {
          "line": 511,
          "column": 4,
          "position": 4539
        }
      }
    },
    {
      "format": "c",
      "lines": 12,
      "fragment": "skip 5 columns\n\t\t}\n\t\tsrc = (uint16_t*)((uint8_t*)src + src_skip + (16-1) * src_pitch); // skip 16 rows\n\t\tdst = (uint16_t*)((uint8_t*)dst + dst_skip + (17-1) * dst_pitch); // skip ",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\gkdpixel\\platform\\platform.c",
        "start": 673,
        "end": 684,
        "startLoc": {
          "line": 673,
          "column": 1,
          "position": 7846
        },
        "endLoc": {
          "line": 684,
          "column": 12,
          "position": 7910
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\trimuismart\\platform\\platform.c",
        "start": 522,
        "end": 533,
        "startLoc": {
          "line": 522,
          "column": 1,
          "position": 4656
        },
        "endLoc": {
          "line": 533,
          "column": 15,
          "position": 4720
        }
      }
    },
    {
      "format": "c",
      "lines": 72,
      "fragment": "o.h>\n#include <stdlib.h>\n#include <unistd.h>\n#include <fcntl.h>\n#include <sys/mman.h>\n#include <linux/fb.h>\n#include <sys/ioctl.h>\n#include <errno.h>\n#include <sys/stat.h>\n#include <dlfcn.h>\n#include <string.h>\n\n#include \"msettings.h\"\n\n///////////////////////////////////////\n\n#define SETTINGS_VERSION 2\ntypedef struct Settings {\n\tint version; // future proofing\n\tint brightness;\n\tint headphones;\n\tint speaker;\n\tint unused[2]; // for future use\n\t// NOTE: doesn't really need to be persisted but still needs to be shared\n\tint jack; \n\tint hdmi; \n} Settings;\nstatic Settings DefaultSettings = {\n\t.version = SETTINGS_VERSION,\n\t.brightness = 2,\n\t.headphones = 4,\n\t.speaker = 8,\n\t.jack = 0,\n\t.hdmi = 0,\n};\nstatic Settings* settings;\n\n#define SHM_KEY \"/SharedSettings\"\nstatic char SettingsPath[256];\nstatic int shm_fd = -1;\nstatic int is_host = 0;\nstatic int shm_size = sizeof(Settings);\n\nint getInt(char* path) {\n\tint i = 0;\n\tFILE *file = fopen(path, \"r\");\n\tif (file!=NULL) {\n\t\tfscanf(file, \"%i\", &i);\n\t\tfclose(file);\n\t}\n\treturn i;\n}\n\nvoid InitSettings(void) {\t\n\tsprintf(SettingsPath, \"%s/msettings.bin\", getenv(\"USERDATA_PATH\"));\n\t\n\tshm_fd = shm_open(SHM_KEY, O_RDWR | O_CREAT | O_EXCL, 0644); // see if it exists\n\tif (shm_fd==-1 && errno==EEXIST) { // already exists\n\t\tputs(\"Settings client\");\n\t\tshm_fd = shm_open(SHM_KEY, O_RDWR, 0644);\n\t\tsettings = mmap(NULL, shm_size, PROT_READ | PROT_WRITE, MAP_SHARED, shm_fd, 0);\n\t}\n\telse { // host\n\t\tputs(\"Settings host\"); // should always be keymon\n\t\tis_host = 1;\n\t\t// we created it so set initial size and populate\n\t\tftruncate(shm_fd, shm_size);\n\t\tsettings = mmap(NULL, shm_size, PROT_READ | PROT_WRITE, MAP_SHARED, shm_fd, 0);\n\t\t\n\t\tint fd = open(SettingsPath, O_RDONLY);\n\t\tif (fd>=0) ",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\gkdpixel\\libmsettings\\msettings.c",
        "start": 15,
        "end": 86,
        "startLoc": {
          "line": 15,
          "column": 1,
          "position": 14
        },
        "endLoc": {
          "line": 86,
          "column": 2,
          "position": 595
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\libmsettings\\msettings.c",
        "start": 14,
        "end": 91,
        "startLoc": {
          "line": 14,
          "column": 1,
          "position": 13
        },
        "endLoc": {
          "line": 91,
          "column": 7,
          "position": 600
        }
      }
    },
    {
      "format": "c",
      "lines": 25,
      "fragment": "settings, &DefaultSettings, shm_size);\n\t\t}\n\t\t\n\t\t// these shouldn't be persisted\n\t\t// settings->jack = 0;\n\t\t// settings->hdmi = 0;\n\t}\n\t\n\tint jack = 0;\n\tint hdmi = 0;\n\tprintf(\"brightness: %i (hdmi: %i)\\nspeaker: %i (jack: %i)\\n\", settings->brightness, hdmi, settings->speaker, jack); fflush(stdout);\n\t\n\tSetBrightness(GetBrightness());\n\t// system(\"echo $(< \" BRIGHTNESS_PATH \")\");\n}\nvoid QuitSettings(void) {\n\tmunmap(settings, shm_size);\n\tif (is_host) shm_unlink(SHM_KEY);\n}\nstatic inline void SaveSettings(void) {\n\tint fd =",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\gkdpixel\\libmsettings\\msettings.c",
        "start": 88,
        "end": 112,
        "startLoc": {
          "line": 88,
          "column": 7,
          "position": 634
        },
        "endLoc": {
          "line": 112,
          "column": 45,
          "position": 811
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\libmsettings\\msettings.c",
        "start": 97,
        "end": 121,
        "startLoc": {
          "line": 97,
          "column": 5,
          "position": 664
        },
        "endLoc": {
          "line": 121,
          "column": 4,
          "position": 841
        }
      }
    },
    {
      "format": "c",
      "lines": 21,
      "fragment": "e);\n\t\tclose(fd);\n\t\tsync();\n\t}\n}\n\nint GetBrightness(void) { // 0-10\n\treturn settings->brightness;\n}\nvoid SetBrightness(int value) {\n\tif (settings->hdmi) return;\n\t\n\t// TODO: this needs a curve, 1,10,20,30 are \n\t// indistinguishable, even in near dark\n\tint raw = value * 10;\n\tif (!raw) raw = 5;\n\t\n\tSetRawBrightness(raw);\n\tsettings->brightness = value;\n\tSaveSettings();\n}\n\nint GetVolume(void) { // 0-20\n\treturn settings->jack ? ",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\gkdpixel\\libmsettings\\msettings.c",
        "start": 117,
        "end": 137,
        "startLoc": {
          "line": 117,
          "column": 2,
          "position": 848
        },
        "endLoc": {
          "line": 137,
          "column": 11,
          "position": 1005
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\libmsettings\\msettings.c",
        "start": 136,
        "end": 155,
        "startLoc": {
          "line": 136,
          "column": 2,
          "position": 1038
        },
        "endLoc": {
          "line": 155,
          "column": 11,
          "position": 1194
        }
      }
    },
    {
      "format": "c",
      "lines": 36,
      "fragment": "f(cmd, \"echo %i > /sys/devices/platform/jz-pwm-dev.0/jz-pwm/pwm0/dutyratio\", val);\n\tsystem(cmd);\n}\nvoid SetRawVolume(int val) { // 0 - 100\n\t// printf(\"SetRawVolume(%i)\\n\", val); fflush(stdout);\n\t\n\t// TODO: this is still weird\n\tif (val) val = 60 + (val * 2) / 5;\n\tchar cmd[256];\n\tsprintf(cmd, \"amixer sset 'PCM' %i%% > /dev/null 2>&1\", val);\n\t// // puts(cmd); fflush(stdout);\n\tsystem(cmd);\n}\n\n// monitored and set by thread in keymon\nint GetJack(void) {\n\treturn settings->jack;\n}\nvoid SetJack(int value) {\n\t// printf(\"SetJack(%i)\\n\", value); fflush(stdout);\n\t\n\t// char cmd[256];\n\t// sprintf(cmd, \"amixer cset name='Playback Path' '%s' &> /dev/null\", value?\"HP\":\"SPK\");\n\t// system(cmd);\n\t\n\tsettings->jack = value;\n\tSetVolume(GetVolume());\n}\n\nint GetHDMI(void) {\t\n\t// printf(\"GetHDMI() %i\\n\", settings->hdmi); fflush(stdout);\n\treturn settings->hdmi;",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\gkdpixel\\libmsettings\\msettings.c",
        "start": 153,
        "end": 188,
        "startLoc": {
          "line": 153,
          "column": 42,
          "position": 1123
        },
        "endLoc": {
          "line": 188,
          "column": 2,
          "position": 1323
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\libmsettings\\msettings.c",
        "start": 168,
        "end": 203,
        "startLoc": {
          "line": 168,
          "column": 53,
          "position": 1350
        },
        "endLoc": {
          "line": 203,
          "column": 2,
          "position": 1520
        }
      }
    },
    {
      "format": "c",
      "lines": 7,
      "fragment": "clude <stdint.h>\n#include <unistd.h>\n#include <string.h>\n#include <fcntl.h>\n#include <dirent.h>\n#include <linux/input.h>\n\n#include <msettings.h>\n\n#include <sys/types.h>\n#i",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\gkdpixel\\keymon\\keymon.c",
        "start": 28,
        "end": 34,
        "startLoc": {
          "line": 28,
          "column": 1,
          "position": 28
        },
        "endLoc": {
          "line": 34,
          "column": 2,
          "position": 92
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\trimuismart\\keymon\\keymon.c",
        "start": 22,
        "end": 28,
        "startLoc": {
          "line": 22,
          "column": 1,
          "position": 21
        },
        "endLoc": {
          "line": 28,
          "column": 2,
          "position": 86
        }
      }
    },
    {
      "format": "c",
      "lines": 20,
      "fragment": "include <sys/stat.h>\n#include <sys/ioctl.h>\n\n#include \"defines.h\"\n\n#define VOLUME_MIN \t\t0\n#define VOLUME_MAX \t\t20\n#define BRIGHTNESS_MIN \t0\n#define BRIGHTNESS_MAX \t10\n\n//\tfor ev.value\n#define RELEASED\t0\n#define PRESSED\t\t1\n#define REPEAT\t\t2\n\nstatic int\tinput_fd = 0;\nstatic struct input_event ev;\n\nint main (int argc, char *argv[]) ",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\gkdpixel\\keymon\\keymon.c",
        "start": 34,
        "end": 53,
        "startLoc": {
          "line": 34,
          "column": 11,
          "position": 92
        },
        "endLoc": {
          "line": 53,
          "column": 13,
          "position": 214
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\keymon\\keymon.c",
        "start": 87,
        "end": 76,
        "startLoc": {
          "line": 87,
          "column": 10,
          "position": 495
        },
        "endLoc": {
          "line": 76,
          "column": 13,
          "position": 372
        }
      }
    },
    {
      "format": "c",
      "lines": 10,
      "fragment": "menu_pressed = 0;\n\t\n\tuint32_t up_pressed = 0;\n\tuint32_t up_just_pressed = 0;\n\tuint32_t up_repeat_at = 0;\n\t\n\tuint32_t down_pressed = 0;\n\tuint32_t down_just_pressed = 0;\n\tuint32_t down_repeat_at = 0;\n\t\n\tuint8_t ignore;\n\tuint32_t then;\n\tuint32_t now;\n\tstruct timeval tod;\n\t\n\t// TODO: tmp\n\t// ui",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\gkdpixel\\keymon\\keymon.c",
        "start": 59,
        "end": 68,
        "startLoc": {
          "line": 59,
          "column": 2,
          "position": 231
        },
        "endLoc": {
          "line": 68,
          "column": 6,
          "position": 344
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\keymon\\keymon.c",
        "start": 76,
        "end": 85,
        "startLoc": {
          "line": 76,
          "column": 2,
          "position": 372
        },
        "endLoc": {
          "line": 85,
          "column": 4,
          "position": 485
        }
      }
    },
    {
      "format": "c",
      "lines": 22,
      "fragment": " ignore;\n\tuint32_t then;\n\tuint32_t now;\n\tstruct timeval tod;\n\t\n\t// TODO: tmp\n\t// uint32_t l1_pressed = 0;\n\t// uint32_t r1_pressed = 0;\n\t// uint32_t select_pressed = 0;\n\t// uint32_t start_pressed = 0;\n\t\n\tgettimeofday(&tod, NULL);\n\tthen = tod.tv_sec * 1000 + tod.tv_usec / 1000; // essential SDL_GetTicks()\n\tignore = 0;\n\t\n\twhile (1) {\n\t\tgettimeofday(&tod, NULL);\n\t\tnow = tod.tv_sec * 1000 + tod.tv_usec / 1000;\n\t\tif (now-then>1000) ignore = 1; // ignore input that arrived during sleep\n\t\t\n\t\twhile(read(input_fd, &ev, sizeof(ev))==sizeof(ev)) {\n\t\t\tif (ignore) continue;\n\t\t\tval = ev.value;\n\n\t\t\tif (( ev.type != EV_KEY ) || ( val > REPEAT )",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\gkdpixel\\keymon\\keymon.c",
        "start": 66,
        "end": 87,
        "startLoc": {
          "line": 66,
          "column": 3,
          "position": 322
        },
        "endLoc": {
          "line": 87,
          "column": 13,
          "position": 539
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\keymon\\keymon.c",
        "start": 100,
        "end": 112,
        "startLoc": {
          "line": 100,
          "column": 3,
          "position": 551
        },
        "endLoc": {
          "line": 112,
          "column": 8,
          "position": 791
        }
      }
    },
    {
      "format": "c",
      "lines": 14,
      "fragment": "p_just_pressed = val;\n\t\t\t\t\tif (val) up_repeat_at = now + 300;\n\t\t\t\tbreak;\n\t\t\t\tcase CODE_MINUS:\n\t\t\t\t\tdown_pressed = down_just_pressed = val;\n\t\t\t\t\tif (val) down_repeat_at = now + 300;\n\t\t\t\tbreak;\n\t\t\t\t// TODO: tmp\n\t\t\t",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\gkdpixel\\keymon\\keymon.c",
        "start": 92,
        "end": 105,
        "startLoc": {
          "line": 92,
          "column": 5,
          "position": 554
        },
        "endLoc": {
          "line": 105,
          "column": 13,
          "position": 632
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\keymon\\keymon.c",
        "start": 121,
        "end": 126,
        "startLoc": {
          "line": 121,
          "column": 5,
          "position": 768
        },
        "endLoc": {
          "line": 126,
          "column": 3,
          "position": 872
        }
      }
    },
    {
      "format": "c",
      "lines": 38,
      "fragment": "t:\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (ignore) {\n\t\t\tmenu_pressed = 0;\n\t\t\tup_pressed = up_just_pressed = 0;\n\t\t\tdown_pressed = down_just_pressed = 0;\n\t\t\tup_repeat_at = 0;\n\t\t\tdown_repeat_at = 0;\n\t\t}\n\t\t\n\t\t// TODO: tmp\n\t\t// if (l1_pressed && r1_pressed && start_pressed && select_pressed) {\n\t\t// \tsystem(\"sync && killall -9 minarch.elf\"); // TODO: tmp\n\t\t// \tsystem(\"sync && killall -9 launch.sh\"); // TODO: tmp\n\t\t// }\n\t\t\n\t\tif (up_just_pressed || (up_pressed && now>=up_repeat_at)) {\n\t\t\tif (menu_pressed) {\n\t\t\t\t// printf(\"brightness up\\n\"); fflush(stdout);\n\t\t\t\tval = GetBrightness();\n\t\t\t\tif (val<BRIGHTNESS_MAX) SetBrightness(++val);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// printf(\"volume up\\n\"); fflush(stdout);\n\t\t\t\tval = GetVolume();\n\t\t\t\tif (val<VOLUME_MAX) SetVolume(++val);\n\t\t\t}\n\t\t\t\n\t\t\tif (up_just_pressed) up_just_pressed = 0;\n\t\t\telse up_repeat_at += 100;\n\t\t}\n\t\t\n\t\tif (down_just_pressed || (down_pressed && now>=down_repeat_at)) {\n\t\t\tif (menu_pressed) {\n\t\t\t",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\_unmaintained\\gkdpixel\\keymon\\keymon.c",
        "start": 111,
        "end": 148,
        "startLoc": {
          "line": 111,
          "column": 3,
          "position": 649
        },
        "endLoc": {
          "line": 148,
          "column": 2,
          "position": 940
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rg35xxplus\\keymon\\keymon.c",
        "start": 134,
        "end": 163,
        "startLoc": {
          "line": 134,
          "column": 3,
          "position": 846
        },
        "endLoc": {
          "line": 163,
          "column": 2,
          "position": 1203
        }
      }
    },
    {
      "format": "c",
      "lines": 8,
      "fragment": "status = DA_CMD_SUCCESS;\n\tstruct wifi_status s = {\n\t\t.state = STATE_UNKNOWN ,\n\t\t.ssid = {'\\0'},\n\t};\n\n\twmg_printf(MSG_DEBUG,\"ctl cmd: status start -+- \\n\");\n\n\tif(NULL ",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\tg5040\\wifimanager\\daemon\\wifid_ctrl.c",
        "start": 217,
        "end": 224,
        "startLoc": {
          "line": 217,
          "column": 2,
          "position": 1628
        },
        "endLoc": {
          "line": 224,
          "column": 29,
          "position": 1682
        }
      },
      "secondFile": {
        "name": "workspace\\tg5040\\wifimanager\\daemon\\wifid_ctrl.c",
        "start": 192,
        "end": 199,
        "startLoc": {
          "line": 192,
          "column": 6,
          "position": 1424
        },
        "endLoc": {
          "line": 199,
          "column": 35,
          "position": 1478
        }
      }
    },
    {
      "format": "c",
      "lines": 11,
      "fragment": "s = DA_CMD_SUCCESS;\n\tstruct connection_status s = {\n\t\t.ssid = {'\\0'},\n\t\t.ip_address = {'\\0'},\n\t\t.freq = -1,\n\t\t.rssi = -1,\n\t\t.link_speed = -1,\n\t\t.noise = -1,\n\t};\n\n\twmg_printf(MSG_DEBUG,\"ctl cmd: info start -+- \\n\");\n\n\tif(NULL == p_wi",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\tg5040\\wifimanager\\daemon\\wifid_ctrl.c",
        "start": 244,
        "end": 254,
        "startLoc": {
          "line": 244,
          "column": 20,
          "position": 1842
        },
        "endLoc": {
          "line": 254,
          "column": 27,
          "position": 1928
        }
      },
      "secondFile": {
        "name": "workspace\\tg5040\\wifimanager\\daemon\\wifid_ctrl.c",
        "start": 214,
        "end": 199,
        "startLoc": {
          "line": 214,
          "column": 11,
          "position": 1596
        },
        "endLoc": {
          "line": 199,
          "column": 35,
          "position": 1478
        }
      }
    },
    {
      "format": "c",
      "lines": 8,
      "fragment": "status = DA_CMD_SUCCESS;\n\tchar scan_results[SCAN_MAX] = {0};\n\tint len = SCAN_MAX;\n\n\twmg_printf(MSG_DEBUG,\"ctl cmd: scan start -+- \\n\");\n\n\tif(NULL == p_wifi_interfa",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\tg5040\\wifimanager\\daemon\\wifid_ctrl.c",
        "start": 271,
        "end": 278,
        "startLoc": {
          "line": 271,
          "column": 4,
          "position": 2064
        },
        "endLoc": {
          "line": 278,
          "column": 27,
          "position": 2117
        }
      },
      "secondFile": {
        "name": "workspace\\tg5040\\wifimanager\\daemon\\wifid_ctrl.c",
        "start": 192,
        "end": 199,
        "startLoc": {
          "line": 192,
          "column": 2,
          "position": 1425
        },
        "endLoc": {
          "line": 199,
          "column": 35,
          "position": 1478
        }
      }
    },
    {
      "format": "c",
      "lines": 8,
      "fragment": "_results[LIST_NETWORK_MAX] = {0};\n\n\twmg_printf(MSG_DEBUG,\"ctl cmd: list network start -+- \\n\");\n\n\tif(NULL == p_wifi_interface)\n\t\tgoto code_failed;\n\n\tif(p_wifi_interface->l",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\tg5040\\wifimanager\\daemon\\wifid_ctrl.c",
        "start": 295,
        "end": 302,
        "startLoc": {
          "line": 295,
          "column": 17,
          "position": 2245
        },
        "endLoc": {
          "line": 302,
          "column": 35,
          "position": 2298
        }
      },
      "secondFile": {
        "name": "workspace\\tg5040\\wifimanager\\daemon\\wifid_ctrl.c",
        "start": 192,
        "end": 199,
        "startLoc": {
          "line": 192,
          "column": 2,
          "position": 1425
        },
        "endLoc": {
          "line": 199,
          "column": 35,
          "position": 1478
        }
      }
    },
    {
      "format": "c",
      "lines": 8,
      "fragment": "onst aw_wifi_interface_t *p_wifi_interface, int fd)\n{\n\tenum cmd_status status = DA_CMD_SUCCESS;\n\tstruct WmgStaEvt StaEvt = {CONNECTED,WSE_UNKNOWN};\n\n\twmg_printf(MSG_DEBUG,\"c",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\tg5040\\wifimanager\\daemon\\wifid_ctrl.c",
        "start": 315,
        "end": 322,
        "startLoc": {
          "line": 315,
          "column": 5,
          "position": 2403
        },
        "endLoc": {
          "line": 322,
          "column": 37,
          "position": 2456
        }
      },
      "secondFile": {
        "name": "workspace\\tg5040\\wifimanager\\daemon\\wifid_ctrl.c",
        "start": 192,
        "end": 199,
        "startLoc": {
          "line": 192,
          "column": 2,
          "position": 1425
        },
        "endLoc": {
          "line": 199,
          "column": 35,
          "position": 1478
        }
      }
    },
    {
      "format": "c",
      "lines": 6,
      "fragment": "d error:%s\\n\",strerror(errno));\n\t\treturn -1;\n\t}\n\n\tif ((len = recvmsg(fd, &msg, MSG_CMSG_CLOEXEC)) == -1)\n\t\treturn -",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\tg5040\\wifimanager\\daemon\\wifid_cmd_iface.c",
        "start": 102,
        "end": 107,
        "startLoc": {
          "line": 102,
          "column": 15,
          "position": 679
        },
        "endLoc": {
          "line": 107,
          "column": 26,
          "position": 724
        }
      },
      "secondFile": {
        "name": "workspace\\tg5040\\wifimanager\\daemon\\wifid_cmd_iface.c",
        "start": 50,
        "end": 54,
        "startLoc": {
          "line": 50,
          "column": 2,
          "position": 209
        },
        "endLoc": {
          "line": 54,
          "column": 29,
          "position": 253
        }
      }
    },
    {
      "format": "c",
      "lines": 14,
      "fragment": "n);\n\nend:\n\thandle_command_free(&cli);\n\treturn ret ;\n}\n\nint aw_wifid_get_status(struct wifi_status *sptr)\n{\n\tstruct da_requst req = {\n\t\t.command = DA_COMMAND_NET_STATUS,\n\t\t.ssid = {0},\n\t\t.pwd = {0},\n\t};\n\tstruct client ",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\tg5040\\wifimanager\\daemon\\wifid_cmd_handle.c",
        "start": 72,
        "end": 85,
        "startLoc": {
          "line": 72,
          "column": 22,
          "position": 365
        },
        "endLoc": {
          "line": 85,
          "column": 2,
          "position": 474
        }
      },
      "secondFile": {
        "name": "workspace\\tg5040\\wifimanager\\daemon\\wifid_cmd_handle.c",
        "start": 48,
        "end": 62,
        "startLoc": {
          "line": 48,
          "column": 16,
          "position": 195
        },
        "endLoc": {
          "line": 62,
          "column": 8,
          "position": 305
        }
      }
    },
    {
      "format": "c",
      "lines": 14,
      "fragment": "le_command_free(&cli);\n\treturn ret ;\n}\n\nint aw_wifid_get_connection(struct connection_status *sptr)\n{\n\tstruct da_requst req = {\n\t\t.command = DA_COMMAND_CONNECTION_INFO,\n\t\t.ssid = {0},\n\t\t.pwd = {0},\n\t};\n\tstruct client cli = {\n\t\t.enable_pipe = true,\n\t};\n\n\tint",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\tg5040\\wifimanager\\daemon\\wifid_cmd_handle.c",
        "start": 95,
        "end": 108,
        "startLoc": {
          "line": 95,
          "column": 27,
          "position": 543
        },
        "endLoc": {
          "line": 108,
          "column": 18,
          "position": 661
        }
      },
      "secondFile": {
        "name": "workspace\\tg5040\\wifimanager\\daemon\\wifid_cmd_handle.c",
        "start": 48,
        "end": 85,
        "startLoc": {
          "line": 48,
          "column": 16,
          "position": 195
        },
        "endLoc": {
          "line": 85,
          "column": 12,
          "position": 484
        }
      }
    },
    {
      "format": "c",
      "lines": 8,
      "fragment": "uct client cli = {\n\t\t.enable_pipe = true,\n\t};\n\n\tif (NULL != ssid)\n\t\tstrncpy(req.ssid,ssid,strlen(ssid));\n\n\tif (NULL != passwd)\n\t\tstrncpy(req.pwd,p",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\tg5040\\wifimanager\\daemon\\wifid_cmd_handle.c",
        "start": 131,
        "end": 138,
        "startLoc": {
          "line": 131,
          "column": 2,
          "position": 842
        },
        "endLoc": {
          "line": 138,
          "column": 9,
          "position": 904
        }
      },
      "secondFile": {
        "name": "workspace\\tg5040\\wifimanager\\daemon\\wifid_cmd_handle.c",
        "start": 55,
        "end": 85,
        "startLoc": {
          "line": 55,
          "column": 2,
          "position": 246
        },
        "endLoc": {
          "line": 85,
          "column": 5,
          "position": 478
        }
      }
    },
    {
      "format": "c",
      "lines": 13,
      "fragment": "\n\nend:\n\thandle_command_free(&cli);\n\treturn ret;\n}\n\nint aw_wifid_list_networks(char *reply, size_t len)\n{\n\tstruct da_requst req = {\n\t\t.command = DA_COMMAND_L",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\tg5040\\wifimanager\\daemon\\wifid_cmd_handle.c",
        "start": 171,
        "end": 183,
        "startLoc": {
          "line": 171,
          "column": 24,
          "position": 1140
        },
        "endLoc": {
          "line": 183,
          "column": 4,
          "position": 1230
        }
      },
      "secondFile": {
        "name": "workspace\\tg5040\\wifimanager\\daemon\\wifid_cmd_handle.c",
        "start": 48,
        "end": 61,
        "startLoc": {
          "line": 48,
          "column": 16,
          "position": 195
        },
        "endLoc": {
          "line": 61,
          "column": 3,
          "position": 286
        }
      }
    },
    {
      "format": "c",
      "lines": 19,
      "fragment": "ude <stdio.h>\n#include <unistd.h>\n#include <SDL2/SDL.h>\n#include <SDL2/SDL_image.h>\n\nSDL_Window* window;\nSDL_Surface* screen;\n\nint main(int argc , char* argv[]) {\n\tif (argc<2) {\n\t\tputs(\"Usage: show.elf image.png delay\");\n\t\treturn 0;\n\t}\n\t\n\tchar path[256];\n\tstrncpy(path,argv[1],256);\n\tif (access(path, F_OK)!=0) return 0; // nothing to show :(\n\t\n\tint delay = a",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\tg5040\\show\\show.c",
        "start": 7,
        "end": 25,
        "startLoc": {
          "line": 7,
          "column": 1,
          "position": 7
        },
        "endLoc": {
          "line": 25,
          "column": 7,
          "position": 161
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\show\\show.c",
        "start": 7,
        "end": 30,
        "startLoc": {
          "line": 7,
          "column": 1,
          "position": 7
        },
        "endLoc": {
          "line": 30,
          "column": 4,
          "position": 156
        }
      }
    },
    {
      "format": "c",
      "lines": 17,
      "fragment": "\n\twindow = SDL_CreateWindow(\"\", SDL_WINDOWPOS_UNDEFINED, SDL_WINDOWPOS_UNDEFINED, 0,0, SDL_WINDOW_SHOWN);\n\tputs(\"\");\n\t\n\tscreen = SDL_GetWindowSurface(window); \n\tSDL_FillRect(screen, NULL, 0);\n\t \n\tSDL_Surface* img = IMG_Load(path); \n\tSDL_BlitSurface(img, NULL, screen, &(SDL_Rect){(screen->w-img->w)/2,(screen->h-img->h)/2});\n\t\n\tSDL_UpdateWindowSurface(window);\n\tsleep(d",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\tg5040\\show\\show.c",
        "start": 25,
        "end": 41,
        "startLoc": {
          "line": 25,
          "column": 2,
          "position": 179
        },
        "endLoc": {
          "line": 41,
          "column": 2,
          "position": 324
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\show\\show.c",
        "start": 27,
        "end": 43,
        "startLoc": {
          "line": 27,
          "column": 2,
          "position": 199
        },
        "endLoc": {
          "line": 43,
          "column": 2,
          "position": 344
        }
      }
    },
    {
      "format": "c",
      "lines": 11,
      "fragment": "at.h>\n#include <sys/ioctl.h>\n\n// #include \"defines.h\"\n\n#define VOLUME_MIN \t\t0\n#define VOLUME_MAX \t\t20\n#define BRIGHTNESS_MIN \t0\n#define BRIGHTNESS_MAX \t10\n#define COLORTEMP_MIN \t",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\tg5040\\keymon\\keymon.c",
        "start": 51,
        "end": 61,
        "startLoc": {
          "line": 51,
          "column": 1,
          "position": 108
        },
        "endLoc": {
          "line": 61,
          "column": 8,
          "position": 197
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\keymon\\keymon.c",
        "start": 40,
        "end": 112,
        "startLoc": {
          "line": 40,
          "column": 1,
          "position": 64
        },
        "endLoc": {
          "line": 112,
          "column": 12,
          "position": 794
        }
      }
    },
    {
      "format": "c",
      "lines": 12,
      "fragment": "swallow mute val -1 on shutdown\n\t\tif (is_muted >= 0 && was_muted!=is_muted) {\n\t\t\twas_muted = is_muted;\n\t\t\tSetMute(is_muted);\n\t\t\tif (GetMute()) {\n\t\t\t\t// tmp solution\n\t\t\t\tsystem(\"echo 1500000 > /sys/class/motor/voltage\");\n\t\t\t\tsystem(\"echo 1 > /sys/class/gp",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\tg5040\\keymon\\keymon.c",
        "start": 99,
        "end": 110,
        "startLoc": {
          "line": 99,
          "column": 10,
          "position": 484
        },
        "endLoc": {
          "line": 110,
          "column": 14,
          "position": 590
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rg35xx\\keymon\\keymon.c",
        "start": 64,
        "end": 75,
        "startLoc": {
          "line": 64,
          "column": 11,
          "position": 297
        },
        "endLoc": {
          "line": 75,
          "column": 14,
          "position": 404
        }
      }
    },
    {
      "format": "c",
      "lines": 20,
      "fragment": "o/gpio227/value\");\n\t\t\t\tusleep(100000);\n\t\t\t\tsystem(\"echo 0 > /sys/class/gpio/gpio227/value\");\n\t\t\t\tusleep(100000);\n\t\t\t\tsystem(\"echo 1 > /sys/class/gpio/gpio227/value\");\n\t\t\t\tusleep(100000);\n\t\t\t\tsystem(\"echo 0 > /sys/class/gpio/gpio227/value\");\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn NULL;\n}\n\nint main (int argc, char *argv[]) {\n\tstruct sigaction sa = {0};\n\tsa.sa_handler = on_term;\n\tsigaction(SIGTERM, &sa",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\tg5040\\keymon\\keymon.c",
        "start": 110,
        "end": 129,
        "startLoc": {
          "line": 110,
          "column": 2,
          "position": 592
        },
        "endLoc": {
          "line": 129,
          "column": 2,
          "position": 742
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\keymon\\keymon.c",
        "start": 61,
        "end": 80,
        "startLoc": {
          "line": 61,
          "column": 2,
          "position": 272
        },
        "endLoc": {
          "line": 80,
          "column": 2,
          "position": 422
        }
      }
    },
    {
      "format": "c",
      "lines": 12,
      "fragment": "LL);\n\n\tInitSettings();\n\tpthread_create(&mute_pt, NULL, &watchMute, NULL);\n\n\tchar path[32];\n\tfor (int i=0; i<INPUT_COUNT; i++) {\n\t\tsprintf(path, \"/dev/input/event%i\", i);\n\t\tinputs[i] = open(path, O_RDONLY | O_NONBLOCK | O_CLOEXEC);\n\t}\n\t\n\tuint32_t input;\n\tuint32_t val;\n\tuint32_t menu_pressed = 0;\n\tuint32_t menu2_pressed = 0;\n\t\n\tuint32_t up_pressed = 0;\n\tuint32_t up_just_pressed = 0",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\tg5040\\keymon\\keymon.c",
        "start": 129,
        "end": 140,
        "startLoc": {
          "line": 129,
          "column": 5,
          "position": 744
        },
        "endLoc": {
          "line": 140,
          "column": 35,
          "position": 898
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\keymon\\keymon.c",
        "start": 80,
        "end": 91,
        "startLoc": {
          "line": 80,
          "column": 2,
          "position": 423
        },
        "endLoc": {
          "line": 91,
          "column": 7,
          "position": 577
        }
      }
    },
    {
      "format": "c",
      "lines": 19,
      "fragment": "d, NULL);\n\t\tnow = tod.tv_sec * 1000 + tod.tv_usec / 1000;\n\t\tif (now-then>1000) ignore = 1; // ignore input that arrived during sleep\n\t\t\n\t\tfor (int i=0; i<INPUT_COUNT; i++) {\n\t\t\tinput = inputs[i];\n\t\t\twhile(read(input, &ev, sizeof(ev))==sizeof(ev)) {\n\t\t\t\tif (ignore) continue;\n\t\t\t\tval = ev.value;\n\t\t\t\tif (ev.type==EV_SW) {\n\t\t\t\t\t//printf(\"switch: %i\\n\", ev.c",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\tg5040\\keymon\\keymon.c",
        "start": 153,
        "end": 171,
        "startLoc": {
          "line": 153,
          "column": 2,
          "position": 1002
        },
        "endLoc": {
          "line": 171,
          "column": 14,
          "position": 1128
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\keymon\\keymon.c",
        "start": 125,
        "end": 120,
        "startLoc": {
          "line": 125,
          "column": 2,
          "position": 869
        },
        "endLoc": {
          "line": 120,
          "column": 11,
          "position": 827
        }
      }
    },
    {
      "format": "c",
      "lines": 13,
      "fragment": "de);\n\t\t\t\t\tif (ev.code==CODE_JACK) {\n\t\t\t\t\t\t//printf(\"jack: %i\\n\", val);\n\t\t\t\t\t\tSetJack(val);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (( ev.type != EV_KEY ) || ( val > REPEAT )) continue;\n\t\t\t\t//printf(\"code: %i (%i)\\n\", ev.code, val); fflush(stdout);\n\t\t\t\tswitch (ev.code) {\n\t\t\t\t\tcase CODE_MENU2:\n\t\t\t\t\t\tmenu_pressed = val;\n\t\t\t\t\tbreak;\n",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\tg5040\\keymon\\keymon.c",
        "start": 171,
        "end": 183,
        "startLoc": {
          "line": 171,
          "column": 2,
          "position": 1130
        },
        "endLoc": {
          "line": 183,
          "column": 3,
          "position": 1242
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\zero28\\keymon\\keymon.c",
        "start": 119,
        "end": 154,
        "startLoc": {
          "line": 119,
          "column": 2,
          "position": 821
        },
        "endLoc": {
          "line": 154,
          "column": 2,
          "position": 1101
        }
      }
    },
    {
      "format": "c",
      "lines": 16,
      "fragment": "pressed = val;\n\t\t\t\t\t\tif (val) up_repeat_at = now + 300;\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase CODE_MINUS:\n\t\t\t\t\t\tdown_pressed = down_just_pressed = val;\n\t\t\t\t\t\tif (val) down_repeat_at = now + 300;\n\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (ignore) {\n\t\t\tmenu_pressed = 0;\n\t\t\tmenu2_pressed = 0;\n\t\t\tup_pressed = up_just_pressed = 0;\n\t\t\tdown_pressed = d",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\tg5040\\keymon\\keymon.c",
        "start": 188,
        "end": 203,
        "startLoc": {
          "line": 188,
          "column": 4,
          "position": 1283
        },
        "endLoc": {
          "line": 203,
          "column": 3,
          "position": 1413
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\keymon\\keymon.c",
        "start": 153,
        "end": 168,
        "startLoc": {
          "line": 153,
          "column": 4,
          "position": 1096
        },
        "endLoc": {
          "line": 168,
          "column": 2,
          "position": 1226
        }
      }
    },
    {
      "format": "c",
      "lines": 17,
      "fragment": " && now>=up_repeat_at)) {\n\t\t\tif (menu_pressed) {\n\t\t\t\tval = GetBrightness();\n\t\t\t\tif (val<BRIGHTNESS_MAX) SetBrightness(++val);\n\t\t\t}\n\t\t\telse if (menu2_pressed) {\n\t\t\t\tval = GetColortemp();\n\t\t\t\tif (val<COLORTEMP_MAX) {\n\t\t\t\t\tSetColortemp(++val",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\tg5040\\keymon\\keymon.c",
        "start": 208,
        "end": 224,
        "startLoc": {
          "line": 208,
          "column": 4,
          "position": 1454
        },
        "endLoc": {
          "line": 224,
          "column": 4,
          "position": 1554
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\rgb30\\keymon\\keymon.c",
        "start": 167,
        "end": 163,
        "startLoc": {
          "line": 167,
          "column": 4,
          "position": 1221
        },
        "endLoc": {
          "line": 163,
          "column": 2,
          "position": 1203
        }
      }
    },
    {
      "format": "c",
      "lines": 11,
      "fragment": "sn't really need to be persisted but still needs to be shared\n\tint jack; \n} SettingsV6;\n\ntypedef struct SettingsV7 {\n\tint version; // future proofing\n\tint brightness;\n\tint colortempera",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\desktop\\libmsettings\\msettings.c",
        "start": 68,
        "end": 78,
        "startLoc": {
          "line": 68,
          "column": 2,
          "position": 330
        },
        "endLoc": {
          "line": 78,
          "column": 16,
          "position": 391
        }
      },
      "secondFile": {
        "name": "workspace\\desktop\\libmsettings\\msettings.c",
        "start": 53,
        "end": 63,
        "startLoc": {
          "line": 53,
          "column": 2,
          "position": 239
        },
        "endLoc": {
          "line": 63,
          "column": 7,
          "position": 300
        }
      }
    },
    {
      "format": "c",
      "lines": 11,
      "fragment": "sn't really need to be persisted but still needs to be shared\n\tint jack; \n} SettingsV7;\n\ntypedef struct SettingsV8 {\n\tint version; // future proofing\n\tint brightness;\n\tint colortemperatur",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\desktop\\libmsettings\\msettings.c",
        "start": 88,
        "end": 98,
        "startLoc": {
          "line": 88,
          "column": 2,
          "position": 451
        },
        "endLoc": {
          "line": 98,
          "column": 19,
          "position": 512
        }
      },
      "secondFile": {
        "name": "workspace\\desktop\\libmsettings\\msettings.c",
        "start": 53,
        "end": 63,
        "startLoc": {
          "line": 53,
          "column": 2,
          "position": 239
        },
        "endLoc": {
          "line": 63,
          "column": 7,
          "position": 300
        }
      }
    },
    {
      "format": "c",
      "lines": 17,
      "fragment": "sn't really need to be persisted but still needs to be shared\n\tint jack; \n} SettingsV8;\n\ntypedef struct SettingsV9 {\n\tint version; // future proofing\n\tint brightness;\n\tint colortemperature;\n\tint headphones;\n\tint speaker;\n\tint mute;\n\tint contrast;\n\tint saturation;\n\tint exposure;\n\tint toggled_brightness;\n\tint toggled_colortemperature;\n\ti",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\desktop\\libmsettings\\msettings.c",
        "start": 109,
        "end": 125,
        "startLoc": {
          "line": 109,
          "column": 2,
          "position": 578
        },
        "endLoc": {
          "line": 125,
          "column": 21,
          "position": 675
        }
      },
      "secondFile": {
        "name": "workspace\\desktop\\libmsettings\\msettings.c",
        "start": 53,
        "end": 104,
        "startLoc": {
          "line": 53,
          "column": 2,
          "position": 239
        },
        "endLoc": {
          "line": 104,
          "column": 7,
          "position": 548
        }
      }
    },
    {
      "format": "c",
      "lines": 15,
      "fragment": "_contrast = old.mutedcontrast;\n\t\t\t\t\tmsettings->toggled_exposure = old.mutedexposure;\n\t\t\t\t\tmsettings->toggled_saturation = old.mutedsaturation;\n\n\t\t\t\t\tmsettings->saturation = old.saturation;\n\t\t\t\t\tmsettings->contrast = old.contrast;\n\t\t\t\t\tmsettings->exposure = old.exposure;\n\n\t\t\t\t\tmsettings->colortemperature = old.colortemperature;\n\n\t\t\t\t\tmsettings->brightness = old.brightness;\n\t\t\t\t\tmsettings->headphones = old.head",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\desktop\\libmsettings\\msettings.c",
        "start": 241,
        "end": 255,
        "startLoc": {
          "line": 241,
          "column": 16,
          "position": 1626
        },
        "endLoc": {
          "line": 255,
          "column": 2,
          "position": 1749
        }
      },
      "secondFile": {
        "name": "workspace\\desktop\\libmsettings\\msettings.c",
        "start": 218,
        "end": 232,
        "startLoc": {
          "line": 218,
          "column": 19,
          "position": 1408
        },
        "endLoc": {
          "line": 232,
          "column": 2,
          "position": 1532
        }
      }
    },
    {
      "format": "c",
      "lines": 15,
      "fragment": "= old.jack;\n\t\t\t\t}\n\t\t\t\telse if(version==6) {\n\t\t\t\t\tprintf(\"Found settings v6.\\n\");\n\t\t\t\t\tSettingsV6 old;\n\t\t\t\t\tread(fd, &old, sizeof(SettingsV6));\n\t\t\t\t\t\n\t\t\t\t\tmsettings->saturation = old.saturation;\n\t\t\t\t\tmsettings->contrast = old.contrast;\n\t\t\t\t\tmsettings->exposure = old.exposure;\n\n\t\t\t\t\tmsettings->colortemperature = old.colortemperature;\n\n\t\t\t\t\tmsettings->brightness = old.brightness;\n\t\t\t\t\tmsettings->headphones = old.head",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\desktop\\libmsettings\\msettings.c",
        "start": 258,
        "end": 272,
        "startLoc": {
          "line": 258,
          "column": 2,
          "position": 1782
        },
        "endLoc": {
          "line": 272,
          "column": 2,
          "position": 1906
        }
      },
      "secondFile": {
        "name": "workspace\\desktop\\libmsettings\\msettings.c",
        "start": 218,
        "end": 232,
        "startLoc": {
          "line": 218,
          "column": 19,
          "position": 1408
        },
        "endLoc": {
          "line": 232,
          "column": 2,
          "position": 1532
        }
      }
    },
    {
      "format": "c",
      "lines": 11,
      "fragment": "= old.jack;\n\t\t\t\t}\n\t\t\t\telse if(version==5) {\n\t\t\t\t\tprintf(\"Found settings v5.\\n\");\n\t\t\t\t\tSettingsV5 old;\n\t\t\t\t\tread(fd, &old, sizeof(SettingsV5));\n\n\t\t\t\t\tmsettings->colortemperature = old.colortemperature;\n\n\t\t\t\t\tmsettings->brightness = old.brightness;\n\t\t\t\t\tmsettings->headphones = old.head",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\desktop\\libmsettings\\msettings.c",
        "start": 275,
        "end": 285,
        "startLoc": {
          "line": 275,
          "column": 2,
          "position": 1939
        },
        "endLoc": {
          "line": 285,
          "column": 2,
          "position": 2025
        }
      },
      "secondFile": {
        "name": "workspace\\desktop\\libmsettings\\msettings.c",
        "start": 222,
        "end": 232,
        "startLoc": {
          "line": 222,
          "column": 9,
          "position": 1446
        },
        "endLoc": {
          "line": 232,
          "column": 2,
          "position": 1532
        }
      }
    },
    {
      "format": "c",
      "lines": 9,
      "fragment": "V4 old;\n\t\t\t\t\tread(fd, &old, sizeof(SettingsV4));\n\n\t\t\t\t\t// colortemp was 0-20 here\n\t\t\t\t\tmsettings->colortemperature = old.colortemperature * 2;\n\n\t\t\t\t\tmsettings->brightness = old.brightness;\n\t\t\t\t\tmsettings->headphones = old.head",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\desktop\\libmsettings\\msettings.c",
        "start": 291,
        "end": 299,
        "startLoc": {
          "line": 291,
          "column": 2,
          "position": 2078
        },
        "endLoc": {
          "line": 299,
          "column": 2,
          "position": 2151
        }
      },
      "secondFile": {
        "name": "workspace\\desktop\\libmsettings\\msettings.c",
        "start": 224,
        "end": 232,
        "startLoc": {
          "line": 224,
          "column": 17,
          "position": 1459
        },
        "endLoc": {
          "line": 232,
          "column": 2,
          "position": 1532
        }
      }
    },
    {
      "format": "c",
      "lines": 9,
      "fragment": "= old.jack;\n\t\t\t\t}\n\t\t\t\telse if(version==3) {\n\t\t\t\t\tprintf(\"Found settings v3.\\n\");\n\t\t\t\t\tSettingsV3 old;\n\t\t\t\t\tread(fd, &old, sizeof(SettingsV3));\n\n\t\t\t\t\tmsettings->brightness = old.brightness;\n\t\t\t\t\tmsettings->headphone",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\desktop\\libmsettings\\msettings.c",
        "start": 302,
        "end": 310,
        "startLoc": {
          "line": 302,
          "column": 2,
          "position": 2184
        },
        "endLoc": {
          "line": 310,
          "column": 2,
          "position": 2253
        }
      },
      "secondFile": {
        "name": "workspace\\desktop\\libmsettings\\msettings.c",
        "start": 224,
        "end": 232,
        "startLoc": {
          "line": 224,
          "column": 17,
          "position": 1459
        },
        "endLoc": {
          "line": 232,
          "column": 3,
          "position": 1528
        }
      }
    },
    {
      "format": "c",
      "lines": 6,
      "fragment": "face(text, NULL, dst, &(SDL_Rect){point.x+(w-text->w)/2,point.y+(SCALE1(BUTTON_SIZE)-text->h)/2,text->w,text->h});\n\t}\n\n\tSDL_FreeSurface(te",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\all\\minput\\minput.c",
        "start": 44,
        "end": 49,
        "startLoc": {
          "line": 44,
          "column": 1,
          "position": 475
        },
        "endLoc": {
          "line": 49,
          "column": 9,
          "position": 525
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\my282\\tests\\calibrate\\calibrate.c",
        "start": 13,
        "end": 19,
        "startLoc": {
          "line": 13,
          "column": 1,
          "position": 12
        },
        "endLoc": {
          "line": 19,
          "column": 10,
          "position": 63
        }
      }
    },
    {
      "format": "c",
      "lines": 6,
      "fragment": "n, PAD_isPressed(BTN_L3), x + o, y + o, 0);\n\t\t\t}\n\t\t\t\n\t\t\t// R3\n\t\t\tif (has_R3) {\n\t\t\t\tint x = FIXED_WIDTH - SCALE1(PADDING + PILL_SIZE * 3) + SCALE1(PILL_SIZE);\n\t\t\t\tint y = oy + SCALE1(PILL_SIZE*6);\n\t\t\t\tint",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\all\\minput\\minput.c",
        "start": 250,
        "end": 255,
        "startLoc": {
          "line": 250,
          "column": 2,
          "position": 3182
        },
        "endLoc": {
          "line": 255,
          "column": 5,
          "position": 3252
        }
      },
      "secondFile": {
        "name": "workspace\\all\\minput\\minput.c",
        "start": 240,
        "end": 245,
        "startLoc": {
          "line": 240,
          "column": 2,
          "position": 3036
        },
        "endLoc": {
          "line": 245,
          "column": 5,
          "position": 3107
        }
      }
    },
    {
      "format": "c",
      "lines": 12,
      "fragment": "r *rom_name = removeExtension(file_name);\n\n    char *sql = sqlite3_mprintf(\"SELECT id FROM rom WHERE (name=%Q OR name=%Q) AND type='ORPHAN' LIMIT 1;\", rom_",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\all\\libgametimedb\\gametimedb.c",
        "start": 263,
        "end": 274,
        "startLoc": {
          "line": 263,
          "column": 11,
          "position": 2164
        },
        "endLoc": {
          "line": 274,
          "column": 4,
          "position": 2219
        }
      },
      "secondFile": {
        "name": "workspace\\all\\libgametimedb\\gametimedb.c",
        "start": 232,
        "end": 241,
        "startLoc": {
          "line": 232,
          "column": 55,
          "position": 1853
        },
        "endLoc": {
          "line": 241,
          "column": 5,
          "position": 1906
        }
      }
    },
    {
      "format": "c",
      "lines": 12,
      "fragment": "ar *rom_path)\n{\n    int rom_id = ROM_NOT_FOUND;\n\n    char rel_path[MAX_PATH];\n    __ensure_rel_path(rel_path, rom_path);\n\n    char *sql = sqlite3_mprintf(\"SELECT id FROM rom WHERE fi",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\all\\libgametimedb\\gametimedb.c",
        "start": 283,
        "end": 294,
        "startLoc": {
          "line": 283,
          "column": 4,
          "position": 2308
        },
        "endLoc": {
          "line": 294,
          "column": 27,
          "position": 2365
        }
      },
      "secondFile": {
        "name": "workspace\\all\\libgametimedb\\gametimedb.c",
        "start": 232,
        "end": 274,
        "startLoc": {
          "line": 232,
          "column": 55,
          "position": 1853
        },
        "endLoc": {
          "line": 274,
          "column": 24,
          "position": 2221
        }
      }
    },
    {
      "format": "c",
      "lines": 12,
      "fragment": "t_index = i;\n                    break;\n                }\n            }\n            light->color1 = bright_colors[(current_index + 1) % num_bright_colors];\n        }\n        else if (PAD_justPressed(BTN_LEFT))\n        {\n            int current_index = -1;\n            for (int i = 0; i < num_bright_colors; i++)\n            {\n                if (br",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\all\\ledcontrol\\ledcontrol.c",
        "start": 123,
        "end": 134,
        "startLoc": {
          "line": 123,
          "column": 9,
          "position": 1473
        },
        "endLoc": {
          "line": 134,
          "column": 2,
          "position": 1566
        }
      },
      "secondFile": {
        "name": "workspace\\all\\ledcontrol\\ledcontrol.c",
        "start": 110,
        "end": 121,
        "startLoc": {
          "line": 110,
          "column": 10,
          "position": 1357
        },
        "endLoc": {
          "line": 121,
          "column": 2,
          "position": 1450
        }
      }
    },
    {
      "format": "c",
      "lines": 7,
      "fragment": "ADDING * 2);\n                    GFX_blitPill(selected ? ASSET_WHITE_PILL : ASSET_BLACK_PILL, screen, \n                        &(SDL_Rect){SCALE1(PADDING), y, text_width + SCALE1(BUTTON_MARGIN + BUTTON_SIZE), SCALE1(PILL_SIZE)});\n                    SDL_BlitSurface(text, \n                        &(SDL_Re",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\all\\ledcontrol\\ledcontrol.c",
        "start": 362,
        "end": 368,
        "startLoc": {
          "line": 362,
          "column": 2,
          "position": 3870
        },
        "endLoc": {
          "line": 368,
          "column": 19,
          "position": 3951
        }
      },
      "secondFile": {
        "name": "workspace\\all\\ledcontrol\\ledcontrol.c",
        "start": 352,
        "end": 357,
        "startLoc": {
          "line": 352,
          "column": 11,
          "position": 3660
        },
        "endLoc": {
          "line": 357,
          "column": 2,
          "position": 3740
        }
      }
    },
    {
      "format": "c",
      "lines": 11,
      "fragment": " y + SCALE1(BUTTON_MARGIN)\n                    }, settings_values[j]);\n                } else  {\n                    snprintf(setting_text, sizeof(setting_text), \"%s: %d\", settings_labels[j], settings_values[j]);\n                    SDL_Surface *text = TTF_RenderUTF8_Blended(font.medium, setting_text, current_color);\n                    int text_width = text->w + SCALE1(BUTTON_PADDING * 2);\n                    GFX_blitPill(selected ? ASSET_WHITE_PILL : ASSET_BLACK_PILL, screen, \n                        &(SDL_Rect){SCALE1(PADDING), y, text_width, SCALE1(PILL_SIZE)});\n                    SDL_BlitSurface(text, \n                        ",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\all\\ledcontrol\\ledcontrol.c",
        "start": 373,
        "end": 383,
        "startLoc": {
          "line": 373,
          "column": 16,
          "position": 4029
        },
        "endLoc": {
          "line": 383,
          "column": 2,
          "position": 4197
        }
      },
      "secondFile": {
        "name": "workspace\\all\\ledcontrol\\ledcontrol.c",
        "start": 358,
        "end": 357,
        "startLoc": {
          "line": 358,
          "column": 16,
          "position": 3774
        },
        "endLoc": {
          "line": 357,
          "column": 5,
          "position": 3742
        }
      }
    },
    {
      "format": "c",
      "lines": 9,
      "fragment": " if (i + 1 < argc) {\n                LOG_info(\"Stop tracking: %s\\n\", argv[i+1]);\n                play_activity_stop(argv[++i]);\n            }\n            else {\n                printf(\"Error: Missing rom_path argument\\n\");\n                pri",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\all\\gametimectl\\gametimectl.c",
        "start": 46,
        "end": 54,
        "startLoc": {
          "line": 46,
          "column": 19,
          "position": 311
        },
        "endLoc": {
          "line": 54,
          "column": 11,
          "position": 367
        }
      },
      "secondFile": {
        "name": "workspace\\all\\gametimectl\\gametimectl.c",
        "start": 31,
        "end": 39,
        "startLoc": {
          "line": 31,
          "column": 20,
          "position": 171
        },
        "endLoc": {
          "line": 39,
          "column": 9,
          "position": 227
        }
      }
    },
    {
      "format": "c",
      "lines": 11,
      "fragment": "har* path) {\n\tclose(open(path, O_RDWR|O_CREAT, 0777));\n}\nint toggle(char *path) {\n    if (access(path, F_OK) == 0) {\n        unlink(path);\n        return 0;",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\all\\common\\utils.c",
        "start": 427,
        "end": 437,
        "startLoc": {
          "line": 427,
          "column": 2,
          "position": 4005
        },
        "endLoc": {
          "line": 437,
          "column": 8,
          "position": 4080
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\my355\\libmsettings\\msettings.c",
        "start": 62,
        "end": 72,
        "startLoc": {
          "line": 62,
          "column": 5,
          "position": 431
        },
        "endLoc": {
          "line": 72,
          "column": 7,
          "position": 506
        }
      }
    },
    {
      "format": "c",
      "lines": 14,
      "fragment": "     return 0;\n    } else {\n        touch(path);\n        return 1;\n    }\n}\nvoid putFile(char* path, char* contents) {\n\tFILE* file = fopen(path, \"w\");\n\tif (file) {\n\t\tfputs(contents, file);\n\t\tfclose(file);\n\t}\n}\nvoid getFile(char* path, char* buffer, size_t buffer_size) {\n\tFILE *file = fopen(path, \"r\");\n\tif (file) {\n\t\tfseek(",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\all\\common\\utils.c",
        "start": 436,
        "end": 449,
        "startLoc": {
          "line": 436,
          "column": 1,
          "position": 4076
        },
        "endLoc": {
          "line": 449,
          "column": 5,
          "position": 4224
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\my355\\libmsettings\\msettings.c",
        "start": 52,
        "end": 65,
        "startLoc": {
          "line": 52,
          "column": 1,
          "position": 290
        },
        "endLoc": {
          "line": 65,
          "column": 5,
          "position": 438
        }
      }
    },
    {
      "format": "c",
      "lines": 8,
      "fragment": "LL)\n        return i;\n    \n\tFILE *file = fopen(path, \"r\");\n\tif (file!=NULL) {\n\t\tint res = fscanf(file, \"%i\", &i);\n\t\tfclose",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\all\\common\\utils.c",
        "start": 476,
        "end": 483,
        "startLoc": {
          "line": 476,
          "column": 1,
          "position": 4506
        },
        "endLoc": {
          "line": 483,
          "column": 9,
          "position": 4560
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\my355\\libmsettings\\msettings.c",
        "start": 71,
        "end": 78,
        "startLoc": {
          "line": 71,
          "column": 1,
          "position": 502
        },
        "endLoc": {
          "line": 78,
          "column": 4,
          "position": 556
        }
      }
    },
    {
      "format": "c",
      "lines": 9,
      "fragment": "clude \"utils.h\"\n\nenum {\n\tCURSOR_YEAR,\n\tCURSOR_MONTH,\n\tCURSOR_DAY,\n\tCURSOR_HOUR,\n\tCURSOR_MINUTE,\n\tCURSOR_SECOND,\n\tCURSOR_AMPM,\n};\n\nint main(int argc , char* argv[]) {\n\tPWR_setCPUSpeed(CPU_SPEE",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\all\\clock\\clock.c",
        "start": 22,
        "end": 30,
        "startLoc": {
          "line": 22,
          "column": 1,
          "position": 48
        },
        "endLoc": {
          "line": 30,
          "column": 30,
          "position": 112
        }
      },
      "secondFile": {
        "name": "workspace\\_unmaintained\\my282\\tests\\calibrate\\calibrate.c",
        "start": 13,
        "end": 52,
        "startLoc": {
          "line": 13,
          "column": 1,
          "position": 12
        },
        "endLoc": {
          "line": 52,
          "column": 12,
          "position": 539
        }
      }
    },
    {
      "format": "c",
      "lines": 13,
      "fragment": "n_count) select_cursor -= option_count;\n\t\t\t\n\t\t\tif (show_24hour) {\n\t\t\t\tsystem(\"touch \" USERDATA_PATH \"/show_24hour\");\n\t\t\t}\n\t\t\telse {\n\t\t\t\tsystem(\"rm \" USERDATA_PATH \"/show_24hour\");\n\t\t\t}\n\t\t}\n\t\t\n\t\tPWR_update(&dirty, NULL, NULL,NULL);\n\t\t\n\t\tint is_online =",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\all\\clock\\clock.c",
        "start": 238,
        "end": 250,
        "startLoc": {
          "line": 238,
          "column": 5,
          "position": 2057
        },
        "endLoc": {
          "line": 250,
          "column": 3,
          "position": 2148
        }
      },
      "secondFile": {
        "name": "workspace\\all\\ledcontrol\\ledcontrol.c",
        "start": 255,
        "end": 267,
        "startLoc": {
          "line": 255,
          "column": 13,
          "position": 2457
        },
        "endLoc": {
          "line": 267,
          "column": 4,
          "position": 2548
        }
      }
    },
    {
      "format": "c",
      "lines": 18,
      "fragment": "dio.h>\n#include <unistd.h>\n#include <stdbool.h>\n#include <stdlib.h>\n#include <dirent.h>\n#include <signal.h>\n#include <msettings.h>\n\n#include \"defines.h\"\n#include \"api.h\"\n#include \"utils.h\"\n\nstatic bool quit = false;\n\nstatic void sig",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\all\\bootlogo\\bootlogo.c",
        "start": 13,
        "end": 30,
        "startLoc": {
          "line": 13,
          "column": 1,
          "position": 12
        },
        "endLoc": {
          "line": 30,
          "column": 12,
          "position": 94
        }
      },
      "secondFile": {
        "name": "workspace\\all\\gametime\\gametime.c",
        "start": 30,
        "end": 50,
        "startLoc": {
          "line": 30,
          "column": 1,
          "position": 89
        },
        "endLoc": {
          "line": 50,
          "column": 7,
          "position": 174
        }
      }
    },
    {
      "format": "c",
      "lines": 17,
      "fragment": "5, 150, 200);\n        }\n        return 0;\n    }\n    return count;\n}\n\nvoid unloadImages()\n{\n    for (int i = 0; i < count; i++)\n    {\n        SDL_FreeSurface(images[i]);\n    }\n    free(images);\n}\n\nint main(int argc, char *argv[])\n{\n    InitSettings",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\all\\bootlogo\\bootlogo.c",
        "start": 85,
        "end": 101,
        "startLoc": {
          "line": 85,
          "column": 7,
          "position": 583
        },
        "endLoc": {
          "line": 101,
          "column": 11,
          "position": 669
        }
      },
      "secondFile": {
        "name": "workspace\\all\\gametime\\gametime.c",
        "start": 329,
        "end": 345,
        "startLoc": {
          "line": 329,
          "column": 15,
          "position": 3299
        },
        "endLoc": {
          "line": 345,
          "column": 16,
          "position": 3385
        }
      }
    },
    {
      "format": "c",
      "lines": 13,
      "fragment": ";\n\n    PWR_setCPUSpeed(CPU_SPEED_MENU);\n\n    screen = GFX_init(MODE_MAIN);\n    PAD_init();\n    PWR_init();\n\n    signal(SIGINT, sigHandler);\n    signal(SIGTERM, sigHandler);\n\n    loadImages();\n\n    int dirty = 1;\n    int show_setting = 0;\n    int was_online = PLAT_isOnline();\n    int had_bt = PLAT_btIsConnected();\n    while (!",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\all\\bootlogo\\bootlogo.c",
        "start": 101,
        "end": 113,
        "startLoc": {
          "line": 101,
          "column": 2,
          "position": 672
        },
        "endLoc": {
          "line": 113,
          "column": 102,
          "position": 751
        }
      },
      "secondFile": {
        "name": "workspace\\all\\clock\\clock.c",
        "start": 140,
        "end": 151,
        "startLoc": {
          "line": 140,
          "column": 2,
          "position": 1390
        },
        "endLoc": {
          "line": 151,
          "column": 3,
          "position": 1469
        }
      }
    },
    {
      "format": "c",
      "lines": 15,
      "fragment": "NT, sigHandler);\n    signal(SIGTERM, sigHandler);\n\n    loadImages();\n\n    int dirty = 1;\n    int show_setting = 0;\n    int was_online = PLAT_isOnline();\n    int had_bt = PLAT_btIsConnected();\n    while (!quit)\n    {\n        uint32_t frame_start = SDL_GetTicks();\n\n        PAD_poll();\n\n        // This might be too harsh, but ignore all combos wi",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\all\\bootlogo\\bootlogo.c",
        "start": 106,
        "end": 120,
        "startLoc": {
          "line": 106,
          "column": 2,
          "position": 717
        },
        "endLoc": {
          "line": 120,
          "column": 9,
          "position": 784
        }
      },
      "secondFile": {
        "name": "workspace\\all\\gametime\\gametime.c",
        "start": 357,
        "end": 370,
        "startLoc": {
          "line": 357,
          "column": 2,
          "position": 3498
        },
        "endLoc": {
          "line": 370,
          "column": 7,
          "position": 3564
        }
      }
    },
    {
      "format": "c",
      "lines": 19,
      "fragment": "eboot\", boot_path, boot_path, logo_path, boot_path, boot_path);\n                system(cmd);\n            }\n            else if (PAD_justPressed(BTN_B))\n            {\n                quit = 1;\n            }\n        }\n\n        PWR_update(&dirty, NULL, NULL, NULL);\n\n        int is_online = PLAT_isOnline();\n        if (was_online != is_online)\n            dirty = 1;\n        was_onl",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\all\\bootlogo\\bootlogo.c",
        "start": 152,
        "end": 170,
        "startLoc": {
          "line": 152,
          "column": 2,
          "position": 1020
        },
        "endLoc": {
          "line": 170,
          "column": 10,
          "position": 1138
        }
      },
      "secondFile": {
        "name": "workspace\\all\\clock\\clock.c",
        "start": 234,
        "end": 251,
        "startLoc": {
          "line": 234,
          "column": 2,
          "position": 2039
        },
        "endLoc": {
          "line": 251,
          "column": 9,
          "position": 2157
        }
      }
    },
    {
      "format": "c",
      "lines": 18,
      "fragment": "a available before attempting an estimation\n#define GRAPH_MIN_SESSION_FOR_ESTIMATION 1200\n// Cutoff at 15h standby time\n#define GRAPH_MAX_PLAUSIBLE_ESTIMATION 54000\n#define GRAPH_ESTIMATED_LINE_GAP 20\n",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\all\\battery\\battery.c",
        "start": 112,
        "end": 129,
        "startLoc": {
          "line": 112,
          "column": 2,
          "position": 428
        },
        "endLoc": {
          "line": 129,
          "column": 5,
          "position": 501
        }
      },
      "secondFile": {
        "name": "workspace\\all\\gametime\\gametime.c",
        "start": 30,
        "end": 50,
        "startLoc": {
          "line": 30,
          "column": 6,
          "position": 98
        },
        "endLoc": {
          "line": 50,
          "column": 7,
          "position": 174
        }
      }
    },
    {
      "format": "c",
      "lines": 9,
      "fragment": " y1);\n\n    if (x1 < x2)\n    {\n        sx = 1;\n    }\n    else\n    {\n        sx = -1;\n    }\n\n    if (y1 < y2)\n    {\n        sy = 1;\n    }\n    else\n    {\n        sy = -1;\n    }\n\n    err = dx - dy;\n\n    while (1)\n    {\n        SDL_Rect pixel = {x1, y1, SCALE1(1), SCALE1(1)};\n        SDL_FillRect(screen, &pixel, color);\n\n        if (x1 == x2 && y1 == y2)\n        {\n          ",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\all\\battery\\battery.c",
        "start": 192,
        "end": 200,
        "startLoc": {
          "line": 192,
          "column": 1,
          "position": 950
        },
        "endLoc": {
          "line": 200,
          "column": 2,
          "position": 1066
        }
      },
      "secondFile": {
        "name": "workspace\\all\\gametime\\gametime.c",
        "start": 66,
        "end": 73,
        "startLoc": {
          "line": 66,
          "column": 1,
          "position": 290
        },
        "endLoc": {
          "line": 73,
          "column": 2,
          "position": 405
        }
      }
    },
    {
      "format": "c",
      "lines": 19,
      "fragment": " break;\n        }\n\n        e2 = 2 * err;\n\n        if (e2 > -dy)\n        {\n            err -= dy;\n            x1 += sx;\n        }\n\n        if (e2 < dx)\n        {\n            err += dx;\n            y1 += sy;\n        }\n    }\n}\n\nint _renderText(const char *text, TTF_Font *font, SDL_Color color, SDL_Rect *rect, bool right_align)\n{\n    int text_width = 0;\n    SDL_Surface *textSurface = TTF_RenderUTF8_Blended(font, text, color);\n    if (textSurface != NULL)\n    {\n        text_width = textSurfa",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\all\\battery\\battery.c",
        "start": 200,
        "end": 218,
        "startLoc": {
          "line": 200,
          "column": 2,
          "position": 1068
        },
        "endLoc": {
          "line": 218,
          "column": 5,
          "position": 1240
        }
      },
      "secondFile": {
        "name": "workspace\\all\\gametime\\gametime.c",
        "start": 73,
        "end": 91,
        "startLoc": {
          "line": 73,
          "column": 2,
          "position": 407
        },
        "endLoc": {
          "line": 91,
          "column": 36,
          "position": 579
        }
      }
    },
    {
      "format": "c",
      "lines": 7,
      "fragment": "nt duration_to_pixel(int duration)\n{\n    // Convert a duration to a number of pixel\n    return (int)((graph.layout.graph_display_size_x * duration) / GRAPH_DISPLAY_DURATION);\n}\n\nvoid comput",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\all\\battery\\battery.c",
        "start": 285,
        "end": 291,
        "startLoc": {
          "line": 285,
          "column": 71,
          "position": 1818
        },
        "endLoc": {
          "line": 291,
          "column": 13,
          "position": 1878
        }
      },
      "secondFile": {
        "name": "workspace\\all\\libbatmondb\\batmondb.c",
        "start": 57,
        "end": 62,
        "startLoc": {
          "line": 57,
          "column": 78,
          "position": 288
        },
        "endLoc": {
          "line": 62,
          "column": 7,
          "position": 347
        }
      }
    },
    {
      "format": "c",
      "lines": 10,
      "fragment": "ARGIN + BUTTON_MARGIN + FONT_MEDIUM);\n\n    graph.layout.label_size_x = graph.layout.graph_display_size_x / 2;\n    graph.layout.label_size_y = FONT_MEDI",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\all\\battery\\battery.c",
        "start": 641,
        "end": 650,
        "startLoc": {
          "line": 641,
          "column": 2,
          "position": 6042
        },
        "endLoc": {
          "line": 650,
          "column": 11,
          "position": 6092
        }
      },
      "secondFile": {
        "name": "workspace\\all\\gametime\\gametime.c",
        "start": 336,
        "end": 345,
        "startLoc": {
          "line": 336,
          "column": 15,
          "position": 3335
        },
        "endLoc": {
          "line": 345,
          "column": 16,
          "position": 3385
        }
      }
    },
    {
      "format": "c",
      "lines": 22,
      "fragment": "\n    graph.layout.graph_max_size = GRAPH_MAX_FULL_PAGES * graph.layout.graph_display_size_x;\n\n    graph.graphic = (GraphSpot *)malloc(graph.layout.graph_max_size * sizeof(GraphSpot));\n    for (int i = 0; i < graph.layout.graph_max_size; i++)\n    {\n        graph.graphic[i].pixel_height = 0;\n        graph.graphic[i].is_charging = false;\n        graph.graphic[i].is_estimated = false;\n    }\n}\n\nint main(int argc, char *argv[])\n{\n    InitSettings();\n\n    PWR_setCPUSpeed(CPU_SPEED_MENU);\n    device_model = PLA",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\all\\battery\\battery.c",
        "start": 652,
        "end": 673,
        "startLoc": {
          "line": 652,
          "column": 11,
          "position": 6105
        },
        "endLoc": {
          "line": 673,
          "column": 6,
          "position": 6227
        }
      },
      "secondFile": {
        "name": "workspace\\all\\bootlogo\\bootlogo.c",
        "start": 101,
        "end": 122,
        "startLoc": {
          "line": 101,
          "column": 11,
          "position": 670
        },
        "endLoc": {
          "line": 122,
          "column": 9,
          "position": 792
        }
      }
    },
    {
      "format": "c",
      "lines": 17,
      "fragment": " current_page--;\n            }\n            else if (PAD_justPressed(BTN_B))\n            {\n                quit = 1;\n            }\n            else if (PAD_justPressed(BTN_L1) || PAD_justPressed(BTN_L2))\n            {\n                if (current_zoom > 0)\n                {\n                    current_page = 0;\n                    current_zoom--;\n                    dirty = 1;\n            ",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\all\\battery\\battery.c",
        "start": 710,
        "end": 726,
        "startLoc": {
          "line": 710,
          "column": 9,
          "position": 6497
        },
        "endLoc": {
          "line": 726,
          "column": 14,
          "position": 6614
        }
      },
      "secondFile": {
        "name": "workspace\\all\\ledcontrol\\ledcontrol.c",
        "start": 255,
        "end": 172,
        "startLoc": {
          "line": 255,
          "column": 9,
          "position": 2449
        },
        "endLoc": {
          "line": 172,
          "column": 3,
          "position": 1146
        }
      }
    },
    {
      "format": "c",
      "lines": 13,
      "fragment": "max_width = screen->w - SCALE1(PADDING * 2) - ow;\n\n                char display_name[256];\n\n                switch (current_zoom)\n                {\n                case 0:\n                    sprintf(display_name, \"Battery usage: Last %s\", \"16 hours\");\n                    break;\n                case 1:\n                    sprintf(display_name, \"Battery usage: Last %s\", \"8 hours\");\n                    break;\n                case 2:\n                    sprintf(display_name, \"Battery usage: Last %s\", \"4 hours\");\n                    break;\n                default:\n                    sprintf(display_name, \"Battery usage: Last %s\", \"8 hours\");\n                    break;\n                }\n\n                char title[",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\all\\battery\\battery.c",
        "start": 749,
        "end": 761,
        "startLoc": {
          "line": 749,
          "column": 17,
          "position": 6778
        },
        "endLoc": {
          "line": 761,
          "column": 11,
          "position": 6979
        }
      },
      "secondFile": {
        "name": "workspace\\all\\gametime\\gametime.c",
        "start": 423,
        "end": 434,
        "startLoc": {
          "line": 423,
          "column": 17,
          "position": 3997
        },
        "endLoc": {
          "line": 434,
          "column": 11,
          "position": 4196
        }
      }
    },
    {
      "format": "c",
      "lines": 9,
      "fragment": "          SDL_Surface *text;\n                text = TTF_RenderUTF8_Blended(font.large, title, COLOR_WHITE);\n                \n                GFX_blitPill(ASSET_BLACK_PILL, screen, &(SDL_Rect){SCALE1(P",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\all\\battery\\battery.c",
        "start": 766,
        "end": 774,
        "startLoc": {
          "line": 766,
          "column": 7,
          "position": 7026
        },
        "endLoc": {
          "line": 774,
          "column": 9,
          "position": 7097
        }
      },
      "secondFile": {
        "name": "workspace\\all\\gametime\\gametime.c",
        "start": 439,
        "end": 446,
        "startLoc": {
          "line": 439,
          "column": 9,
          "position": 4247
        },
        "endLoc": {
          "line": 446,
          "column": 2,
          "position": 4317
        }
      }
    },
    {
      "format": "c",
      "lines": 10,
      "fragment": "lended(font.large, title, COLOR_WHITE);\n                \n                GFX_blitPill(ASSET_BLACK_PILL, screen, &(SDL_Rect){SCALE1(PADDING), SCALE1(PADDING), m",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\all\\battery\\battery.c",
        "start": 768,
        "end": 777,
        "startLoc": {
          "line": 768,
          "column": 2,
          "position": 7054
        },
        "endLoc": {
          "line": 777,
          "column": 13,
          "position": 7107
        }
      },
      "secondFile": {
        "name": "workspace\\all\\bootlogo\\bootlogo.c",
        "start": 184,
        "end": 193,
        "startLoc": {
          "line": 184,
          "column": 2,
          "position": 1302
        },
        "endLoc": {
          "line": 193,
          "column": 13,
          "position": 1355
        }
      }
    },
    {
      "format": "c",
      "lines": 14,
      "fragment": "        \n                GFX_blitPill(ASSET_BLACK_PILL, screen, &(SDL_Rect){SCALE1(PADDING), SCALE1(PADDING), max_width, SCALE1(PILL_SIZE)});\n                SDL_BlitSurface(text, &(SDL_Rect",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\all\\battery\\battery.c",
        "start": 770,
        "end": 783,
        "startLoc": {
          "line": 770,
          "column": 13,
          "position": 7076
        },
        "endLoc": {
          "line": 783,
          "column": 2,
          "position": 7137
        }
      },
      "secondFile": {
        "name": "workspace\\all\\minput\\minput.c",
        "start": 258,
        "end": 270,
        "startLoc": {
          "line": 258,
          "column": 4,
          "position": 3282
        },
        "endLoc": {
          "line": 270,
          "column": 2,
          "position": 3344
        }
      }
    },
    {
      "format": "c",
      "lines": 8,
      "fragment": "  sigaction(SIGCONT, &sa, 0);\n}\n\nvoid cleanup(void)\n{\n    remove(\"/tmp/percBat\");\n}\n\nvoid update_current_duration(void)\n{\n    sqlite3 *bat_log_db = open_battery_log_db();\n\n    if (bat_log_db != NULL)\n    {\n        const char ",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\all\\batmon\\batmon.c",
        "start": 82,
        "end": 89,
        "startLoc": {
          "line": 82,
          "column": 79,
          "position": 435
        },
        "endLoc": {
          "line": 89,
          "column": 3,
          "position": 507
        }
      },
      "secondFile": {
        "name": "workspace\\all\\libbatmondb\\batmondb.c",
        "start": 57,
        "end": 292,
        "startLoc": {
          "line": 57,
          "column": 78,
          "position": 288
        },
        "endLoc": {
          "line": 292,
          "column": 5,
          "position": 1890
        }
      }
    },
    {
      "format": "c",
      "lines": 13,
      "fragment": "og_db(bat_log_db);\n}\n\nint get_current_session_time(void)\n{\n    int current_session_duration = 0;\n\n    sqlite3 *bat_log_db = open_battery_log_db();\n    \n    if (bat_log_db != NULL)\n    {\n        const char *sql = \"SELECT * FROM bat_activity WHERE device_serial = ? AND is_charging = 1 ORDER BY id DESC LIMIT 1;\";\n        sqlite",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\all\\batmon\\batmon.c",
        "start": 163,
        "end": 175,
        "startLoc": {
          "line": 163,
          "column": 99,
          "position": 1064
        },
        "endLoc": {
          "line": 175,
          "column": 13,
          "position": 1163
        }
      },
      "secondFile": {
        "name": "workspace\\all\\libbatmondb\\batmondb.c",
        "start": 57,
        "end": 92,
        "startLoc": {
          "line": 57,
          "column": 78,
          "position": 288
        },
        "endLoc": {
          "line": 92,
          "column": 4,
          "position": 532
        }
      }
    },
    {
      "format": "c",
      "lines": 15,
      "fragment": " }\n                sqlite3_finalize(stmt_sum);\n            }\n        }\n        sqlite3_finalize(stmt);\n    }\n    close_battery_log_db(bat_log_db);\n    \n    return current_session_duration;\n}\n\nint set_best_session_time(int best_session)\n{\n    int is_success = 0;\n\n    sqlite3* bat_log_db = open_battery_log_db();\n\n    if (bat_log_db != NULL)\n    {\n        const char *sql = \"SELECT * FROM device_specifics WHERE device_serial = ? ORDER BY id LIMIT 1;\";\n     ",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\all\\batmon\\batmon.c",
        "start": 201,
        "end": 215,
        "startLoc": {
          "line": 201,
          "column": 2,
          "position": 1377
        },
        "endLoc": {
          "line": 215,
          "column": 6,
          "position": 1502
        }
      },
      "secondFile": {
        "name": "workspace\\all\\libbatmondb\\batmondb.c",
        "start": 54,
        "end": 92,
        "startLoc": {
          "line": 54,
          "column": 2,
          "position": 261
        },
        "endLoc": {
          "line": 92,
          "column": 4,
          "position": 532
        }
      }
    },
    {
      "format": "c",
      "lines": 8,
      "fragment": " &stmt, 0);\n\n        if (rc == SQLITE_OK)\n        {\n            sqlite3_bind_text(stmt, 1, device_model, -1, SQLITE_STATIC);\n            rc = sqlite3_step(stmt);\n            if (rc == SQLITE_ROW)\n            {\n                const char *update_sql = \"U",
      "tokens": 0,
      "firstFile": {
        "name": "workspace\\all\\batmon\\batmon.c",
        "start": 215,
        "end": 222,
        "startLoc": {
          "line": 215,
          "column": 60,
          "position": 1512
        },
        "endLoc": {
          "line": 222,
          "column": 13,
          "position": 1571
        }
      },
      "secondFile": {
        "name": "workspace\\all\\batmon\\batmon.c",
        "start": 95,
        "end": 102,
        "startLoc": {
          "line": 95,
          "column": 52,
          "position": 573
        },
        "endLoc": {
          "line": 102,
          "column": 13,
          "position": 632
        }
      }
    }
  ]
}